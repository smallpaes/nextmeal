(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f8cebf68"],{"0a76":function(t,a,s){"use strict";s("b0c0");var e=function(){var t=this,a=t._self._c;return a("nav",{staticClass:"sidenav shadow",class:{opened:t.navIsOpen}},[a("div",{staticClass:"sidenav-brand-container text-center py-5"},[a("router-link",{staticClass:"sidenav-brand",attrs:{to:{name:"home"}}},[t._v(" NextMeal ")])],1),a("ul",{staticClass:"sidenav-nav px-0 text-center"},[a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:{name:"owner-info"}}},[a("span",{staticClass:"icon"},[a("i",{staticClass:"fas fa-store"})]),a("span",{staticClass:"nav-link-description"},[t._v("餐廳")])])],1),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",class:{active:"owner-menu"===t.$route.name},attrs:{to:{name:"owner-dishes"},"active-class":"active"}},[a("span",{staticClass:"icon"},[a("i",{staticClass:"fas fa-utensils"})]),a("span",{staticClass:"nav-link-description"},[t._v("餐點")])])],1),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:{name:"owner-orders"},"active-class":"active"}},[a("span",{staticClass:"icon"},[a("i",{staticClass:"fas fa-clipboard-list"})]),a("span",{staticClass:"nav-link-description"},[t._v("訂單")])])],1),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:{name:"owner-dashboard"},"active-class":"active"}},[a("span",{staticClass:"icon"},[a("i",{staticClass:"fas fa-chart-line"})]),a("span",{staticClass:"nav-link-description"},[t._v("分析")])])],1),a("li",{staticClass:"nav-divider"}),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{href:"#",role:"button"},on:{click:t.logout}},[t._m(0),a("span",{staticClass:"nav-link-description"},[t._v("登出")])])])])])},r=[function(){var t=this,a=t._self._c;return a("span",{staticClass:"icon"},[a("i",{staticClass:"fas fa-sign-out-alt"})])}],n=(s("14d9"),{props:{navIsOpen:{type:Boolean,required:!0}},methods:{logout:function(){this.$store.commit("revokeAuthentication"),this.$router.push("/")}}}),i=n,o=(s("dd72"),s("2877")),c=Object(o["a"])(i,e,r,!1,null,"be936cce",null);a["a"]=c.exports},"0a9b":function(t,a,s){},"2eab":function(t,a,s){"use strict";s("68ac")},4948:function(t,a,s){"use strict";s("a2f9")},"68ac":function(t,a,s){},"69bf":function(t,a,s){"use strict";s.r(a);s("b0c0");var e,r,n=function(){var t=this,a=t._self._c;return a("section",{staticClass:"wrapper vh-100"},[a("OwnerSideNavBar",{attrs:{"nav-is-open":t.navIsOpen}}),a("section",{staticClass:"dashboard"},[a("NavbarToggler",{attrs:{"nav-is-open":t.navIsOpen},on:{"toggle-navbar":function(a){t.navIsOpen=!t.navIsOpen}}}),a("h1",{staticClass:"dashboard-title"},[t._v(" 餐廳分析 ")]),a("hr",{staticClass:"dashboard-divider"}),t.isLoading?a("Loader",{attrs:{height:"300px"}}):t._e(),a("transition",{attrs:{name:"slide",appear:""}},[t.isLoading?t._e():[t.currentUser.hasRestaurant?a("div",{staticClass:"row align-items-stretch"},[a("div",{staticClass:"col-md-6 mb-4"},[a("LineChartCard",{attrs:{"chart-data":t.data.orders,height:160},scopedSlots:t._u([{key:"header",fn:function(){return[a("i",{staticClass:"fas fa-clipboard-list mr-2"}),t._v(t._s(t.data.orders.name)+" ")]},proxy:!0},{key:"title",fn:function(){return[t._v(" 近一個月總"+t._s(t.data.orders.name)+"數 ")]},proxy:!0},{key:"text",fn:function(){return[a("span",{style:{color:t.data.orders.datasets[0].borderColor}},[t._v(t._s(t.data.orders.total||0))])]},proxy:!0}],null,!1,1238920747)})],1),a("div",{staticClass:"col-md-6 mb-4"},[a("PieChartCard",{attrs:{"chart-data":t.data.users,height:160},scopedSlots:t._u([{key:"header",fn:function(){return[a("i",{staticClass:"fas fa-users mr-2"}),t._v(t._s(t.data.users.name)+" ")]},proxy:!0},{key:"title",fn:function(){return[t._v(" 近一個月總"+t._s(t.data.users.name)+"數 ")]},proxy:!0},{key:"text",fn:function(){return[a("span",{style:{color:"rgb(93,90,87)"}},[t._v(t._s(t.data.users.total||0))])]},proxy:!0}],null,!1,2756118282)})],1),a("div",{staticClass:"col-md-6 mb-4"},[a("BarChartHorizontal",{attrs:{"chart-data":t.data.ratings,height:160},scopedSlots:t._u([{key:"header",fn:function(){return[a("i",{staticClass:"fas fa-smile mr-2"}),t._v(t._s(t.data.ratings.name)+" ")]},proxy:!0},{key:"title",fn:function(){return[t._v(" 用戶平均"+t._s(t.data.ratings.name)+" ")]},proxy:!0},{key:"text",fn:function(){return[a("span",{style:{color:t.data.ratings.datasets[0].borderColor}},[t._v(t._s(t.data.ratings.average||0))])]},proxy:!0}],null,!1,1679418858)})],1),a("div",{staticClass:"col-md-6 mb-4"},[a("DashboardCommentCard",{attrs:{comments:t.comments}})],1)]):a("PlaceholderMessage",{staticClass:"placeholder-message col-12 py-4 text-center"},[a("h1",[a("i",{staticClass:"fas fa-exclamation-circle"})]),t._v(" 請先至「餐廳」頁面填寫資料"),a("br"),t._v("完成開店流程 ")])]],2)],1)],1)},i=[],o=s("c7eb"),c=s("1da1"),l=s("5530"),d=(s("d9e2"),s("0a76")),u=s("0f14d"),p=s("e234"),f=function(){var t=this,a=t._self._c;return a("div",{staticClass:"card rounded-sm shadow-sm border-0"},[t.$slots.header?a("div",{staticClass:"card-header bg-white"},[t._t("header")],2):t._e(),a("div",{staticClass:"card-body card-statistic"},[a("p",{staticClass:"card-title"},[t._t("title")],2),a("h3",{staticClass:"card-text"},[t._t("text")],2)]),a("div",{staticClass:"card-body pl-0 pr-3 pb-1"},[a("BarChartTemplate",{attrs:{"chart-data":t.chartData,options:t.chartOptions,styles:t.styles}})],1)])},h=[],b=(s("a9e3"),s("1fca")),v=b["d"].reactiveProp,m={extends:b["a"],mixins:[v],props:{chartData:{type:Object,default:null},options:{type:Object,default:null}},mounted:function(){this.renderChart(this.chartData,this.options)}},g=m,C=s("2877"),_=Object(C["a"])(g,e,r,!1,null,null,null),k=_.exports,y={components:{BarChartTemplate:k},props:{chartData:{type:Object,required:!0},height:{type:Number,default:160}},data:function(){return{chartOptions:{animation:{easing:"easeOutQuad"},legend:{display:!1},responsive:!0,maintainAspectRatio:!1,layout:{padding:{right:5,top:5,left:5,bottom:15}},scales:{yAxes:[{stacked:!0,ticks:{beginAtZero:!0,stepSize:10,fontColor:"#a9a7a5"},gridLines:{display:!1,color:"rgba(255,255,255,0)"}}],xAxes:[{stacked:!0,ticks:{display:!0,fontColor:"#a9a7a5",precision:0},gridLines:{display:!1,color:"rgba(255,255,255,0)",tickMarkLength:8}}]}}}},computed:{styles:function(){return{height:"".concat(this.height,"px"),position:"relative"}}}},x=y,w=(s("8425"),Object(C["a"])(x,f,h,!1,null,"25bf817c",null)),O=w.exports,j=function(){var t=this,a=t._self._c;return a("div",{staticClass:"card rounded-sm shadow-sm border-0"},[t._m(0),t.comments.length>0?a("ul",{staticClass:"list-group list-group-flush"},t._l(t.comments,(function(s,e){return a("li",{key:e,staticClass:"list-group-item d-flex justify-content-between align-items-center"},[a("div",{staticClass:"list-group-item-wrapper"},[a("p",{staticClass:"list-title m-0"},[t._v(" "+t._s(s.name)+" ")]),a("p",{staticClass:"list-text m-0"},[t._v(" "+t._s(s.user_text)+" -- "+t._s(t._f("timeTransform")(s.createdAt))+" ")])]),a("span",{staticClass:"list-rating"},[t._v("★ "+t._s(t._f("padEnd")(s.rating)))])])})),0):a("div",{staticClass:"card-body"},[a("i",{staticClass:"far fa-sticky-note"}),t._v(" 尚未有評論 ")])])},B=[function(){var t=this,a=t._self._c;return a("div",{staticClass:"card-header bg-white"},[a("i",{staticClass:"fas fa-comment mr-2"}),t._v("評論 ")])}],D=s("2708"),L={mixins:[D["e"],D["g"],D["h"]],props:{comments:{type:Array,required:!0}}},I=L,A=(s("de1b"),Object(C["a"])(I,j,B,!1,null,"35b81c54",null)),N=A.exports,H=s("6e61"),M=s("d691"),S=s("555f"),T=s("bcc2"),P=s("2fa3"),E=s("2f62"),W={components:{OwnerSideNavBar:d["a"],NavbarToggler:u["a"],Loader:S["a"],LineChartCard:p["a"],BarChartHorizontal:O,DashboardCommentCard:N,PieChartCard:H["a"],PlaceholderMessage:M["a"]},data:function(){return{isLoading:!0,navIsOpen:!1,color:"rgb(239, 75, 77)",data:{orders:{name:"訂單",datasets:[{borderColor:"rgb(247,185,36)",backgroundColor:"rgb(253,241,211)",pointBackgroundColor:"rgb(255,255,255)",pointHoverBackgroundColor:"rgb(255,255,255)",pointBorderWidth:3,pointHoverBorderWidth:2}]},users:{name:"客群",datasets:[{backgroundColor:["rgb(0,143,250)","rgb(119,93,207)","rgb(255,140,52)","rgb(239,75,77)","rgb(78,202,138)","rgb(247,185,37)"]}]},ratings:{name:"滿意度",datasets:[{borderColor:"rgb(62,160,252)",backgroundColor:"rgb(62,160,252)",pointBackgroundColor:"rgb(255,255,255)",pointHoverBackgroundColor:"rgb(255,255,255)",pointBorderWidth:3,pointHoverBorderWidth:2}]}},comments:[]}},computed:Object(l["a"])({},Object(E["c"])(["currentUser"])),created:function(){if(this.currentUser.hasRestaurant)return this.fetchData();this.isLoading=!1},methods:{fetchData:function(){var t=this;return Object(c["a"])(Object(o["a"])().mark((function a(){var s,e,r,n,i,c,d,u,p;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,T["a"].dashboard.getDashboard();case 3:if(s=a.sent,e=s.data,r=s.statusText,"success"===e.status&&"OK"===r){a.next=8;break}throw new Error(e.message);case 8:for(n in t.data)i=e[n],c=i.labels,d=i.data,u=i.average,p=i.total,t.data[n]=Object(l["a"])(Object(l["a"])({},t.data[n]),{},{average:u,labels:c,total:p,datasets:[Object(l["a"])(Object(l["a"])({},t.data[n].datasets[0]),{},{data:d})]});t.comments=e.comments,t.isLoading=!1,a.next=17;break;case 13:a.prev=13,a.t0=a["catch"](0),t.isLoading=!1,P["a"].fire({type:"error",title:"無法取得資料，請稍後再試"});case 17:case"end":return a.stop()}}),a,null,[[0,13]])})))()}}},$=W,q=(s("2eab"),Object(C["a"])($,n,i,!1,null,"e08b9adc",null));a["default"]=q.exports},8425:function(t,a,s){"use strict";s("c666")},"8e4a":function(t,a,s){},a2f9:function(t,a,s){},bcc2:function(t,a,s){"use strict";var e=s("2fa3");a["a"]={restaurants:{get:function(){return e["b"].get("/owner")},post:function(t){return e["b"].post("/owner",t)},put:function(t){return e["b"].put("/owner",t)}},dishes:{getDishes:function(){return e["b"].get("/owner/dishes")},postNew:function(t){return e["b"].post("/owner/dishes",t)},getEdit:function(t){var a=t.dishId;return e["b"].get("/owner/dishes/".concat(a))},putEdit:function(t){var a=t.dishId,s=t.formData;return e["b"].put("/owner/dishes/".concat(a,"/edit"),s)},deleteDish:function(t){var a=t.dishId;return e["b"].delete("/owner/dishes/".concat(a))}},menu:{getMenu:function(t){var a=t.ran;return e["b"].get("/owner/menu?ran=".concat(a))},putMenu:function(t){return e["b"].put("/owner/menu",t)}},orders:{getOrders:function(){return e["b"].get("/owner/orders")}},dashboard:{getDashboard:function(){return e["b"].get("/owner/dashboard")}}}},c666:function(t,a,s){},d691:function(t,a,s){"use strict";var e=function(){var t=this,a=t._self._c;return a("div",{staticClass:"placeholder-message p-2"},[a("h5",{staticClass:"m-0"},[t._t("default")],2)])},r=[],n=(s("4948"),s("2877")),i={},o=Object(n["a"])(i,e,r,!1,null,"d84b3480",null);a["a"]=o.exports},dd72:function(t,a,s){"use strict";s("0a9b")},de1b:function(t,a,s){"use strict";s("8e4a")}}]);
//# sourceMappingURL=chunk-f8cebf68.22ec0377.js.map