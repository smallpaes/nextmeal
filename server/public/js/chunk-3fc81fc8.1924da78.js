(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3fc81fc8"],{"15df":function(t,e,r){"use strict";r("77d5")},"15fd":function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));r("a4d3"),r("b64b");function a(t,e){if(null==t)return{};var r,a,s={},n=Object.keys(t);for(a=0;a<n.length;a++)r=n[a],e.indexOf(r)>=0||(s[r]=t[r]);return s}function s(t,e){if(null==t)return{};var r,s,n=a(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}},"2a74":function(t,e,r){"use strict";r("5958")},3884:function(t,e,r){"use strict";r("6ea6")},"3cec":function(t,e,r){},"52b6":function(t,e,r){"use strict";r("b0c0"),r("a4d3"),r("e01a");var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card d-flex flex-row rounded-sm w-100 shadow-sm"},[e("div",{staticClass:"card-left"},[e("img",{staticClass:"card-img rounded-0 rounded-sm",attrs:{src:t.order.meal.image,alt:"photo of the restaurant"}})]),e("div",{staticClass:"card-right"},[e("div",{staticClass:"card-body px-3 py-0"},[e("h5",{staticClass:"card-title m-0"},[t._v(" "+t._s(t.order.meal.name)+" ")]),t.order.restaurant.rating?e("p",{staticClass:"card-text mt-1"},[e("span",{staticClass:"rating"},[t._v("★ "+t._s(t._f("padEnd")(t.order.restaurant.rating)))]),e("span",{staticClass:"mx-1"},[t._v("|")]),t._v(t._s(t.order.restaurant.name)+" ")]):t._e(),e("p",{staticClass:"card-text d-none d-md-block"},[t._v(" "+t._s(t._f("textTruncate")(t.order.meal.description))+" ")])])])])},s=[],n=r("2708"),i={mixins:[n["e"],n["g"]],props:{order:{type:Object,required:!0}}},o=i,c=(r("ff8c"),r("2877")),d=Object(c["a"])(o,a,s,!1,null,"13d79a95",null);e["a"]=d.exports},"555f":function(t,e,r){"use strict";var a=function(){var t=this,e=t._self._c;return e("section",{staticClass:"icecream-container",style:{height:t.height}},[e("div",{staticClass:"icecream-content py-5"},[t._l(3,(function(t){return e("h1",{key:t,staticClass:"icecream"},[e("i",{staticClass:"fas fa-ice-cream"})])})),e("small",{staticClass:"icecream-description"},[t._v(" 準備中 ")])],2)])},s=[],n={props:{height:{type:String,default:"100vh"}}},i=n,o=(r("db9a"),r("2877")),c=Object(o["a"])(i,a,s,!1,null,"2e263baa",null);e["a"]=c.exports},5958:function(t,e,r){},"6ea6":function(t,e,r){},"77d5":function(t,e,r){},"9b2a":function(t,e,r){"use strict";var a=r("2fa3");e["a"]={getNewOrder:function(){return a["b"].get("/order/new")},postNewOrder:function(t){return a["b"].post("/order/new",t)},getOrder:function(t){var e=t.orderId;return a["b"].get("/order/".concat(e))},getEditOrder:function(t){var e=t.orderId;return a["b"].get("/order/".concat(e,"/edit"))},putEditOrder:function(t){var e=t.orderId,r=t.formData;return a["b"].put("/order/".concat(e),r)},putCancelOrder:function(t){var e=t.orderId;return a["b"].put("/order/".concat(e,"/cancel"),{})},getComment:function(t){var e=t.orderId;return a["b"].get("/order/".concat(e,"/comment"))},postComment:function(t){var e=t.orderId,r=t.formData;return a["b"].post("/order/".concat(e,"/comment"),r)}}},ad14:function(t,e,r){},cf2a:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t._self._c;return e("section",[e("UserNavbar"),t.isLoading?e("Loader",{attrs:{height:"100vh"}}):t._e(),e("transition",{attrs:{name:"fade"}},[t.isLoading?t._e():e("header",[e("ImageHeaderBanner",{attrs:{"background-photo":t.banner.image,"banner-height":t.banner.height},scopedSlots:t._u([{key:"header",fn:function(){return[e("h1",{staticClass:"banner-content-title"},[t._v(" 訂單憑證 ")]),e("h3",{staticClass:"banner-content-description"},[t._v(" 訂單與領餐資訊 ")])]},proxy:!0}],null,!1,1931243448)})],1)]),e("transition",{attrs:{name:"slide"}},[t.isLoading?t._e():e("section",{staticClass:"order-wrapper"},[e("div",{staticClass:"container order-container"},[e("div",{staticClass:"row order-content p-3"},[e("MealHorizontalCard",{staticClass:"order-display",attrs:{order:t.order}}),e("OrderDetail",{staticClass:"order-display mt-3",attrs:{order:t.order.orderDetail}}),e("OrderRestaurantDetail",{staticClass:"order-display mt-3",attrs:{restaurant:t.order.restaurant}}),t.order.isEditable?e("div",{staticClass:"btn-container text-center mt-4"},[e("router-link",{staticClass:"btn btn-edit",attrs:{to:{name:"order-edit",params:{order_id:t.$route.params.order_id}}}},[t._v(" 編輯訂單 ")]),e("button",{staticClass:"btn btn-cancel",attrs:{type:"button",disabled:t.isProcessing},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.deleteOrder.apply(null,arguments)}}},[t._v(" 取消訂單 ")])],1):t._e()],1)])])]),e("transition",{attrs:{name:"fade"}},[t.isLoading?t._e():e("Footer")],1)],1)},s=[],n=r("c7eb"),i=r("5530"),o=r("15fd"),c=r("1da1"),d=(r("d9e2"),r("14d9"),r("1dc8")),l=r("fbbd"),u=r("52b6"),p=function(){var t=this,e=t._self._c;return e("section",{staticClass:"detail"},[e("div",{staticClass:"detail-wrapper rounded-sm shadow-sm p-3"},[e("h2",{staticClass:"detail-title mb-4"},[t._v(" 訂購資料 ")]),e("div",{staticClass:"detail-content row"},[e("div",{staticClass:"col-md-6 my-3"},[e("h5",{staticClass:"detail-content-title"},[t._v(" 訂單編號 ")]),e("h2",{staticClass:"detail-content-description"},[t._v(" #"+t._s(t.order.OrderId)+" ")])]),e("div",{staticClass:"col-md-6 my-3"},[e("h5",{staticClass:"detail-content-title"},[t._v(" 訂單數量 ")]),e("h2",{staticClass:"detail-content-description"},[t._v(" "+t._s(t.order.quantity)+" ")])])]),e("div",{staticClass:"detail-content row"},[e("div",{staticClass:"col-md-6 my-3"},[e("h5",{staticClass:"detail-content-title"},[t._v(" 領餐日期 ")]),e("h2",{staticClass:"detail-content-description"},[t._v(" "+t._s(t._f("timeTransform")(t.order.date))+" ")])]),e("div",{staticClass:"col-md-6 my-3"},[e("h5",{staticClass:"detail-content-title"},[t._v(" 領餐時間 ")]),e("h2",{staticClass:"detail-content-description"},[t._v(" "+t._s(t.order.time)+" ")])])])])])},m=[],f=r("2708"),v={mixins:[f["h"]],props:{order:{type:Object,required:!0}}},b=v,h=(r("3884"),r("2877")),C=Object(h["a"])(b,p,m,!1,null,"e4972578",null),_=C.exports,g=(r("b0c0"),function(){var t=this,e=t._self._c;return e("section",{staticClass:"detail"},[e("div",{staticClass:"detail-wrapper rounded-sm shadow-sm px-3 pt-3 pb-0"},[e("h2",{staticClass:"detail-title mb-4"},[t._v(" 餐廳資訊 ")]),e("div",{staticClass:"detail-content row"},[e("div",{staticClass:"col-md-6 my-3"},[e("h5",{staticClass:"detail-content-title"},[t._v(" 餐廳名稱 ")]),e("h2",{staticClass:"detail-content-description"},[t._v(" "+t._s(t.restaurant.name)+" ")])]),e("div",{staticClass:"col-md-6 my-3"},[e("h5",{staticClass:"detail-content-title"},[t._v(" 餐廳電話 ")]),e("h2",{staticClass:"detail-content-description"},[t._v(" "+t._s(t.restaurant.tel)+" ")])])]),e("div",{staticClass:"detail-content row"},[e("div",{staticClass:"col my-3"},[e("h5",{staticClass:"detail-content-title"},[t._v(" 餐廳地址 ")]),e("h2",{staticClass:"detail-content-description"},[t._v(" "+t._s(t.restaurant.address)+" ")])])]),e("div",{staticClass:"row"},[e("GMap",{staticClass:"shadow-sm rounded-sm",attrs:{center:{lat:parseFloat(t.restaurant.lat),lng:parseFloat(t.restaurant.lng)},locations:[t.restaurant],"street-view-control":!1,"map-type-control":!1,"fullscreen-control":!0,"zoom-control":!0,zoom:17}})],1)])])}),O=[],w=r("8787"),y={components:{GMap:w["a"]},props:{restaurant:{type:Object,required:!0}}},x=y,j=(r("2a74"),Object(h["a"])(x,g,O,!1,null,"52c96969",null)),k=j.exports,D=r("fd2d"),I=r("555f"),E=r("9b2a"),L=r("2fa3"),q=r("c1df"),P=r.n(q),H=["Restaurant","OrderItem"],M={components:{UserNavbar:d["a"],ImageHeaderBanner:l["a"],MealHorizontalCard:u["a"],OrderDetail:_,OrderRestaurantDetail:k,Footer:D["a"],Loader:I["a"]},data:function(){return{banner:{image:"https://images.pexels.com/photos/775031/pexels-photo-775031.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260",height:550},order:{restaurant:{name:"",rating:-1,distance:-1,lat:-1,lng:-1},meal:{id:-1,name:"",description:"",image:"",quantity:-1},orderDetail:{time:"",date:""},isEditable:!1},isLoading:!0,isProcessing:!1}},beforeRouteUpdate:function(t,e,r){var a=t.params.order_id;this.fetchOrder(a),r()},created:function(){var t=this.$route.params.order_id;this.fetchOrder(t)},methods:{fetchOrder:function(t){var e=this;return Object(c["a"])(Object(n["a"])().mark((function r(){var a,s,c,d,l,u,p,m,f,v;return Object(n["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,E["a"].getOrder({orderId:t});case 3:if(a=r.sent,s=a.data,c=a.statusText,"OK"===c&&"success"===s.status){r.next=8;break}throw new Error(s.message);case 8:d=s.order,l=d.meals,u=l.Restaurant,p=l.OrderItem,m=Object(o["a"])(l,H),f=d.require_date,v=d.order_status,e.order=Object(i["a"])(Object(i["a"])({},e.order),{},{restaurant:u,meal:m,orderDetail:Object(i["a"])(Object(i["a"])({},p),{},{time:P()(new Date(f)).format("HH:mm"),date:P()(new Date(f)).format("YYYY-MM-DD")}),isEditable:"明日"===v}),e.isLoading=!1,r.next=18;break;case 13:r.prev=13,r.t0=r["catch"](0),e.isLoading=!1,L["a"].fire({type:"error",title:"無法取得訂單資料，請稍後再試"}),e.$router.go(-1);case 18:case"end":return r.stop()}}),r,null,[[0,13]])})))()},deleteOrder:function(){var t=this;return Object(c["a"])(Object(n["a"])().mark((function e(){var r,a,s,i;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.isProcessing=!0,e.next=4,E["a"].putCancelOrder({orderId:t.$route.params.order_id});case 4:if(r=e.sent,a=r.data,s=r.statusText,"OK"===s&&"success"===a.status){e.next=9;break}throw new Error(a.message);case 9:i=t.order.orderDetail.quantity,t.$store.commit("updateBalance",i),t.$router.push({name:"order-tomorrow"}),e.next=18;break;case 14:e.prev=14,e.t0=e["catch"](0),t.isProcessing=!1,L["a"].fire({type:"error",title:"無法取消資料，請稍後再試"});case 18:case"end":return e.stop()}}),e,null,[[0,14]])})))()}}},$=M,R=(r("15df"),Object(h["a"])($,a,s,!1,null,"533d6b92",null));e["default"]=R.exports},d81d:function(t,e,r){"use strict";var a=r("23e7"),s=r("b727").map,n=r("1dde"),i=n("map");a({target:"Array",proto:!0,forced:!i},{map:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})},db9a:function(t,e,r){"use strict";r("ad14")},ff8c:function(t,e,r){"use strict";r("3cec")}}]);
//# sourceMappingURL=chunk-3fc81fc8.1924da78.js.map