(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-059da193"],{1922:function(t,r,e){"use strict";e("3129")},"1af6":function(t,r,e){var n=e("63b6");n(n.S,"Array",{isArray:e("9003")})},"20fd":function(t,r,e){"use strict";var n=e("d9f6"),a=e("aebd");t.exports=function(t,r,e){r in t?n.f(t,r,a(0,e)):t[r]=e}},"2d5a":function(t,r,e){},3129:function(t,r,e){},"549b":function(t,r,e){"use strict";var n=e("d864"),a=e("63b6"),s=e("241e"),i=e("b0dc"),c=e("3702"),o=e("b447"),u=e("20fd"),d=e("7cd6");a(a.S+a.F*!e("4ee1")((function(t){Array.from(t)})),"Array",{from:function(t){var r,e,a,l,p=s(t),f="function"==typeof this?this:Array,h=arguments.length,g=h>1?arguments[1]:void 0,m=void 0!==g,b=0,v=d(p);if(m&&(g=n(g,h>2?arguments[2]:void 0,2)),void 0==v||f==Array&&c(v))for(r=o(p.length),e=new f(r);r>b;b++)u(e,b,m?g(p[b],b):p[b]);else for(l=v.call(p),e=new f;!(a=l.next()).done;b++)u(e,b,m?i(l,g,[a.value,b],!0):a.value);return e.length=b,e}})},"75fc":function(t,r,e){"use strict";e.d(r,"a",(function(){return m}));var n=e("a745"),a=e.n(n),s=e("db2a");function i(t){if(a()(t))return Object(s["a"])(t)}var c=e("67bb"),o=e.n(c),u=e("5d58"),d=e.n(u),l=e("774e"),p=e.n(l);function f(t){if("undefined"!==typeof o.a&&null!=t[d.a]||null!=t["@@iterator"])return p()(t)}var h=e("e630");function g(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(t){return i(t)||f(t)||Object(h["a"])(t)||g()}},"774e":function(t,r,e){t.exports=e("d2d5")},"89ad":function(t,r,e){"use strict";e.r(r);var n=function(){var t=this,r=t._self._c;return r("section",[r("header",[r("UserNavbar"),r("DropdownBanner",{attrs:{"is-loading":t.isLoading,districts:t.districts,"current-district":t.currentDistrict}})],1),r("section",{staticClass:"popular"},[r("div",{staticClass:"container pt-3 pb-0 pb-md-5"},[r("Header",{scopedSlots:t._u([{key:"title",fn:function(){return[t._v("\n          熱門餐廳\n        ")]},proxy:!0},{key:"description",fn:function(){return[t._v("\n          嘗試最受歡迎的餐廳\n        ")]},proxy:!0}])}),r("CustomCarousel",{attrs:{"is-loading":t.isLoading,"popular-restaurants":t.popular_restaurants}})],1)]),r("section",{staticClass:"restaurants"},[r("div",{staticClass:"container pt-3 pb-5"},[r("Header",{scopedSlots:t._u([{key:"title",fn:function(){return[t._v("\n          更多選擇\n        ")]},proxy:!0},{key:"description",fn:function(){return[t._v("\n          探索更多在地餐廳\n        ")]},proxy:!0}])}),r("div",{staticClass:"card-wrapper row px-3"},[t.isLoading?t._e():t._l(t.more_restaurants.restaurants,(function(t){return r("div",{key:t.id,staticClass:"col-12 col-md-6 col-lg-4 p-2"},[r("RestaurantCard",{attrs:{restaurant:t}})],1)})),t.isLoading||t.isFetching?t._l(6,(function(e){return r("div",{key:e,staticClass:"col-12 col-md-6 col-lg-4 p-2"},[r("RestaurantCard",{attrs:{"is-loading":t.isLoading||t.isFetching}})],1)})):t._e()],2),t.isLoading?t._e():r("div",{staticClass:"btn-container"},[t.currentPage!==t.totalPage?r("button",{staticClass:"btn mt-3",attrs:{href:"#"},on:{click:function(r){t.fetchRestaurants(t.currentDistrict,t.currentPage+1),t.isFetching=!0}}},[t._v("\n          瀏覽更多\n        ")]):t._e()])],1)]),r("section",{staticClass:"map bg-white"},[r("div",{staticClass:"container pt-3 pb-5"},[r("Header",{scopedSlots:t._u([{key:"title",fn:function(){return[t._v("\n          "+t._s(t.currentDistrict)+"餐廳\n        ")]},proxy:!0},{key:"description",fn:function(){return[t._v("\n          探索最近的美食地圖\n        ")]},proxy:!0}])}),t.isLoading?r("SkelentonBox",{attrs:{width:"100%",height:"400px"}}):r("GMap",{staticClass:"shadow-sm rounded-sm",attrs:{center:{lat:parseFloat(t.map.center.lat),lng:parseFloat(t.map.center.lng)},locations:t.map.restaurants,"street-view-control":!1,"map-type-control":!1,"fullscreen-control":!0,"zoom-control":!0}})],1)]),r("Footer")],1)},a=[],s=e("75fc"),i=(e("96cf"),e("3b8d")),c=e("1dc8"),o=e("fd2d"),u=function(){var t=this,r=t._self._c;return r("section",{staticClass:"“banner"},[r("div",{staticClass:"banner-container"},[r("div",{staticClass:"banner-img",style:{backgroundImage:"url(".concat(t.districtImage,")")}}),r("div",{staticClass:"banner-overlay"}),r("div",{staticClass:"banner-content"},[r("h1",{staticClass:"banner-content-title"},[t._v("\n        "+t._s(t.currentDistrict)+"\n      ")]),r("div",{staticClass:"dropdown"},[r("button",{staticClass:"btn dropdown-toggle p-0",attrs:{id:"dropdownMenuButton",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",disabled:t.isLoading}},[t._v("\n          切換地區\n        ")]),r("div",{staticClass:"dropdown-menu rounded-sm",attrs:{"aria-labelledby":"dropdownMenuButton"}},t._l(t.districts,(function(e){return r("router-link",{key:e.eng_name,staticClass:"dropdown-item text-center",class:{disabled:e.chinese_name===t.currentDistrict},attrs:{to:{name:"restaurants",query:{dist:e.chinese_name}}}},[t._v("\n            "+t._s(e.chinese_name)+"\n          ")])})),1)])])])])},d=[],l={props:{districts:{type:Array,required:!0},currentDistrict:{type:String,required:!0},isLoading:{type:Boolean,default:!1}},data:function(){return{districtImage:""}},watch:{districts:function(t){this.getDistrictImage()}},created:function(){this.getDistrictImage()},methods:{getDistrictImage:function(){var t=this;0!==this.districts.length?this.districtImage=this.districts.filter((function(r){return r.chinese_name===t.currentDistrict}))[0].image:this.districtImage=""}}},p=l,f=(e("ccf4"),e("2877")),h=Object(f["a"])(p,u,d,!1,null,"ee56da32",null),g=h.exports,m=e("b580"),b=e("c596"),v=e("8787"),_=function(){var t=this,r=t._self._c;return r("div",{staticClass:"header-heading"},[r("h1",{staticClass:"header-heading-title"},[t._t("title")],2),r("p",{staticClass:"header-heading-description"},[t._t("description")],2)])},y=[],w=(e("c53b"),{}),C=Object(f["a"])(w,_,y,!1,null,"44c54a56",null),x=C.exports,k=e("c4c3"),D=e("d1b6"),j=e("2fa3"),A={components:{UserNavbar:c["a"],Footer:o["a"],DropdownBanner:g,CustomCarousel:m["a"],RestaurantCard:b["a"],GMap:v["a"],Header:x,SkelentonBox:D["a"]},data:function(){return{popular_restaurants:[],more_restaurants:{restaurants:[]},map:{},districts:[],currentDistrict:"",currentPage:0,totalPage:null,isLoading:!0,isFetching:!1}},created:function(){var t=this.$route.query.dist;this.currentDistrict=t||"信義區",this.fetchRestaurants(t,this.currentPage+1)},mounted:function(){window.scrollTo(0,0)},beforeRouteUpdate:function(t,r,e){this.currentPage=0,this.more_restaurants.restaurants=[],this.districts=[];var n=t.query.dist;this.currentDistrict=n||"信義區",this.isLoading=!0,this.fetchRestaurants(n,this.currentPage+1),e()},methods:{fetchRestaurants:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(r,e){var n,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k["a"].getRestaurants({dist:r,page:e});case 3:if(n=t.sent,a=n.data,i=n.statusText,"success"===a.status&&"OK"===i){t.next=8;break}throw new Error(a.message);case 8:this.popular_restaurants=a.popular_restaurants||this.popular_restaurants,this.more_restaurants.restaurants=[].concat(Object(s["a"])(this.more_restaurants.restaurants),Object(s["a"])(a.more_restaurants.restaurants)),this.totalPage=a.more_restaurants.pages,this.map=a.map||this.map,this.districts=a.districts||this.districts,this.currentPage+=1,this.isLoading=!1,this.isFetching=!1,t.next=24;break;case 18:t.prev=18,t.t0=t["catch"](0),this.isLoading=!1,this.isFetching=!1,j["a"].fire({type:"error",title:"無法取得餐廳資料，請稍後再試"}),this.$router.push({name:"home"});case 24:case"end":return t.stop()}}),t,this,[[0,18]])})));function r(r,e){return t.apply(this,arguments)}return r}()}},L=A,O=(e("1922"),Object(f["a"])(L,n,a,!1,null,"6edc5c2f",null));r["default"]=O.exports},"918e":function(t,r,e){},a745:function(t,r,e){t.exports=e("f410")},c53b:function(t,r,e){"use strict";e("918e")},ccf4:function(t,r,e){"use strict";e("2d5a")},d2d5:function(t,r,e){e("1654"),e("549b"),t.exports=e("584a").Array.from},db2a:function(t,r,e){"use strict";function n(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}e.d(r,"a",(function(){return n}))},e630:function(t,r,e){"use strict";e.d(r,"a",(function(){return i}));var n=e("774e"),a=e.n(n),s=e("db2a");function i(t,r){if(t){if("string"===typeof t)return Object(s["a"])(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?a()(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Object(s["a"])(t,r):void 0}}},f410:function(t,r,e){e("1af6"),t.exports=e("584a").Array.isArray}}]);
//# sourceMappingURL=chunk-059da193.87821d2a.js.map