(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e27de6ac"],{"4a39":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("section",{staticClass:"profile-container"},[e("UserNavbar"),t.isLoading?e("Loader",{attrs:{height:"100vh"}}):t._e(),e("transition",{attrs:{name:"slide"}},[t.isLoading?t._e():e("section",{staticClass:"container pt-4 pb-4 w-100"},[e("div",{staticClass:"profile-wrapper row profil"},[e("div",{staticClass:"profile-content-left col-12 col-md-3 p-2"},[e("UserProfileCard")],1),e("div",{staticClass:"col-12 col-md-9 p-2"},[e("UserProfileForm",{attrs:{"initial-user":t.user,categories:t.categories,"initial-processing":t.isProcessing},on:{"after-submit":t.handleAfterSubmit}})],1)])])]),e("Footer",{staticClass:"w-100"})],1)},r=[],i=s("c7eb"),c=s("5530"),n=s("1da1"),o=(s("d9e2"),s("fb6a"),s("1dc8")),l=s("fd2d"),u=s("555f"),f=s("c08a"),d=s("5cf3"),p=s("4cce"),b=s("2fa3"),m={components:{UserNavbar:o["a"],UserProfileCard:f["a"],UserProfileForm:d["a"],Footer:l["a"],Loader:u["a"]},data:function(){return{user:{name:"",email:"",role:"",prefer:"",dob:"",image:"",lng:"",lat:"",location:""},categories:[],isLoading:!0,isProcessing:!1}},created:function(){this.fetchUser()},methods:{fetchUser:function(){var t=this;return Object(n["a"])(Object(i["a"])().mark((function e(){var s,a,r;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p["a"].getProfile();case 3:if(s=e.sent,a=s.data,r=s.statusText,"success"===a.status&&"OK"===r){e.next=8;break}throw new Error(a.message);case 8:t.user=Object(c["a"])(Object(c["a"])(Object(c["a"])({},t.user),a.user),{},{dob:a.user.dob.slice(0,10),image:a.user.avatar}),t.categories=a.categories||t.categories,t.isLoading=!1,e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](0),t.isLoading=!1,b["a"].fire({type:"error",title:"無法取得資料，請稍後再試"});case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))()},handleAfterSubmit:function(t){var e=this;return Object(n["a"])(Object(i["a"])().mark((function s(){var a,r,c,n,o;return Object(i["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a=t.formData,r=t.storedUserData,s.prev=1,e.isProcessing=!0,s.next=5,p["a"].putProfile({formData:a});case 5:if(c=s.sent,n=c.data,o=c.statusText,"success"===n.status&&"OK"===o){s.next=10;break}throw new Error(n.message);case 10:e.$store.commit("setCurrentUser",r),e.isProcessing=!1,b["a"].fire({type:"success",title:"成功更新資料"}),s.next=19;break;case 15:s.prev=15,s.t0=s["catch"](1),e.isProcessing=!1,b["a"].fire({type:"error",title:"無法更新資料，請稍後再試"});case 19:case"end":return s.stop()}}),s,null,[[1,15]])})))()}}},v=m,h=(s("e268"),s("2877")),g=Object(h["a"])(v,a,r,!1,null,"3f3c8c04",null);e["default"]=g.exports},"92de":function(t,e,s){},c08a:function(t,e,s){"use strict";s("b0c0");var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"profile-card rounded-sm shadow-sm"},[e("div",{staticClass:"profile-card-top"},[e("SkelentonBox",{staticClass:"rounded-circle skelenton-box",attrs:{width:"120px",height:"120px"}}),e("img",{attrs:{src:t._f("placeholderAvatar")(t.currentUser.avatar),alt:"user avatar"}}),e("h5",{staticClass:"mt-3 profile-card-top-name"},[t._v(" "+t._s(t.currentUser.name)+" ")]),e("small",{staticClass:"profile-top-balance"},[t._v(" "+t._s(t._f("getSubscriptionStatus")(t.currentUser.subscriptionStatus))+" | 剩餘 "+t._s(t.currentUser.subscriptionBalance)+" 餐 ")])],1),e("hr",{staticClass:"m-0"}),e("div",{staticClass:"profile-card-bottom"},[e("ul",{staticClass:"nav flex-column"},[e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:{name:"user-profile"}}},[e("span",{staticClass:"icon"},[e("i",{staticClass:"fas fa-cog mr-1"})]),t._v(" 帳戶設定 ")])],1),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:{name:"user-order"},"active-class":"active"}},[e("span",{staticClass:"icon"},[e("i",{staticClass:"fas fa-clipboard-list mr-1"})]),t._v(" 訂單管理 ")])],1)])])])},r=[],i=s("5530"),c=s("d1b6"),n=s("2708"),o=s("2f62"),l={filters:{getSubscriptionStatus:function(t){return t?"訂閱中":"未訂閱"}},components:{SkelentonBox:c["a"]},mixins:[n["f"]],computed:Object(i["a"])({},Object(o["c"])(["currentUser"]))},u=l,f=(s("d202"),s("2877")),d=Object(f["a"])(u,a,r,!1,null,"a9ba2c36",null);e["a"]=d.exports},d202:function(t,e,s){"use strict";s("92de")},dcdd:function(t,e,s){},e268:function(t,e,s){"use strict";s("dcdd")}}]);
//# sourceMappingURL=chunk-e27de6ac.29faa7f9.js.map