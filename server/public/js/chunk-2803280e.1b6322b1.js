(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2803280e"],{"0e92":function(t,e,r){},"15df":function(t,e,r){"use strict";r("6e8a")},"2a74":function(t,e,r){"use strict";r("55df")},"32a6":function(t,e,r){var a=r("241e"),n=r("c3a1");r("ce7e")("keys",(function(){return function(t){return n(a(t))}}))},3884:function(t,e,r){"use strict";r("b867")},"52b6":function(t,e,r){"use strict";r("7f7f");var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card d-flex flex-row rounded-sm w-100 shadow-sm"},[e("div",{staticClass:"card-left"},[e("img",{staticClass:"card-img rounded-0 rounded-sm",attrs:{src:t.order.meal.image,alt:"photo of the restaurant"}})]),e("div",{staticClass:"card-right"},[e("div",{staticClass:"card-body px-3 py-0"},[e("h5",{staticClass:"card-title m-0"},[t._v("\n        "+t._s(t.order.meal.name)+"\n      ")]),t.order.restaurant.rating?e("p",{staticClass:"card-text mt-1"},[e("span",{staticClass:"rating"},[t._v("★ "+t._s(t._f("padEnd")(t.order.restaurant.rating)))]),e("span",{staticClass:"mx-1"},[t._v("|")]),t._v(t._s(t.order.restaurant.name)+"\n      ")]):t._e(),e("p",{staticClass:"card-text d-none d-md-block"},[t._v("\n        "+t._s(t._f("textTruncate")(t.order.meal.description))+"\n      ")])])])])},n=[],s=r("2708"),i={mixins:[s["e"],s["g"]],props:{order:{type:Object,required:!0}}},o=i,c=(r("ff8c"),r("2877")),d=Object(c["a"])(o,a,n,!1,null,"13d79a95",null);e["a"]=d.exports},"555f":function(t,e,r){"use strict";var a=function(){var t=this,e=t._self._c;return e("section",{staticClass:"icecream-container",style:{height:t.height}},[e("div",{staticClass:"icecream-content py-5"},[t._l(3,(function(t){return e("h1",{key:t,staticClass:"icecream"},[e("i",{staticClass:"fas fa-ice-cream"})])})),e("small",{staticClass:"icecream-description"},[t._v("\n      準備中\n    ")])],2)])},n=[],s={props:{height:{type:String,default:"100vh"}}},i=s,o=(r("db9a"),r("2877")),c=Object(o["a"])(i,a,n,!1,null,"2e263baa",null);e["a"]=c.exports},"55df":function(t,e,r){},"6e8a":function(t,e,r){},"8aae":function(t,e,r){r("32a6"),t.exports=r("584a").Object.keys},"9b2a":function(t,e,r){"use strict";var a=r("2fa3");e["a"]={getNewOrder:function(){return a["b"].get("/order/new")},postNewOrder:function(t){return a["b"].post("/order/new",t)},getOrder:function(t){var e=t.orderId;return a["b"].get("/order/".concat(e))},getEditOrder:function(t){var e=t.orderId;return a["b"].get("/order/".concat(e,"/edit"))},putEditOrder:function(t){var e=t.orderId,r=t.formData;return a["b"].put("/order/".concat(e),r)},putCancelOrder:function(t){var e=t.orderId;return a["b"].put("/order/".concat(e,"/cancel"),{})},getComment:function(t){var e=t.orderId;return a["b"].get("/order/".concat(e,"/comment"))},postComment:function(t){var e=t.orderId,r=t.formData;return a["b"].post("/order/".concat(e,"/comment"),r)}}},"9d9f":function(t,e,r){},a4bb:function(t,e,r){t.exports=r("8aae")},a8db:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var a=r("e265"),n=r.n(a),s=r("a4bb"),i=r.n(s);function o(t,e){if(null==t)return{};var r,a,n={},s=i()(t);for(a=0;a<s.length;a++)r=s[a],e.indexOf(r)>=0||(n[r]=t[r]);return n}function c(t,e){if(null==t)return{};var r,a,s=o(t,e);if(n.a){var i=n()(t);for(a=0;a<i.length;a++)r=i[a],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(s[r]=t[r])}return s}},b867:function(t,e,r){},ce7e:function(t,e,r){var a=r("63b6"),n=r("584a"),s=r("294c");t.exports=function(t,e){var r=(n.Object||{})[t]||Object[t],i={};i[t]=e(r),a(a.S+a.F*s((function(){r(1)})),"Object",i)}},cf2a:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t._self._c;return e("section",[e("UserNavbar"),t.isLoading?e("Loader",{attrs:{height:"100vh"}}):t._e(),e("transition",{attrs:{name:"fade"}},[t.isLoading?t._e():e("header",[e("ImageHeaderBanner",{attrs:{"background-photo":t.banner.image,"banner-height":t.banner.height},scopedSlots:t._u([{key:"header",fn:function(){return[e("h1",{staticClass:"banner-content-title"},[t._v("\n            訂單憑證\n          ")]),e("h3",{staticClass:"banner-content-description"},[t._v("\n            訂單與領餐資訊\n          ")])]},proxy:!0}],null,!1,3110607224)})],1)]),e("transition",{attrs:{name:"slide"}},[t.isLoading?t._e():e("section",{staticClass:"order-wrapper"},[e("div",{staticClass:"container order-container"},[e("div",{staticClass:"row order-content p-3"},[e("MealHorizontalCard",{staticClass:"order-display",attrs:{order:t.order}}),e("OrderDetail",{staticClass:"order-display mt-3",attrs:{order:t.order.orderDetail}}),e("OrderRestaurantDetail",{staticClass:"order-display mt-3",attrs:{restaurant:t.order.restaurant}}),t.order.isEditable?e("div",{staticClass:"btn-container text-center mt-4"},[e("router-link",{staticClass:"btn btn-edit",attrs:{to:{name:"order-edit",params:{order_id:t.$route.params.order_id}}}},[t._v("\n              編輯訂單\n            ")]),e("button",{staticClass:"btn btn-cancel",attrs:{type:"button",disabled:t.isProcessing},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.deleteOrder.apply(null,arguments)}}},[t._v("\n              取消訂單\n            ")])],1):t._e()],1)])])]),e("transition",{attrs:{name:"fade"}},[t.isLoading?t._e():e("Footer")],1)],1)},n=[],s=(r("8e6e"),r("ac6a"),r("456d"),r("bd86")),i=r("a8db"),o=(r("96cf"),r("3b8d")),c=r("1dc8"),d=r("fbbd"),l=r("52b6"),u=function(){var t=this,e=t._self._c;return e("section",{staticClass:"detail"},[e("div",{staticClass:"detail-wrapper rounded-sm shadow-sm p-3"},[e("h2",{staticClass:"detail-title mb-4"},[t._v("\n      訂購資料\n    ")]),e("div",{staticClass:"detail-content row"},[e("div",{staticClass:"col-md-6 my-3"},[e("h5",{staticClass:"detail-content-title"},[t._v("\n          訂單編號\n        ")]),e("h2",{staticClass:"detail-content-description"},[t._v("\n          #"+t._s(t.order.OrderId)+"\n        ")])]),e("div",{staticClass:"col-md-6 my-3"},[e("h5",{staticClass:"detail-content-title"},[t._v("\n          訂單數量\n        ")]),e("h2",{staticClass:"detail-content-description"},[t._v("\n          "+t._s(t.order.quantity)+"\n        ")])])]),e("div",{staticClass:"detail-content row"},[e("div",{staticClass:"col-md-6 my-3"},[e("h5",{staticClass:"detail-content-title"},[t._v("\n          領餐日期\n        ")]),e("h2",{staticClass:"detail-content-description"},[t._v("\n          "+t._s(t._f("timeTransform")(t.order.date))+"\n        ")])]),e("div",{staticClass:"col-md-6 my-3"},[e("h5",{staticClass:"detail-content-title"},[t._v("\n          領餐時間\n        ")]),e("h2",{staticClass:"detail-content-description"},[t._v("\n          "+t._s(t.order.time)+"\n        ")])])])])])},p=[],f=r("2708"),m={mixins:[f["h"]],props:{order:{type:Object,required:!0}}},b=m,h=(r("3884"),r("2877")),v=Object(h["a"])(b,u,p,!1,null,"e4972578",null),g=v.exports,C=(r("7f7f"),function(){var t=this,e=t._self._c;return e("section",{staticClass:"detail"},[e("div",{staticClass:"detail-wrapper rounded-sm shadow-sm px-3 pt-3 pb-0"},[e("h2",{staticClass:"detail-title mb-4"},[t._v("\n      餐廳資訊\n    ")]),e("div",{staticClass:"detail-content row"},[e("div",{staticClass:"col-md-6 my-3"},[e("h5",{staticClass:"detail-content-title"},[t._v("\n          餐廳名稱\n        ")]),e("h2",{staticClass:"detail-content-description"},[t._v("\n          "+t._s(t.restaurant.name)+"\n        ")])]),e("div",{staticClass:"col-md-6 my-3"},[e("h5",{staticClass:"detail-content-title"},[t._v("\n          餐廳電話\n        ")]),e("h2",{staticClass:"detail-content-description"},[t._v("\n          "+t._s(t.restaurant.tel)+"\n        ")])])]),e("div",{staticClass:"detail-content row"},[e("div",{staticClass:"col my-3"},[e("h5",{staticClass:"detail-content-title"},[t._v("\n          餐廳地址\n        ")]),e("h2",{staticClass:"detail-content-description"},[t._v("\n          "+t._s(t.restaurant.address)+"\n        ")])])]),e("div",{staticClass:"row"},[e("GMap",{staticClass:"shadow-sm rounded-sm",attrs:{center:{lat:parseFloat(t.restaurant.lat),lng:parseFloat(t.restaurant.lng)},locations:[t.restaurant],"street-view-control":!1,"map-type-control":!1,"fullscreen-control":!0,"zoom-control":!0,zoom:17}})],1)])])}),_=[],O=r("8787"),y={components:{GMap:O["a"]},props:{restaurant:{type:Object,required:!0}}},w=y,x=(r("2a74"),Object(h["a"])(w,C,_,!1,null,"52c96969",null)),j=x.exports,D=r("fd2d"),k=r("555f"),I=r("9b2a"),P=r("2fa3"),E=r("c1df"),L=r.n(E),R=["Restaurant","OrderItem"];function q(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function H(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?q(Object(r),!0).forEach((function(e){Object(s["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var M={components:{UserNavbar:c["a"],ImageHeaderBanner:d["a"],MealHorizontalCard:l["a"],OrderDetail:g,OrderRestaurantDetail:j,Footer:D["a"],Loader:k["a"]},data:function(){return{banner:{image:"https://images.pexels.com/photos/775031/pexels-photo-775031.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260",height:550},order:{restaurant:{name:"",rating:-1,distance:-1,lat:-1,lng:-1},meal:{id:-1,name:"",description:"",image:"",quantity:-1},orderDetail:{time:"",date:""},isEditable:!1},isLoading:!0,isProcessing:!1}},beforeRouteUpdate:function(t,e,r){var a=t.params.order_id;this.fetchOrder(a),r()},created:function(){var t=this.$route.params.order_id;this.fetchOrder(t)},methods:{fetchOrder:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var r,a,n,s,o,c,d,l,u,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,I["a"].getOrder({orderId:e});case 3:if(r=t.sent,a=r.data,n=r.statusText,"OK"===n&&"success"===a.status){t.next=8;break}throw new Error(a.message);case 8:s=a.order,o=s.meals,c=o.Restaurant,d=o.OrderItem,l=Object(i["a"])(o,R),u=s.require_date,p=s.order_status,this.order=H(H({},this.order),{},{restaurant:c,meal:l,orderDetail:H(H({},d),{},{time:L()(new Date(u)).format("HH:mm"),date:L()(new Date(u)).format("YYYY-MM-DD")}),isEditable:"明日"===p}),this.isLoading=!1,t.next=18;break;case 13:t.prev=13,t.t0=t["catch"](0),this.isLoading=!1,P["a"].fire({type:"error",title:"無法取得訂單資料，請稍後再試"}),this.$router.go(-1);case 18:case"end":return t.stop()}}),t,this,[[0,13]])})));function e(e){return t.apply(this,arguments)}return e}(),deleteOrder:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.isProcessing=!0,t.next=4,I["a"].putCancelOrder({orderId:this.$route.params.order_id});case 4:if(e=t.sent,r=e.data,a=e.statusText,"OK"===a&&"success"===r.status){t.next=9;break}throw new Error(r.message);case 9:n=this.order.orderDetail.quantity,this.$store.commit("updateBalance",n),this.$router.push({name:"order-tomorrow"}),t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](0),this.isProcessing=!1,P["a"].fire({type:"error",title:"無法取消資料，請稍後再試"});case 18:case"end":return t.stop()}}),t,this,[[0,14]])})));function e(){return t.apply(this,arguments)}return e}()}},S=M,$=(r("15df"),Object(h["a"])(S,a,n,!1,null,"533d6b92",null));e["default"]=$.exports},db9a:function(t,e,r){"use strict";r("9d9f")},e265:function(t,e,r){t.exports=r("ed33")},ed33:function(t,e,r){r("014b"),t.exports=r("584a").Object.getOwnPropertySymbols},ff8c:function(t,e,r){"use strict";r("0e92")}}]);
//# sourceMappingURL=chunk-2803280e.1b6322b1.js.map