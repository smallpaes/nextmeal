(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-affbe71a"],{4747:function(t,a,e){"use strict";e("b1fa")},6945:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t._self._c;return a("section",{staticClass:"wrapper d-flex vh-100"},[a("AdminSideNavBar",{attrs:{"nav-is-open":t.navIsOpen}}),a("section",{staticClass:"restaurant flex-fill"},[a("NavbarToggler",{attrs:{"nav-is-open":t.navIsOpen},on:{"toggle-navbar":function(a){t.navIsOpen=!t.navIsOpen}}}),a("h1",{staticClass:"restaurant-title"},[t._v("\n      編輯餐廳\n    ")]),a("hr",{staticClass:"restaurant-divider"}),t.isLoading?a("Loader",{attrs:{height:"300px"}}):t._e(),a("transition",{attrs:{name:"slide"}},[t.isLoading?t._e():a("RestaurantInfoForm",{staticClass:"restaurant-form",attrs:{"initial-restaurant":t.restaurant,categories:t.categories,"initial-processing":t.isProcessing},on:{"after-submit":t.updateRestaurant,"after-delete":t.deleteRestaurant}})],1)],1)],1)},r=[],n=(e("8e6e"),e("ac6a"),e("456d"),e("bd86")),i=e("a8db"),c=(e("96cf"),e("3b8d")),o=e("e9e5"),u=e("0f14d"),l=e("5073"),d=e("555f"),p=e("be6c"),f=e("2fa3"),v=["opening_hour","closing_hour"];function h(t,a){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter((function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),e.push.apply(e,s)}return e}function g(t){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?h(Object(e),!0).forEach((function(a){Object(n["a"])(t,a,e[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):h(Object(e)).forEach((function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(e,a))}))}return t}var m={components:{AdminSideNavBar:o["a"],NavbarToggler:u["a"],RestaurantInfoForm:l["a"],Loader:d["a"]},data:function(){return{restaurant:{},categories:[],isLoading:!0,isProcessing:!1,navIsOpen:!1}},created:function(){var t=this.$route.params.restaurant_id;this.fetchRestaurantData(t)},beforeRouteUpdate:function(t,a,e){var s=t.params.restaurant_id;this.fetchRestaurantData(s),e()},methods:{fetchRestaurantData:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(a){var e,s,r,n,c,o,u,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p["a"].restaurants.getRestaurant({restaurantId:a});case 3:if(e=t.sent,s=e.data,r=e.statusText,"success"===s.status&&"OK"===r){t.next=8;break}throw new Error(s.message);case 8:n=s.restaurant,c=n.opening_hour,o=n.closing_hour,u=Object(i["a"])(n,v),l=s.categories,this.restaurant=g(g({},this.restaurant),{},{openingHour:c,closingHour:o},u),this.categories=l,this.hasRestaurantData=!0,this.isLoading=!1,t.next=20;break;case 15:t.prev=15,t.t0=t["catch"](0),this.isLoading=!1,f["a"].fire({type:"error",title:"無法取得資料，請稍後再試"}),this.$router.go(-1);case 20:case"end":return t.stop()}}),t,this,[[0,15]])})));function a(a){return t.apply(this,arguments)}return a}(),updateRestaurant:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(a){var e,s,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.isProcessing=!0,e=this.$route.params.restaurant_id,t.next=5,p["a"].restaurants.putRestaurant({restaurantId:e,formData:a});case 5:if(s=t.sent,r=s.data,n=s.statusText,"success"===r.status&&"OK"===n){t.next=10;break}throw new Error(r.message);case 10:this.$router.push("/admin"),t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](0),this.isProcessing=!1,f["a"].fire({type:"error",title:"無法更新資料，請稍後再試"});case 17:case"end":return t.stop()}}),t,this,[[0,13]])})));function a(a){return t.apply(this,arguments)}return a}(),deleteRestaurant:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var a,e,s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=this.$route.params.restaurant_id,t.prev=1,this.isProcessing=!0,t.next=5,p["a"].restaurants.deleteRestaurant({restaurantId:a});case 5:if(e=t.sent,s=e.data,r=e.statusText,"success"===s.status&&"OK"===r){t.next=10;break}throw new Error(s.message);case 10:this.$router.push("/admin"),t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](1),this.isProcessing=!1,f["a"].fire({type:"error",title:"無法刪除資料，請稍後再試"});case 17:case"end":return t.stop()}}),t,this,[[1,13]])})));function a(){return t.apply(this,arguments)}return a}()}},b=m,O=(e("4747"),e("2877")),C=Object(O["a"])(b,s,r,!1,null,"60b36126",null);a["default"]=C.exports},"6e4c":function(t,a,e){},b1fa:function(t,a,e){},be6c:function(t,a,e){"use strict";e("6b54"),e("7f7f");var s=e("2fa3");a["a"]={restaurants:{getRestaurants:function(t){var a=t.name,e=t.dist,r=t.page,n=new URLSearchParams({name:a,dist:e,page:r});return s["b"].get("/admin/restaurants?".concat(n.toString()))},getRestaurant:function(t){var a=t.restaurantId;return s["b"].get("/admin/restaurants/".concat(a))},putRestaurant:function(t){var a=t.restaurantId,e=t.formData;return s["b"].put("/admin/restaurants/".concat(a),e)},deleteRestaurant:function(t){var a=t.restaurantId;return s["b"].delete("/admin/restaurants/".concat(a))}},users:{getUser:function(t){var a=t.userId;return s["b"].get("/admin/users/".concat(a))},getUsers:function(t){var a=t.subscriptionStatus,e=t.name,r=t.page,n=new URLSearchParams({sub_status:a,name:e,page:r});return s["b"].get("/admin/users?".concat(n.toString()))},deleteUser:function(t){var a=t.userId;return s["b"].delete("/admin/users/".concat(a))},putUser:function(t){var a=t.userId,e=t.formData;return s["b"].put("/admin/users/".concat(a),e)}},orders:{getOrders:function(t){var a=t.id,e=t.date,r=t.status,n=t.page,i=new URLSearchParams({page:n,order_id:a,date:e,order_status:r});return s["b"].get("/admin/orders?".concat(i.toString()))},putOrder:function(t){var a=t.orderId;return s["b"].put("/admin/orders/".concat(a),{})}},dashboard:{getDashboard:function(){return s["b"].get("/admin/dashboard")}}}},e9e5:function(t,a,e){"use strict";var s=function(){var t=this,a=t._self._c;return a("nav",{staticClass:"sidenav shadow",class:{opened:t.navIsOpen}},[a("div",{staticClass:"sidenav-brand-container text-center py-5"},[a("router-link",{staticClass:"sidenav-brand",attrs:{to:{name:"home"}}},[t._v("\n      NextMeal\n    ")])],1),a("ul",{staticClass:"sidenav-nav px-0 text-center"},[a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:{name:"admin-restaurants"},"active-class":"active"}},[a("span",{staticClass:"icon"},[a("i",{staticClass:"fas fa-store"})]),a("span",{staticClass:"nav-link-description"},[t._v("餐廳")])])],1),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:{name:"admin-users"},"active-class":"active"}},[a("span",{staticClass:"icon"},[a("i",{staticClass:"fas fa-user"})]),a("span",{staticClass:"nav-link-description"},[t._v("用戶")])])],1),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:{name:"admin-orders"},"active-class":"active"}},[a("span",{staticClass:"icon"},[a("i",{staticClass:"fas fa-clipboard-list"})]),a("span",{staticClass:"nav-link-description"},[t._v("訂單")])])],1),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:{name:"admin-dashboard"},"active-class":"active"}},[a("span",{staticClass:"icon"},[a("i",{staticClass:"fas fa-chart-line"})]),a("span",{staticClass:"nav-link-description"},[t._v("分析")])])],1),a("li",{staticClass:"nav-divider"}),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{href:"#",role:"button"},on:{click:t.logout}},[t._m(0),a("span",{staticClass:"nav-link-description"},[t._v("登出")])])])])])},r=[function(){var t=this,a=t._self._c;return a("span",{staticClass:"icon"},[a("i",{staticClass:"fas fa-sign-out-alt"})])}],n={props:{navIsOpen:{type:Boolean,required:!0}},methods:{logout:function(){this.$store.commit("revokeAuthentication"),this.$router.push("/")}}},i=n,c=(e("ed73"),e("2877")),o=Object(c["a"])(i,s,r,!1,null,"d34dbf0e",null);a["a"]=o.exports},ed73:function(t,a,e){"use strict";e("6e4c")}}]);
//# sourceMappingURL=chunk-affbe71a.9bb4a6a0.js.map