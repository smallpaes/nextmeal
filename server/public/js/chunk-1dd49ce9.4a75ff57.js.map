{"version":3,"sources":["webpack:///./src/components/Card/MealVerticalCard.vue","webpack:///src/components/Card/MealVerticalCard.vue","webpack:///./src/components/Card/MealVerticalCard.vue?0a74","webpack:///./src/components/Card/MealVerticalCard.vue?4675","webpack:///./src/components/Card/MealVerticalCard.vue?a2a6","webpack:///./src/components/Card/NewOrderCard.vue?3093","webpack:///./src/views/OrderNew.vue","webpack:///src/views/OrderNew.vue","webpack:///./src/views/OrderNew.vue?a27f","webpack:///./src/views/OrderNew.vue?7772","webpack:///./src/views/OrderNew.vue?4297","webpack:///./node_modules/core-js/modules/es.array.map.js","webpack:///./src/components/Card/NewOrderCard.vue","webpack:///./src/components/Card/NewOrderCard.vue?cdff"],"names":["render","_vm","this","_c","_self","staticClass","attrs","order","meal","image","_v","_s","name","_f","restaurant","rating","_t","description","staticRenderFns","mixins","padEndFilter","textTruncateFilter","props","type","Object","required","component","isLoading","_e","banner","height","scopedSlots","_u","key","fn","isChoosingMeal","proxy","_l","index","meals","on","$event","stopPropagation","preventDefault","handleOrder","distance","style","backgroundImage","concat","chosenMeal","quantity","timeSlots","isProcessing","currentUser","handleAfterSubmit","components","UserNavbar","ImageHeaderBanner","MealVerticalCard","NewOrderCard","MealHorizontalCard","OrderForm","Footer","Loader","data","computed","_objectSpread","mapState","created","fetchMeals","methods","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$orderAPI$getNe","statusText","wrap","_context","prev","next","orderAPI","getNewOrder","sent","status","Error","message","restaurants","map","mealData","Meals","time_slots","_objectWithoutProperties","_excluded","t0","Toast","fire","title","$router","push","stop","mealItem","_this2","_callee2","_context2","formData","_this3","_callee3","form","_yield$orderAPI$postN","_context3","meal_id","id","postNewOrder","$store","commit","params","order_id","$","$map","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","target","proto","forced","callbackfn","arguments","length","undefined","script"],"mappings":"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","file":"js/chunk-1dd49ce9.4a75ff57.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"card shadow\",attrs:{\"href\":\"#\"}},[_c('div',{staticClass:\"card-img-top-container\"},[_c('img',{staticClass:\"card-img-top\",attrs:{\"src\":_vm.order.meal.image,\"alt\":\"photo of the restaurant\"}})]),_c('div',{staticClass:\"card-body\"},[_c('h5',{staticClass:\"card-title m-0\"},[_vm._v(\" \"+_vm._s(_vm.order.meal.name)+\" \")]),_c('p',{staticClass:\"card-text mt-1\"},[_c('span',{staticClass:\"rating\"},[_vm._v(\"★ \"+_vm._s(_vm._f(\"padEnd\")(_vm.order.restaurant.rating)))]),_c('span',{staticClass:\"mx-1\"},[_vm._v(\"|\")]),_vm._v(_vm._s(_vm._f(\"textTruncate\")(_vm.order.restaurant.name,15))+\" \"),_vm._t(\"distance\")],2),_vm._t(\"indicator\"),_c('p',{staticClass:\"card-text\"},[_vm._v(\" \"+_vm._s(_vm._f(\"textTruncate\")(_vm.order.meal.description))+\" \")])],2),_c('div',{staticClass:\"card-footer text-right\"},[_vm._t(\"footer\")],2)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div\n    class=\"card shadow\"\n    href=\"#\"\n  >\n    <div class=\"card-img-top-container\">\n      <img\n        :src=\"order.meal.image\"\n        alt=\"photo of the restaurant\"\n        class=\"card-img-top\"\n      >\n    </div>\n    <div class=\"card-body\">\n      <h5 class=\"card-title m-0\">\n        {{ order.meal.name }}\n      </h5>\n      <p class=\"card-text mt-1\">\n        <span class=\"rating\">&#9733; {{ order.restaurant.rating | padEnd }}</span>\n        <span class=\"mx-1\">|</span>{{ order.restaurant.name | textTruncate(15) }}\n        <slot name=\"distance\" />\n      </p>\n      <slot name=\"indicator\" />\n      <p class=\"card-text\">\n        {{ order.meal.description | textTruncate }}\n      </p>\n    </div>\n    <div class=\"card-footer text-right\">\n      <slot name=\"footer\" />\n    </div>\n  </div>\n</template>\n\n<script>\nimport { padEndFilter, textTruncateFilter } from '../../utils/mixins'\n\nexport default {\n  mixins: [padEndFilter, textTruncateFilter],\n  props: {\n    order: {\n      type: Object,\n      required: true\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.card {\n  border: none;\n  transition: opacity .2s linear;\n\n  &:hover { opacity: .9; }\n\n  &-img-top-container {\n    width: 100%;\n    height: 350px;\n    background-image: url('~@/assets/placeholder-image/logo/1260x750.png');\n    background-repeat: no-repeat;\n    background-position: center;\n    background-size: cover;\n\n    @include response(sm) { height: 300px; }\n    @include response(md) { height: 340px; }\n    @include response(lg) { height: 380px; }\n  }\n\n  &-img-top {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n  }\n\n  &-body {\n    position: relative;\n    min-height: 145px;\n    padding: .8rem;\n\n    @include response(md) { height: 185px; }\n    @include response(lg) { height: 167px; }\n  }\n\n  &-indicator {\n    position: absolute;\n    top: 1rem;\n    right: 1.3rem;\n    display: inline-block;\n    width: 36px;\n    font-size: size(md);\n    color: color(tertiary);\n    text-align: center;\n    border: 1px dotted color(tertiary);\n    border-radius: 50%;\n  }\n\n  &-title {\n    font-size: size(sm);\n    color: color(secondary);\n  }\n\n  &-text {\n    font-size: size(xs);\n    color: lighten(color(secondary), 10%);\n\n    .rating { color: color(primary); }\n  }\n\n  &-footer {\n    padding: .8rem;\n    background-color: color(quaternary);\n    border-top-color: lighten(color(secondary), 55%);\n  }\n}\n\n.btn {\n  @include solidButton(80, .3, primary);\n  padding: 0;\n  font-size: size(xs);\n  line-height: 1.8rem;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MealVerticalCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MealVerticalCard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MealVerticalCard.vue?vue&type=template&id=5f5d27b6&scoped=true&\"\nimport script from \"./MealVerticalCard.vue?vue&type=script&lang=js&\"\nexport * from \"./MealVerticalCard.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MealVerticalCard.vue?vue&type=style&index=0&id=5f5d27b6&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5f5d27b6\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MealVerticalCard.vue?vue&type=style&index=0&id=5f5d27b6&prod&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewOrderCard.vue?vue&type=style&index=0&id=3b73e856&prod&lang=scss&scoped=true&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('section',[_c('UserNavbar'),(_vm.isLoading)?_c('Loader',{attrs:{\"height\":'100vh'}}):_vm._e(),_c('transition',{attrs:{\"name\":\"fade\"}},[(!_vm.isLoading)?_c('header',[_c('ImageHeaderBanner',{attrs:{\"background-photo\":_vm.banner.image,\"banner-height\":_vm.banner.height},scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_c('h1',{staticClass:\"banner-content-title\"},[_vm._v(\" 訂購餐點 \")]),(_vm.isChoosingMeal)?_c('h3',{staticClass:\"banner-content-description\"},[_vm._v(\" 餐點二選一 \")]):_c('h3',{staticClass:\"banner-content-description\"},[_vm._v(\" 選擇數量與領餐時間 \")])]},proxy:true}],null,false,3451706756)})],1):_vm._e()]),_c('transition',{attrs:{\"name\":\"slide\",\"mode\":\"out-in\"}},[(_vm.isChoosingMeal && !_vm.isLoading)?_c('section',{key:\"meals\",staticClass:\"meal-wrapper\"},[_c('div',{staticClass:\"container meal-container\"},[_c('div',{staticClass:\"row meal-content align-items-stretch\"},_vm._l((2),function(index){return _c('div',{key:index,staticClass:\"col-12 col-md-6 col-lg-5 mb-4 meal-card\"},[(_vm.meals[index - 1])?_c('MealVerticalCard',{attrs:{\"order\":_vm.meals[index - 1]},scopedSlots:_vm._u([{key:\"footer\",fn:function(){return [_c('button',{staticClass:\"btn\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.handleOrder(_vm.meals[index - 1])}}},[_vm._v(\" 訂購餐點 \")])]},proxy:true},{key:\"distance\",fn:function(){return [_vm._v(\" (\"+_vm._s(_vm.meals[index - 1].restaurant.distance)+\"公尺) \")]},proxy:true}],null,true)}):_c('NewOrderCard',{style:({backgroundImage: `url(${_vm.image})`}),scopedSlots:_vm._u([{key:\"content\",fn:function(){return [_c('h5',{staticClass:\"card-title\"},[_c('span',{staticClass:\"card-indicator\"},[_vm._v(\"附近無其他美食\")])]),_c('router-link',{staticClass:\"btn\",attrs:{\"to\":{name: 'user-profile'}}},[_vm._v(\" 改地點 \")])]},proxy:true}],null,true)})],1)}),0)])]):_vm._e(),(!_vm.isChoosingMeal)?_c('section',{key:\"form\",staticClass:\"order-wrapper\"},[_c('div',{staticClass:\"container order-container\"},[_c('div',{staticClass:\"row order-content p-3\"},[_c('MealHorizontalCard',{staticClass:\"order-display\",attrs:{\"order\":_vm.chosenMeal}}),_c('OrderForm',{staticClass:\"order-display mt-3\",attrs:{\"order-info\":{quantity: _vm.chosenMeal.meal.quantity, timeSlots: _vm.chosenMeal.timeSlots},\"initial-processing\":_vm.isProcessing,\"current-user\":_vm.currentUser},on:{\"change-order\":function($event){_vm.isChoosingMeal = true},\"after-submit\":_vm.handleAfterSubmit}})],1)])]):_vm._e()]),_c('transition',{attrs:{\"name\":\"fade\"}},[(!_vm.isLoading)?_c('Footer'):_vm._e()],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <section>\n    <!--Navbar-->\n    <UserNavbar />\n    <!--Loader-->\n    <Loader\n      v-if=\"isLoading\"\n      :height=\"'100vh'\"\n    />\n    <!--Header-->\n    <transition name=\"fade\">\n      <header v-if=\"!isLoading\">\n        <ImageHeaderBanner\n          :background-photo=\"banner.image\"\n          :banner-height=\"banner.height\"\n        >\n          <template v-slot:header>\n            <h1 class=\"banner-content-title\">\n              訂購餐點\n            </h1>\n            <h3\n              v-if=\"isChoosingMeal\"\n              class=\"banner-content-description\"\n            >\n              餐點二選一\n            </h3>\n            <h3\n              v-else\n              class=\"banner-content-description\"\n            >\n              選擇數量與領餐時間\n            </h3>\n          </template>\n        </ImageHeaderBanner>\n      </header>\n    </transition>\n\n    <transition\n      name=\"slide\"\n      mode=\"out-in\"\n    >\n      <!--Display two meal options-->\n      <section\n        v-if=\"isChoosingMeal && !isLoading\"\n        key=\"meals\"\n        class=\"meal-wrapper\"\n      >\n        <div class=\"container meal-container\">\n          <div\n            class=\"row meal-content align-items-stretch\"\n          >\n            <div\n              v-for=\"index in 2\"\n              :key=\"index\"\n              class=\"col-12 col-md-6 col-lg-5 mb-4 meal-card\"\n            >\n              <!--Display meal-->\n              <MealVerticalCard\n                v-if=\"meals[index - 1]\"\n                :order=\"meals[index - 1]\"\n              >\n                <template v-slot:footer>\n                  <button\n                    class=\"btn\"\n                    type=\"button\"\n                    @click.stop.prevent=\"handleOrder(meals[index - 1])\"\n                  >\n                    訂購餐點\n                  </button>\n                </template>\n                <template v-slot:distance>\n                  ({{ meals[index - 1].restaurant.distance }}公尺)\n                </template>\n              </MealVerticalCard>\n              <!--Display warning message-->\n              <NewOrderCard\n                v-else\n                :style=\"{backgroundImage: `url(${image})`}\"\n              >\n                <template\n                  v-slot:content\n                >\n                  <h5 class=\"card-title\">\n                    <span class=\"card-indicator\">附近無其他美食</span>\n                  </h5>\n                  <router-link\n                    :to=\"{name: 'user-profile'}\"\n                    class=\"btn\"\n                  >\n                    改地點\n                  </router-link>\n                </template>\n              </NewOrderCard>\n            </div>\n          </div>\n        </div>\n      </section>\n      <!--Display order form-->\n      <section\n        v-if=\"!isChoosingMeal\"\n        key=\"form\"\n        class=\"order-wrapper\"\n      >\n        <div class=\"container order-container\">\n          <div\n            class=\"row order-content p-3\"\n          >\n            <MealHorizontalCard\n              :order=\"chosenMeal\"\n              class=\"order-display\"\n            />\n            <OrderForm\n              class=\"order-display mt-3\"\n              :order-info=\"{quantity: chosenMeal.meal.quantity, timeSlots: chosenMeal.timeSlots}\"\n              :initial-processing=\"isProcessing\"\n              :current-user=\"currentUser\"\n              @change-order=\"isChoosingMeal = true\"\n              @after-submit=\"handleAfterSubmit\"\n            />\n          </div>\n        </div>\n      </section>\n    </transition>\n    <!--Footer-->\n    <transition name=\"fade\">\n      <Footer v-if=\"!isLoading\" />\n    </transition>\n  </section>\n</template>\n\n<script>\nimport UserNavbar from '../components/Navbar/UserNavbar'\nimport ImageHeaderBanner from '../components/Banner/ImageHeaderBanner'\nimport MealVerticalCard from '../components/Card/MealVerticalCard'\nimport MealHorizontalCard from '../components/Card/MealHorizontalCard'\nimport NewOrderCard from '../components/Card/NewOrderCard'\nimport OrderForm from '../components/OrderForm'\nimport Footer from '../components/Footer'\nimport Loader from '../components/Loader'\nimport orderAPI from '../apis/order'\nimport { Toast } from '../utils/helpers'\nimport { mapState } from 'vuex'\n\nexport default {\n  components: {\n    UserNavbar,\n    ImageHeaderBanner,\n    MealVerticalCard,\n    NewOrderCard,\n    MealHorizontalCard,\n    OrderForm,\n    Footer,\n    Loader\n  },\n  data () {\n    return {\n      banner: {\n        image: 'https://images.pexels.com/photos/775031/pexels-photo-775031.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260',\n        height: 550\n      },\n      meals: [],\n      isChoosingMeal: true,\n      chosenMeal: null,\n      isLoading: true,\n      isProcessing: false,\n      image: 'https://cdn.pixabay.com/photo/2017/06/11/17/03/dumplings-2392893_1280.jpg'\n    }\n  },\n  computed: {\n    ...mapState(['currentUser'])\n  },\n  created () {\n    this.fetchMeals()\n  },\n  methods: {\n    async fetchMeals () {\n      try {\n        // fetch meal data from API\n        const { data, statusText } = await orderAPI.getNewOrder()\n        // error handling\n        if (statusText !== 'OK' || data.status !== 'success') throw new Error(data.message)\n        // store data\n        this.meals = data.restaurants.map(mealData => {\n          const { Meals: meal, time_slots: timeSlots, ...restaurant } = mealData\n          return { meal, timeSlots, restaurant }\n        })\n        // update loading status\n        this.isLoading = false\n      } catch (error) {\n        // update loading status\n        this.isLoading = false\n        // fire error messages\n        Toast.fire({\n          type: 'error',\n          title: '無法取得餐點資料，請稍後再試'\n        })\n        // redirect back to order tomorrow page\n        this.$router.push({ name: 'order-tomorrow' })\n      }\n    },\n    async handleOrder (mealItem) {\n      this.isChoosingMeal = false\n      this.chosenMeal = mealItem\n    },\n    async handleAfterSubmit (formData) {\n      try {\n        // prepare form data\n        const form = { ...formData, meal_id: this.chosenMeal.meal.id }\n        // create new order\n        const { data, statusText } = await orderAPI.postNewOrder(form)\n        // error handling\n        if (statusText !== 'OK' || data.status !== 'success') throw new Error(data.message)\n        // update balance to Vuex\n        const quantity = formData.quantity * (-1)\n        this.$store.commit('updateBalance', quantity)\n        // redirect to order detail page\n        this.$router.push({ name: 'order', params: { order_id: data.order_id } })\n      } catch (error) {\n        // update loading status\n        this.isProcessing = false\n        // fire error messages\n        Toast.fire({\n          type: 'error',\n          title: '無法成功訂餐，請稍後再試'\n        })\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@include slideAnimation;\n@include fadeAnimation;\n\n/* Section to display two mealchoices */\n.meal {\n  &-content {\n    position: relative;\n    top: -7rem;\n  }\n\n  &-card {\n    &:first-child {\n      @include response(lg) {\n        margin-left: 8.333333%;\n      }\n    }\n  }\n}\n\n/* Order Form */\n.order {\n  &-content {\n    position: relative;\n    top: -7rem;\n  }\n\n  &-display {\n    max-width: 760px;\n    margin: 0 auto;\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderNew.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderNew.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./OrderNew.vue?vue&type=template&id=a86a53b2&scoped=true&\"\nimport script from \"./OrderNew.vue?vue&type=script&lang=js&\"\nexport * from \"./OrderNew.vue?vue&type=script&lang=js&\"\nimport style0 from \"./OrderNew.vue?vue&type=style&index=0&id=a86a53b2&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a86a53b2\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderNew.vue?vue&type=style&index=0&id=a86a53b2&prod&lang=scss&scoped=true&\"","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n\n// `Array.prototype.map` method\n// https://tc39.es/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"card shadow\",attrs:{\"href\":\"#\"}},[_c('div',{staticClass:\"card-overlay\"}),_c('div',{staticClass:\"card-body\"},[_vm._t(\"content\")],2)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./NewOrderCard.vue?vue&type=template&id=3b73e856&scoped=true&\"\nvar script = {}\nimport style0 from \"./NewOrderCard.vue?vue&type=style&index=0&id=3b73e856&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3b73e856\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}