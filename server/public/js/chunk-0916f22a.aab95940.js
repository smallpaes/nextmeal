(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0916f22a"],{"0f14d":function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("button",{staticClass:"btn hamburger-menu",class:{opened:e.navIsOpen},on:{click:function(t){return e.$emit("toggle-navbar")}}},[t("div",{staticClass:"hamburger-menu-line hamburger-menu-line-1"}),t("div",{staticClass:"hamburger-menu-line hamburger-menu-line-2"}),t("div",{staticClass:"hamburger-menu-line hamburger-menu-line-3"})])},r=[],n={props:{navIsOpen:{type:Boolean,required:!0}}},i=n,c=(a("3e0f"),a("2877")),o=Object(c["a"])(i,s,r,!1,null,"351e4cbb",null);t["a"]=o.exports},1806:function(e,t,a){},"3e0f":function(e,t,a){"use strict";a("e79d")},"471d":function(e,t,a){"use strict";a("b25c")},"8f91":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("section",{staticClass:"wrapper d-flex vh-100"},[t("AdminSideNavBar",{attrs:{"nav-is-open":e.navIsOpen}}),t("section",{staticClass:"user flex-fill"},[t("NavbarToggler",{attrs:{"nav-is-open":e.navIsOpen},on:{"toggle-navbar":function(t){e.navIsOpen=!e.navIsOpen}}}),t("h1",{staticClass:"user-title"},[e._v(" 編輯用戶 ")]),t("hr",{staticClass:"user-divider"}),e.isLoading?t("Loader",{attrs:{height:"300px"}}):e._e(),t("transition",{attrs:{name:"slide"}},[e.isLoading?e._e():t("UserProfileForm",{staticClass:"user-form",attrs:{"initial-user":e.user,roles:e.roles,"initial-processing":e.isProcessing,categories:e.categories},on:{"after-submit":e.handleAfterSubmit,"after-delete":e.handleAfterDelete}})],1)],1)],1)},r=[],n=a("c7eb"),i=a("5530"),c=a("1da1"),o=(a("d9e2"),a("fb6a"),a("14d9"),a("e9e5")),u=a("0f14d"),l=a("5cf3"),d=a("555f"),v=a("be6c"),f=a("2fa3"),p={components:{AdminSideNavBar:o["a"],NavbarToggler:u["a"],UserProfileForm:l["a"],Loader:d["a"]},data:function(){return{user:{name:"",email:"",role:"",prefer:"",dob:"",image:"",lng:"",lat:"",location:""},categories:[],roles:[],isLoading:!0,isProcessing:!1,navIsOpen:!1}},created:function(){var e=this.$route.params.user_id;this.fetchUser(e)},methods:{fetchUser:function(e){var t=this;return Object(c["a"])(Object(n["a"])().mark((function a(){var s,r,c;return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,v["a"].users.getUser({userId:e});case 3:if(s=a.sent,r=s.data,c=s.statusText,"success"===r.status&&"OK"===c){a.next=8;break}throw new Error(r.message);case 8:t.user=Object(i["a"])(Object(i["a"])(Object(i["a"])({},t.user),r.user),{},{dob:r.user.dob.slice(0,10),image:r.user.avatar}),t.categories=r.categories||t.categories,t.roles=r.roles||t.roles,t.isLoading=!1,a.next=19;break;case 14:a.prev=14,a.t0=a["catch"](0),t.isLoading=!1,f["a"].fire({type:"error",title:"無法取得用戶資料，請稍後再試"}),t.$router.go(-1);case 19:case"end":return a.stop()}}),a,null,[[0,14]])})))()},handleAfterSubmit:function(e){var t=this;return Object(c["a"])(Object(n["a"])().mark((function a(){var s,r,i,c,o;return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=e.formData,a.prev=1,t.isProcessing=!0,r=t.$route.params.user_id,a.next=6,v["a"].users.putUser({userId:r,formData:s});case 6:if(i=a.sent,c=i.data,o=i.statusText,"success"===c.status&&"OK"===o){a.next=11;break}throw new Error(c.message);case 11:t.isProcessing=!1,t.$router.push({name:"admin-users"}),a.next=19;break;case 15:a.prev=15,a.t0=a["catch"](1),t.isProcessing=!1,f["a"].fire({type:"error",title:"無法更新用戶資料，請稍後再試"});case 19:case"end":return a.stop()}}),a,null,[[1,15]])})))()},handleAfterDelete:function(){var e=this;return Object(c["a"])(Object(n["a"])().mark((function t(){var a,s,r,i;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isProcessing=!0,a=e.$route.params.user_id,t.next=5,v["a"].users.deleteUser({userId:a});case 5:if(s=t.sent,r=s.data,i=s.statusText,"success"===r.status&&"OK"===i){t.next=10;break}throw new Error(r.message);case 10:e.isProcessing=!1,e.$router.push({name:"admin-users"}),t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](0),e.isProcessing=!1,f["a"].fire({type:"error",title:"無法刪除用戶資料，請稍後再試"});case 18:case"end":return t.stop()}}),t,null,[[0,14]])})))()}}},m=p,b=(a("471d"),a("2877")),g=Object(b["a"])(m,s,r,!1,null,"61fbf74f",null);t["default"]=g.exports},b25c:function(e,t,a){},be6c:function(e,t,a){"use strict";a("b0c0"),a("d3b7"),a("3ca3"),a("ddb0"),a("9861"),a("25f0");var s=a("2fa3");t["a"]={restaurants:{getRestaurants:function(e){var t=e.name,a=e.dist,r=e.page,n=new URLSearchParams({name:t,dist:a,page:r});return s["b"].get("/admin/restaurants?".concat(n.toString()))},getRestaurant:function(e){var t=e.restaurantId;return s["b"].get("/admin/restaurants/".concat(t))},putRestaurant:function(e){var t=e.restaurantId,a=e.formData;return s["b"].put("/admin/restaurants/".concat(t),a)},deleteRestaurant:function(e){var t=e.restaurantId;return s["b"].delete("/admin/restaurants/".concat(t))}},users:{getUser:function(e){var t=e.userId;return s["b"].get("/admin/users/".concat(t))},getUsers:function(e){var t=e.subscriptionStatus,a=e.name,r=e.page,n=new URLSearchParams({sub_status:t,name:a,page:r});return s["b"].get("/admin/users?".concat(n.toString()))},deleteUser:function(e){var t=e.userId;return s["b"].delete("/admin/users/".concat(t))},putUser:function(e){var t=e.userId,a=e.formData;return s["b"].put("/admin/users/".concat(t),a)}},orders:{getOrders:function(e){var t=e.id,a=e.date,r=e.status,n=e.page,i=new URLSearchParams({page:n,order_id:t,date:a,order_status:r});return s["b"].get("/admin/orders?".concat(i.toString()))},putOrder:function(e){var t=e.orderId;return s["b"].put("/admin/orders/".concat(t),{})}},dashboard:{getDashboard:function(){return s["b"].get("/admin/dashboard")}}}},e79d:function(e,t,a){},e9e5:function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("nav",{staticClass:"sidenav shadow",class:{opened:e.navIsOpen}},[t("div",{staticClass:"sidenav-brand-container text-center py-5"},[t("router-link",{staticClass:"sidenav-brand",attrs:{to:{name:"home"}}},[e._v(" NextMeal ")])],1),t("ul",{staticClass:"sidenav-nav px-0 text-center"},[t("li",{staticClass:"nav-item"},[t("router-link",{staticClass:"nav-link",attrs:{to:{name:"admin-restaurants"},"active-class":"active"}},[t("span",{staticClass:"icon"},[t("i",{staticClass:"fas fa-store"})]),t("span",{staticClass:"nav-link-description"},[e._v("餐廳")])])],1),t("li",{staticClass:"nav-item"},[t("router-link",{staticClass:"nav-link",attrs:{to:{name:"admin-users"},"active-class":"active"}},[t("span",{staticClass:"icon"},[t("i",{staticClass:"fas fa-user"})]),t("span",{staticClass:"nav-link-description"},[e._v("用戶")])])],1),t("li",{staticClass:"nav-item"},[t("router-link",{staticClass:"nav-link",attrs:{to:{name:"admin-orders"},"active-class":"active"}},[t("span",{staticClass:"icon"},[t("i",{staticClass:"fas fa-clipboard-list"})]),t("span",{staticClass:"nav-link-description"},[e._v("訂單")])])],1),t("li",{staticClass:"nav-item"},[t("router-link",{staticClass:"nav-link",attrs:{to:{name:"admin-dashboard"},"active-class":"active"}},[t("span",{staticClass:"icon"},[t("i",{staticClass:"fas fa-chart-line"})]),t("span",{staticClass:"nav-link-description"},[e._v("分析")])])],1),t("li",{staticClass:"nav-divider"}),t("li",{staticClass:"nav-item"},[t("a",{staticClass:"nav-link",attrs:{href:"#",role:"button"},on:{click:e.logout}},[e._m(0),t("span",{staticClass:"nav-link-description"},[e._v("登出")])])])])])},r=[function(){var e=this,t=e._self._c;return t("span",{staticClass:"icon"},[t("i",{staticClass:"fas fa-sign-out-alt"})])}],n=(a("14d9"),{props:{navIsOpen:{type:Boolean,required:!0}},methods:{logout:function(){this.$store.commit("revokeAuthentication"),this.$router.push("/")}}}),i=n,c=(a("ed73"),a("2877")),o=Object(c["a"])(i,s,r,!1,null,"d34dbf0e",null);t["a"]=o.exports},ed73:function(e,t,a){"use strict";a("1806")}}]);
//# sourceMappingURL=chunk-0916f22a.aab95940.js.map