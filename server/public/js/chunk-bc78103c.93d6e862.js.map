{"version":3,"sources":["webpack:///./src/components/Card/MealVerticalCard.vue","webpack:///src/components/Card/MealVerticalCard.vue","webpack:///./src/components/Card/MealVerticalCard.vue?084a","webpack:///./src/components/Card/MealVerticalCard.vue?0aad","webpack:///./src/components/Card/MealVerticalCard.vue?e290","webpack:///./src/components/Card/NewOrderCard.vue?df1e","webpack:///./src/views/OrderNew.vue","webpack:///src/views/OrderNew.vue","webpack:///./src/views/OrderNew.vue?347c","webpack:///./src/views/OrderNew.vue?dfde","webpack:///./src/views/OrderNew.vue?cfc5","webpack:///./src/components/Card/NewOrderCard.vue","webpack:///./src/components/Card/NewOrderCard.vue?3c8f"],"names":["render","_vm","this","_c","_self","staticClass","attrs","order","meal","image","_v","_s","name","_f","restaurant","rating","_t","description","staticRenderFns","components","SkelentonBox","mixins","padEndFilter","textTruncateFilter","props","type","Object","required","component","isLoading","_e","banner","height","scopedSlots","_u","key","fn","isChoosingMeal","proxy","_l","index","meals","on","$event","stopPropagation","preventDefault","handleOrder","distance","style","backgroundImage","concat","chosenMeal","quantity","timeSlots","isProcessing","currentUser","handleAfterSubmit","UserNavbar","ImageHeaderBanner","MealVerticalCard","NewOrderCard","MealHorizontalCard","OrderForm","Footer","Loader","data","computed","_objectSpread","mapState","created","fetchMeals","methods","_fetchMeals","_asyncToGenerator","regeneratorRuntime","mark","_callee","_yield$orderAPI$getNe","statusText","wrap","_context","prev","next","orderAPI","getNewOrder","sent","status","Error","message","restaurants","map","mealData","Meals","time_slots","_objectWithoutProperties","_excluded","t0","Toast","fire","title","$router","push","stop","apply","arguments","_handleOrder","_callee2","mealItem","_context2","_x","_handleAfterSubmit","_callee3","formData","form","_yield$orderAPI$postN","_context3","meal_id","id","postNewOrder","$store","commit","params","order_id","_x2","script"],"mappings":"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","file":"js/chunk-bc78103c.93d6e862.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"card shadow\",attrs:{\"href\":\"#\"}},[_c('div',{staticClass:\"card-img-top-container\"},[_c('img',{staticClass:\"card-img-top\",attrs:{\"src\":_vm.order.meal.image,\"alt\":\"photo of the restaurant\"}})]),_c('div',{staticClass:\"card-body\"},[_c('h5',{staticClass:\"card-title m-0\"},[_vm._v(\"\\n      \"+_vm._s(_vm.order.meal.name)+\"\\n    \")]),_c('p',{staticClass:\"card-text mt-1\"},[_c('span',{staticClass:\"rating\"},[_vm._v(\"★ \"+_vm._s(_vm._f(\"padEnd\")(_vm.order.restaurant.rating)))]),_c('span',{staticClass:\"mx-1\"},[_vm._v(\"|\")]),_vm._v(_vm._s(_vm._f(\"textTruncate\")(_vm.order.restaurant.name,15))+\"\\n      \"),_vm._t(\"distance\")],2),_vm._t(\"indicator\"),_c('p',{staticClass:\"card-text\"},[_vm._v(\"\\n      \"+_vm._s(_vm._f(\"textTruncate\")(_vm.order.meal.description))+\"\\n    \")])],2),_c('div',{staticClass:\"card-footer text-right\"},[_vm._t(\"footer\")],2)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div\n    class=\"card shadow\"\n    href=\"#\"\n  >\n    <div class=\"card-img-top-container\">\n      <img\n        :src=\"order.meal.image\"\n        alt=\"photo of the restaurant\"\n        class=\"card-img-top\"\n      >\n    </div>\n    <div class=\"card-body\">\n      <h5 class=\"card-title m-0\">\n        {{ order.meal.name }}\n      </h5>\n      <p class=\"card-text mt-1\">\n        <span class=\"rating\">&#9733; {{ order.restaurant.rating | padEnd }}</span>\n        <span class=\"mx-1\">|</span>{{ order.restaurant.name | textTruncate(15) }}\n        <slot name=\"distance\" />\n      </p>\n      <slot name=\"indicator\" />\n      <p class=\"card-text\">\n        {{ order.meal.description | textTruncate }}\n      </p>\n    </div>\n    <div class=\"card-footer text-right\">\n      <slot name=\"footer\" />\n    </div>\n  </div>\n</template>\n\n<script>\nimport SkelentonBox from '../Placeholder/SkeletonBox'\nimport { padEndFilter, textTruncateFilter } from '../../utils/mixins'\n\nexport default {\n  components: {\n    SkelentonBox\n  },\n  mixins: [padEndFilter, textTruncateFilter],\n  props: {\n    order: {\n      type: Object,\n      required: true\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.card {\n  border: none;\n  transition: opacity .2s linear;\n\n  &:hover { opacity: .9; }\n\n  &-img-top-container {\n    width: 100%;\n    height: 350px;\n    background-image: url('~@/assets/placeholder-image/logo/1260x750.png');\n    background-repeat: no-repeat;\n    background-position: center;\n    background-size: cover;\n\n    @include response(sm) { height: 300px; }\n    @include response(md) { height: 340px; }\n    @include response(lg) { height: 380px; }\n  }\n\n  &-img-top {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n  }\n\n  &-body {\n    position: relative;\n    min-height: 145px;\n    padding: .8rem;\n\n    @include response(md) { height: 185px; }\n    @include response(lg) { height: 167px; }\n  }\n\n  &-indicator {\n    position: absolute;\n    top: 1rem;\n    right: 1.3rem;\n    display: inline-block;\n    width: 36px;\n    font-size: size(md);\n    color: color(tertiary);\n    text-align: center;\n    border: 1px dotted color(tertiary);\n    border-radius: 50%;\n  }\n\n  &-title {\n    font-size: size(sm);\n    color: color(secondary);\n  }\n\n  &-text {\n    font-size: size(xs);\n    color: lighten(color(secondary), 10%);\n\n    .rating { color: color(primary); }\n  }\n\n  &-footer {\n    padding: .8rem;\n    background-color: color(quaternary);\n    border-top-color: lighten(color(secondary), 55%);\n  }\n}\n\n.btn {\n  @include solidButton(80, .3, primary);\n  padding: 0;\n  font-size: size(xs);\n  line-height: 1.8rem;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MealVerticalCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MealVerticalCard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MealVerticalCard.vue?vue&type=template&id=0b594ecd&scoped=true&\"\nimport script from \"./MealVerticalCard.vue?vue&type=script&lang=js&\"\nexport * from \"./MealVerticalCard.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MealVerticalCard.vue?vue&type=style&index=0&id=0b594ecd&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0b594ecd\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MealVerticalCard.vue?vue&type=style&index=0&id=0b594ecd&prod&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewOrderCard.vue?vue&type=style&index=0&id=3b73e856&prod&lang=scss&scoped=true&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('section',[_c('UserNavbar'),(_vm.isLoading)?_c('Loader',{attrs:{\"height\":'100vh'}}):_vm._e(),_c('transition',{attrs:{\"name\":\"fade\"}},[(!_vm.isLoading)?_c('header',[_c('ImageHeaderBanner',{attrs:{\"background-photo\":_vm.banner.image,\"banner-height\":_vm.banner.height},scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_c('h1',{staticClass:\"banner-content-title\"},[_vm._v(\"\\n            訂購餐點\\n          \")]),(_vm.isChoosingMeal)?_c('h3',{staticClass:\"banner-content-description\"},[_vm._v(\"\\n            餐點二選一\\n          \")]):_c('h3',{staticClass:\"banner-content-description\"},[_vm._v(\"\\n            選擇數量與領餐時間\\n          \")])]},proxy:true}],null,false,2390136964)})],1):_vm._e()]),_c('transition',{attrs:{\"name\":\"slide\",\"mode\":\"out-in\"}},[(_vm.isChoosingMeal && !_vm.isLoading)?_c('section',{key:\"meals\",staticClass:\"meal-wrapper\"},[_c('div',{staticClass:\"container meal-container\"},[_c('div',{staticClass:\"row meal-content align-items-stretch\"},_vm._l((2),function(index){return _c('div',{key:index,staticClass:\"col-12 col-md-6 col-lg-5 mb-4 meal-card\"},[(_vm.meals[index - 1])?_c('MealVerticalCard',{attrs:{\"order\":_vm.meals[index - 1]},scopedSlots:_vm._u([{key:\"footer\",fn:function(){return [_c('button',{staticClass:\"btn\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.handleOrder(_vm.meals[index - 1])}}},[_vm._v(\"\\n                  訂購餐點\\n                \")])]},proxy:true},{key:\"distance\",fn:function(){return [_vm._v(\"\\n                (\"+_vm._s(_vm.meals[index - 1].restaurant.distance)+\"公尺)\\n              \")]},proxy:true}],null,true)}):_c('NewOrderCard',{style:({backgroundImage: `url(${_vm.image})`}),scopedSlots:_vm._u([{key:\"content\",fn:function(){return [_c('h5',{staticClass:\"card-title\"},[_c('span',{staticClass:\"card-indicator\"},[_vm._v(\"附近無其他美食\")])]),_c('router-link',{staticClass:\"btn\",attrs:{\"to\":{name: 'user-profile'}}},[_vm._v(\"\\n                  改地點\\n                \")])]},proxy:true}],null,true)})],1)}),0)])]):_vm._e(),(!_vm.isChoosingMeal)?_c('section',{key:\"form\",staticClass:\"order-wrapper\"},[_c('div',{staticClass:\"container order-container\"},[_c('div',{staticClass:\"row order-content p-3\"},[_c('MealHorizontalCard',{staticClass:\"order-display\",attrs:{\"order\":_vm.chosenMeal}}),_c('OrderForm',{staticClass:\"order-display mt-3\",attrs:{\"order-info\":{quantity: _vm.chosenMeal.meal.quantity, timeSlots: _vm.chosenMeal.timeSlots},\"initial-processing\":_vm.isProcessing,\"current-user\":_vm.currentUser},on:{\"change-order\":function($event){_vm.isChoosingMeal = true},\"after-submit\":_vm.handleAfterSubmit}})],1)])]):_vm._e()]),_c('transition',{attrs:{\"name\":\"fade\"}},[(!_vm.isLoading)?_c('Footer'):_vm._e()],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <section>\n    <!--Navbar-->\n    <UserNavbar />\n    <!--Loader-->\n    <Loader\n      v-if=\"isLoading\"\n      :height=\"'100vh'\"\n    />\n    <!--Header-->\n    <transition name=\"fade\">\n      <header v-if=\"!isLoading\">\n        <ImageHeaderBanner\n          :background-photo=\"banner.image\"\n          :banner-height=\"banner.height\"\n        >\n          <template v-slot:header>\n            <h1 class=\"banner-content-title\">\n              訂購餐點\n            </h1>\n            <h3\n              v-if=\"isChoosingMeal\"\n              class=\"banner-content-description\"\n            >\n              餐點二選一\n            </h3>\n            <h3\n              v-else\n              class=\"banner-content-description\"\n            >\n              選擇數量與領餐時間\n            </h3>\n          </template>\n        </ImageHeaderBanner>\n      </header>\n    </transition>\n\n    <transition\n      name=\"slide\"\n      mode=\"out-in\"\n    >\n      <!--Display two meal options-->\n      <section\n        v-if=\"isChoosingMeal && !isLoading\"\n        key=\"meals\"\n        class=\"meal-wrapper\"\n      >\n        <div class=\"container meal-container\">\n          <div\n            class=\"row meal-content align-items-stretch\"\n          >\n            <div\n              v-for=\"index in 2\"\n              :key=\"index\"\n              class=\"col-12 col-md-6 col-lg-5 mb-4 meal-card\"\n            >\n              <!--Display meal-->\n              <MealVerticalCard\n                v-if=\"meals[index - 1]\"\n                :order=\"meals[index - 1]\"\n              >\n                <template v-slot:footer>\n                  <button\n                    class=\"btn\"\n                    type=\"button\"\n                    @click.stop.prevent=\"handleOrder(meals[index - 1])\"\n                  >\n                    訂購餐點\n                  </button>\n                </template>\n                <template v-slot:distance>\n                  ({{ meals[index - 1].restaurant.distance }}公尺)\n                </template>\n              </MealVerticalCard>\n              <!--Display warning message-->\n              <NewOrderCard\n                v-else\n                :style=\"{backgroundImage: `url(${image})`}\"\n              >\n                <template\n                  v-slot:content\n                >\n                  <h5 class=\"card-title\">\n                    <span class=\"card-indicator\">附近無其他美食</span>\n                  </h5>\n                  <router-link\n                    :to=\"{name: 'user-profile'}\"\n                    class=\"btn\"\n                  >\n                    改地點\n                  </router-link>\n                </template>\n              </NewOrderCard>\n            </div>\n          </div>\n        </div>\n      </section>\n      <!--Display order form-->\n      <section\n        v-if=\"!isChoosingMeal\"\n        key=\"form\"\n        class=\"order-wrapper\"\n      >\n        <div class=\"container order-container\">\n          <div\n            class=\"row order-content p-3\"\n          >\n            <MealHorizontalCard\n              :order=\"chosenMeal\"\n              class=\"order-display\"\n            />\n            <OrderForm\n              class=\"order-display mt-3\"\n              :order-info=\"{quantity: chosenMeal.meal.quantity, timeSlots: chosenMeal.timeSlots}\"\n              :initial-processing=\"isProcessing\"\n              :current-user=\"currentUser\"\n              @change-order=\"isChoosingMeal = true\"\n              @after-submit=\"handleAfterSubmit\"\n            />\n          </div>\n        </div>\n      </section>\n    </transition>\n    <!--Footer-->\n    <transition name=\"fade\">\n      <Footer v-if=\"!isLoading\" />\n    </transition>\n  </section>\n</template>\n\n<script>\nimport UserNavbar from '../components/Navbar/UserNavbar'\nimport ImageHeaderBanner from '../components/Banner/ImageHeaderBanner'\nimport MealVerticalCard from '../components/Card/MealVerticalCard'\nimport MealHorizontalCard from '../components/Card/MealHorizontalCard'\nimport NewOrderCard from '../components/Card/NewOrderCard'\nimport OrderForm from '../components/OrderForm'\nimport Footer from '../components/Footer'\nimport Loader from '../components/Loader'\nimport orderAPI from '../apis/order'\nimport { Toast } from '../utils/helpers'\nimport { mapState } from 'vuex'\n\nexport default {\n  components: {\n    UserNavbar,\n    ImageHeaderBanner,\n    MealVerticalCard,\n    NewOrderCard,\n    MealHorizontalCard,\n    OrderForm,\n    Footer,\n    Loader\n  },\n  data () {\n    return {\n      banner: {\n        image: 'https://images.pexels.com/photos/775031/pexels-photo-775031.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260',\n        height: 550\n      },\n      meals: [],\n      isChoosingMeal: true,\n      chosenMeal: null,\n      isLoading: true,\n      isProcessing: false,\n      image: 'https://cdn.pixabay.com/photo/2017/06/11/17/03/dumplings-2392893_1280.jpg'\n    }\n  },\n  computed: {\n    ...mapState(['currentUser'])\n  },\n  created () {\n    this.fetchMeals()\n  },\n  methods: {\n    async fetchMeals () {\n      try {\n        // fetch meal data from API\n        const { data, statusText } = await orderAPI.getNewOrder()\n        // error handling\n        if (statusText !== 'OK' || data.status !== 'success') throw new Error(data.message)\n        // store data\n        this.meals = data.restaurants.map(mealData => {\n          const { Meals: meal, time_slots: timeSlots, ...restaurant } = mealData\n          return { meal, timeSlots, restaurant }\n        })\n        // update loading status\n        this.isLoading = false\n      } catch (error) {\n        // update loading status\n        this.isLoading = false\n        // fire error messages\n        Toast.fire({\n          type: 'error',\n          title: '無法取得餐點資料，請稍後再試'\n        })\n        // redirect back to order tomorrow page\n        this.$router.push({ name: 'order-tomorrow' })\n      }\n    },\n    async handleOrder (mealItem) {\n      this.isChoosingMeal = false\n      this.chosenMeal = mealItem\n    },\n    async handleAfterSubmit (formData) {\n      try {\n        // prepare form data\n        const form = { ...formData, meal_id: this.chosenMeal.meal.id }\n        // create new order\n        const { data, statusText } = await orderAPI.postNewOrder(form)\n        // error handling\n        if (statusText !== 'OK' || data.status !== 'success') throw new Error(data.message)\n        // update balance to Vuex\n        const quantity = formData.quantity * (-1)\n        this.$store.commit('updateBalance', quantity)\n        // redirect to order detail page\n        this.$router.push({ name: 'order', params: { order_id: data.order_id } })\n      } catch (error) {\n        // update loading status\n        this.isProcessing = false\n        // fire error messages\n        Toast.fire({\n          type: 'error',\n          title: '無法成功訂餐，請稍後再試'\n        })\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@include slideAnimation;\n@include fadeAnimation;\n\n/* Section to display two mealchoices */\n.meal {\n  &-content {\n    position: relative;\n    top: -7rem;\n  }\n\n  &-card {\n    &:first-child {\n      @include response(lg) {\n        margin-left: 8.333333%;\n      }\n    }\n  }\n}\n\n/* Order Form */\n.order {\n  &-content {\n    position: relative;\n    top: -7rem;\n  }\n\n  &-display {\n    max-width: 760px;\n    margin: 0 auto;\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderNew.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderNew.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./OrderNew.vue?vue&type=template&id=a86a53b2&scoped=true&\"\nimport script from \"./OrderNew.vue?vue&type=script&lang=js&\"\nexport * from \"./OrderNew.vue?vue&type=script&lang=js&\"\nimport style0 from \"./OrderNew.vue?vue&type=style&index=0&id=a86a53b2&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a86a53b2\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderNew.vue?vue&type=style&index=0&id=a86a53b2&prod&lang=scss&scoped=true&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"card shadow\",attrs:{\"href\":\"#\"}},[_c('div',{staticClass:\"card-overlay\"}),_c('div',{staticClass:\"card-body\"},[_vm._t(\"content\")],2)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./NewOrderCard.vue?vue&type=template&id=3b73e856&scoped=true&\"\nvar script = {}\nimport style0 from \"./NewOrderCard.vue?vue&type=style&index=0&id=3b73e856&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3b73e856\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}