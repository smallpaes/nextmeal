(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-271b3191"],{"0a76":function(t,a,s){"use strict";s("7f7f");var e=function(){var t=this,a=t._self._c;return a("nav",{staticClass:"sidenav shadow",class:{opened:t.navIsOpen}},[a("div",{staticClass:"sidenav-brand-container text-center py-5"},[a("router-link",{staticClass:"sidenav-brand",attrs:{to:{name:"home"}}},[t._v("\n      NextMeal\n    ")])],1),a("ul",{staticClass:"sidenav-nav px-0 text-center"},[a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:{name:"owner-info"}}},[a("span",{staticClass:"icon"},[a("i",{staticClass:"fas fa-store"})]),a("span",{staticClass:"nav-link-description"},[t._v("餐廳")])])],1),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",class:{active:"owner-menu"===t.$route.name},attrs:{to:{name:"owner-dishes"},"active-class":"active"}},[a("span",{staticClass:"icon"},[a("i",{staticClass:"fas fa-utensils"})]),a("span",{staticClass:"nav-link-description"},[t._v("餐點")])])],1),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:{name:"owner-orders"},"active-class":"active"}},[a("span",{staticClass:"icon"},[a("i",{staticClass:"fas fa-clipboard-list"})]),a("span",{staticClass:"nav-link-description"},[t._v("訂單")])])],1),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:{name:"owner-dashboard"},"active-class":"active"}},[a("span",{staticClass:"icon"},[a("i",{staticClass:"fas fa-chart-line"})]),a("span",{staticClass:"nav-link-description"},[t._v("分析")])])],1),a("li",{staticClass:"nav-divider"}),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{href:"#",role:"button"},on:{click:t.logout}},[t._m(0),a("span",{staticClass:"nav-link-description"},[t._v("登出")])])])])])},r=[function(){var t=this,a=t._self._c;return a("span",{staticClass:"icon"},[a("i",{staticClass:"fas fa-sign-out-alt"})])}],n={props:{navIsOpen:{type:Boolean,required:!0}},methods:{logout:function(){this.$store.commit("revokeAuthentication"),this.$router.push("/")}}},i=n,o=(s("dd72"),s("2877")),c=Object(o["a"])(i,e,r,!1,null,"be936cce",null);a["a"]=c.exports},"2dff":function(t,a,s){},4345:function(t,a,s){},4948:function(t,a,s){"use strict";s("2dff")},"69bf":function(t,a,s){"use strict";s.r(a);s("7f7f");var e,r,n=function(){var t=this,a=t._self._c;return a("section",{staticClass:"wrapper vh-100"},[a("OwnerSideNavBar",{attrs:{"nav-is-open":t.navIsOpen}}),a("section",{staticClass:"dashboard"},[a("NavbarToggler",{attrs:{"nav-is-open":t.navIsOpen},on:{"toggle-navbar":function(a){t.navIsOpen=!t.navIsOpen}}}),a("h1",{staticClass:"dashboard-title"},[t._v("\n      餐廳分析\n    ")]),a("hr",{staticClass:"dashboard-divider"}),t.isLoading?a("Loader",{attrs:{height:"300px"}}):t._e(),a("transition",{attrs:{name:"slide",appear:""}},[t.isLoading?t._e():[t.currentUser.hasRestaurant?a("div",{staticClass:"row align-items-stretch"},[a("div",{staticClass:"col-md-6 mb-4"},[a("LineChartCard",{attrs:{"chart-data":t.data.orders,height:160},scopedSlots:t._u([{key:"header",fn:function(){return[a("i",{staticClass:"fas fa-clipboard-list mr-2"}),t._v(t._s(t.data.orders.name)+"\n              ")]},proxy:!0},{key:"title",fn:function(){return[t._v("\n                近一個月總"+t._s(t.data.orders.name)+"數\n              ")]},proxy:!0},{key:"text",fn:function(){return[a("span",{style:{color:t.data.orders.datasets[0].borderColor}},[t._v(t._s(t.data.orders.total||0))])]},proxy:!0}],null,!1,3582577305)})],1),a("div",{staticClass:"col-md-6 mb-4"},[a("PieChartCard",{attrs:{"chart-data":t.data.users,height:160},scopedSlots:t._u([{key:"header",fn:function(){return[a("i",{staticClass:"fas fa-users mr-2"}),t._v(t._s(t.data.users.name)+"\n              ")]},proxy:!0},{key:"title",fn:function(){return[t._v("\n                近一個月總"+t._s(t.data.users.name)+"數\n              ")]},proxy:!0},{key:"text",fn:function(){return[a("span",{style:{color:"rgb(93,90,87)"}},[t._v(t._s(t.data.users.total||0))])]},proxy:!0}],null,!1,3197894968)})],1),a("div",{staticClass:"col-md-6 mb-4"},[a("BarChartHorizontal",{attrs:{"chart-data":t.data.ratings,height:160},scopedSlots:t._u([{key:"header",fn:function(){return[a("i",{staticClass:"fas fa-smile mr-2"}),t._v(t._s(t.data.ratings.name)+"\n              ")]},proxy:!0},{key:"title",fn:function(){return[t._v("\n                用戶平均"+t._s(t.data.ratings.name)+"\n              ")]},proxy:!0},{key:"text",fn:function(){return[a("span",{style:{color:t.data.ratings.datasets[0].borderColor}},[t._v(t._s(t.data.ratings.average||0))])]},proxy:!0}],null,!1,4228706168)})],1),a("div",{staticClass:"col-md-6 mb-4"},[a("DashboardCommentCard",{attrs:{comments:t.comments}})],1)]):a("PlaceholderMessage",{staticClass:"placeholder-message col-12 py-4 text-center"},[a("h1",[a("i",{staticClass:"fas fa-exclamation-circle"})]),t._v("\n          請先至「餐廳」頁面填寫資料"),a("br"),t._v("完成開店流程\n        ")])]],2)],1)],1)},i=[],o=(s("8e6e"),s("ac6a"),s("456d"),s("96cf"),s("3b8d")),c=s("bd86"),l=s("0a76"),d=s("0f14d"),u=s("e234"),p=function(){var t=this,a=t._self._c;return a("div",{staticClass:"card rounded-sm shadow-sm border-0"},[t.$slots.header?a("div",{staticClass:"card-header bg-white"},[t._t("header")],2):t._e(),a("div",{staticClass:"card-body card-statistic"},[a("p",{staticClass:"card-title"},[t._t("title")],2),a("h3",{staticClass:"card-text"},[t._t("text")],2)]),a("div",{staticClass:"card-body pl-0 pr-3 pb-1"},[a("BarChartTemplate",{attrs:{"chart-data":t.chartData,options:t.chartOptions,styles:t.styles}})],1)])},f=[],h=(s("c5f6"),s("1fca")),v=h["d"].reactiveProp,b={extends:h["a"],mixins:[v],props:{chartData:{type:Object,default:null},options:{type:Object,default:null}},mounted:function(){this.renderChart(this.chartData,this.options)}},m=b,g=s("2877"),C=Object(g["a"])(m,e,r,!1,null,null,null),_=C.exports,y={components:{BarChartTemplate:_},props:{chartData:{type:Object,required:!0},height:{type:Number,default:160}},data:function(){return{chartOptions:{animation:{easing:"easeOutQuad"},legend:{display:!1},responsive:!0,maintainAspectRatio:!1,layout:{padding:{right:5,top:5,left:5,bottom:15}},scales:{yAxes:[{stacked:!0,ticks:{beginAtZero:!0,stepSize:10,fontColor:"#a9a7a5"},gridLines:{display:!1,color:"rgba(255,255,255,0)"}}],xAxes:[{stacked:!0,ticks:{display:!0,fontColor:"#a9a7a5",precision:0},gridLines:{display:!1,color:"rgba(255,255,255,0)",tickMarkLength:8}}]}}}},computed:{styles:function(){return{height:"".concat(this.height,"px"),position:"relative"}}}},k=y,w=(s("8425"),Object(g["a"])(k,p,f,!1,null,"25bf817c",null)),O=w.exports,x=function(){var t=this,a=t._self._c;return a("div",{staticClass:"card rounded-sm shadow-sm border-0"},[t._m(0),t.comments.length>0?a("ul",{staticClass:"list-group list-group-flush"},t._l(t.comments,(function(s,e){return a("li",{key:e,staticClass:"list-group-item d-flex justify-content-between align-items-center"},[a("div",{staticClass:"list-group-item-wrapper"},[a("p",{staticClass:"list-title m-0"},[t._v("\n          "+t._s(s.name)+"\n        ")]),a("p",{staticClass:"list-text m-0"},[t._v("\n          "+t._s(s.user_text)+" -- "+t._s(t._f("timeTransform")(s.createdAt))+"\n        ")])]),a("span",{staticClass:"list-rating"},[t._v("★ "+t._s(t._f("padEnd")(s.rating)))])])})),0):a("div",{staticClass:"card-body"},[a("i",{staticClass:"far fa-sticky-note"}),t._v("\n    尚未有評論\n  ")])])},j=[function(){var t=this,a=t._self._c;return a("div",{staticClass:"card-header bg-white"},[a("i",{staticClass:"fas fa-comment mr-2"}),t._v("評論\n  ")])}],D=s("2708"),B={mixins:[D["e"],D["g"],D["h"]],props:{comments:{type:Array,required:!0}}},L=B,P=(s("de1b"),Object(g["a"])(L,x,j,!1,null,"35b81c54",null)),I=P.exports,S=s("6e61"),A=s("d691"),N=s("555f"),E=s("bcc2"),H=s("2fa3"),M=s("2f62");function T(t,a){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);a&&(e=e.filter((function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),s.push.apply(s,e)}return s}function R(t){for(var a=1;a<arguments.length;a++){var s=null!=arguments[a]?arguments[a]:{};a%2?T(Object(s),!0).forEach((function(a){Object(c["a"])(t,a,s[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):T(Object(s)).forEach((function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(s,a))}))}return t}var W={components:{OwnerSideNavBar:l["a"],NavbarToggler:d["a"],Loader:N["a"],LineChartCard:u["a"],BarChartHorizontal:O,DashboardCommentCard:I,PieChartCard:S["a"],PlaceholderMessage:A["a"]},data:function(){return{isLoading:!0,navIsOpen:!1,color:"rgb(239, 75, 77)",data:{orders:{name:"訂單",datasets:[{borderColor:"rgb(247,185,36)",backgroundColor:"rgb(253,241,211)",pointBackgroundColor:"rgb(255,255,255)",pointHoverBackgroundColor:"rgb(255,255,255)",pointBorderWidth:3,pointHoverBorderWidth:2}]},users:{name:"客群",datasets:[{backgroundColor:["rgb(0,143,250)","rgb(119,93,207)","rgb(255,140,52)","rgb(239,75,77)","rgb(78,202,138)","rgb(247,185,37)"]}]},ratings:{name:"滿意度",datasets:[{borderColor:"rgb(62,160,252)",backgroundColor:"rgb(62,160,252)",pointBackgroundColor:"rgb(255,255,255)",pointHoverBackgroundColor:"rgb(255,255,255)",pointBorderWidth:3,pointHoverBorderWidth:2}]}},comments:[]}},computed:R({},Object(M["c"])(["currentUser"])),created:function(){if(this.currentUser.hasRestaurant)return this.fetchData();this.isLoading=!1},methods:{fetchData:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var a,s,e,r,n,i,o,c,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E["a"].dashboard.getDashboard();case 3:if(a=t.sent,s=a.data,e=a.statusText,"success"===s.status&&"OK"===e){t.next=8;break}throw new Error(s.message);case 8:for(r in this.data)n=s[r],i=n.labels,o=n.data,c=n.average,l=n.total,this.data[r]=R(R({},this.data[r]),{},{average:c,labels:i,total:l,datasets:[R(R({},this.data[r].datasets[0]),{},{data:o})]});this.comments=s.comments,this.isLoading=!1,t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](0),this.isLoading=!1,H["a"].fire({type:"error",title:"無法取得資料，請稍後再試"});case 17:case"end":return t.stop()}}),t,this,[[0,13]])})));function a(){return t.apply(this,arguments)}return a}()}},$=W,q=(s("87f0"),Object(g["a"])($,n,i,!1,null,"5d781dcc",null));a["default"]=q.exports},8425:function(t,a,s){"use strict";s("f490")},"87f0":function(t,a,s){"use strict";s("af28")},af28:function(t,a,s){},bcc2:function(t,a,s){"use strict";var e=s("2fa3");a["a"]={restaurants:{get:function(){return e["b"].get("/owner")},post:function(t){return e["b"].post("/owner",t)},put:function(t){return e["b"].put("/owner",t)}},dishes:{getDishes:function(){return e["b"].get("/owner/dishes")},postNew:function(t){return e["b"].post("/owner/dishes",t)},getEdit:function(t){var a=t.dishId;return e["b"].get("/owner/dishes/".concat(a))},putEdit:function(t){var a=t.dishId,s=t.formData;return e["b"].put("/owner/dishes/".concat(a,"/edit"),s)},deleteDish:function(t){var a=t.dishId;return e["b"].delete("/owner/dishes/".concat(a))}},menu:{getMenu:function(t){var a=t.ran;return e["b"].get("/owner/menu?ran=".concat(a))},putMenu:function(t){return e["b"].put("/owner/menu",t)}},orders:{getOrders:function(){return e["b"].get("/owner/orders")}},dashboard:{getDashboard:function(){return e["b"].get("/owner/dashboard")}}}},d2ef:function(t,a,s){},d691:function(t,a,s){"use strict";var e=function(){var t=this,a=t._self._c;return a("div",{staticClass:"placeholder-message p-2"},[a("h5",{staticClass:"m-0"},[t._t("default")],2)])},r=[],n=(s("4948"),s("2877")),i={},o=Object(n["a"])(i,e,r,!1,null,"d84b3480",null);a["a"]=o.exports},dd72:function(t,a,s){"use strict";s("d2ef")},de1b:function(t,a,s){"use strict";s("4345")},f490:function(t,a,s){}}]);
//# sourceMappingURL=chunk-271b3191.14b74160.js.map