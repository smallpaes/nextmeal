(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5a62f0f8"],{1806:function(t,a,e){},4747:function(t,a,e){"use strict";e("f473")},6945:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t._self._c;return a("section",{staticClass:"wrapper d-flex vh-100"},[a("AdminSideNavBar",{attrs:{"nav-is-open":t.navIsOpen}}),a("section",{staticClass:"restaurant flex-fill"},[a("NavbarToggler",{attrs:{"nav-is-open":t.navIsOpen},on:{"toggle-navbar":function(a){t.navIsOpen=!t.navIsOpen}}}),a("h1",{staticClass:"restaurant-title"},[t._v(" 編輯餐廳 ")]),a("hr",{staticClass:"restaurant-divider"}),t.isLoading?a("Loader",{attrs:{height:"300px"}}):t._e(),a("transition",{attrs:{name:"slide"}},[t.isLoading?t._e():a("RestaurantInfoForm",{staticClass:"restaurant-form",attrs:{"initial-restaurant":t.restaurant,categories:t.categories,"initial-processing":t.isProcessing},on:{"after-submit":t.updateRestaurant,"after-delete":t.deleteRestaurant}})],1)],1)],1)},r=[],n=e("c7eb"),i=e("5530"),c=e("15fd"),u=e("1da1"),o=(e("d9e2"),e("14d9"),e("e9e5")),d=e("0f14d"),l=e("5073"),v=e("555f"),p=e("be6c"),f=e("2fa3"),m=["opening_hour","closing_hour"],g={components:{AdminSideNavBar:o["a"],NavbarToggler:d["a"],RestaurantInfoForm:l["a"],Loader:v["a"]},data:function(){return{restaurant:{},categories:[],isLoading:!0,isProcessing:!1,navIsOpen:!1}},created:function(){var t=this.$route.params.restaurant_id;this.fetchRestaurantData(t)},beforeRouteUpdate:function(t,a,e){var s=t.params.restaurant_id;this.fetchRestaurantData(s),e()},methods:{fetchRestaurantData:function(t){var a=this;return Object(u["a"])(Object(n["a"])().mark((function e(){var s,r,u,o,d,l,v,g;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p["a"].restaurants.getRestaurant({restaurantId:t});case 3:if(s=e.sent,r=s.data,u=s.statusText,"success"===r.status&&"OK"===u){e.next=8;break}throw new Error(r.message);case 8:o=r.restaurant,d=o.opening_hour,l=o.closing_hour,v=Object(c["a"])(o,m),g=r.categories,a.restaurant=Object(i["a"])(Object(i["a"])({},a.restaurant),{},{openingHour:d,closingHour:l},v),a.categories=g,a.hasRestaurantData=!0,a.isLoading=!1,e.next=20;break;case 15:e.prev=15,e.t0=e["catch"](0),a.isLoading=!1,f["a"].fire({type:"error",title:"無法取得資料，請稍後再試"}),a.$router.go(-1);case 20:case"end":return e.stop()}}),e,null,[[0,15]])})))()},updateRestaurant:function(t){var a=this;return Object(u["a"])(Object(n["a"])().mark((function e(){var s,r,i,c;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a.isProcessing=!0,s=a.$route.params.restaurant_id,e.next=5,p["a"].restaurants.putRestaurant({restaurantId:s,formData:t});case 5:if(r=e.sent,i=r.data,c=r.statusText,"success"===i.status&&"OK"===c){e.next=10;break}throw new Error(i.message);case 10:a.$router.push("/admin"),e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](0),a.isProcessing=!1,f["a"].fire({type:"error",title:"無法更新資料，請稍後再試"});case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))()},deleteRestaurant:function(){var t=this;return Object(u["a"])(Object(n["a"])().mark((function a(){var e,s,r,i;return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e=t.$route.params.restaurant_id,a.prev=1,t.isProcessing=!0,a.next=5,p["a"].restaurants.deleteRestaurant({restaurantId:e});case 5:if(s=a.sent,r=s.data,i=s.statusText,"success"===r.status&&"OK"===i){a.next=10;break}throw new Error(r.message);case 10:t.$router.push("/admin"),a.next=17;break;case 13:a.prev=13,a.t0=a["catch"](1),t.isProcessing=!1,f["a"].fire({type:"error",title:"無法刪除資料，請稍後再試"});case 17:case"end":return a.stop()}}),a,null,[[1,13]])})))()}}},b=g,h=(e("4747"),e("2877")),C=Object(h["a"])(b,s,r,!1,null,"60b36126",null);a["default"]=C.exports},be6c:function(t,a,e){"use strict";e("b0c0"),e("d3b7"),e("3ca3"),e("ddb0"),e("9861"),e("25f0");var s=e("2fa3");a["a"]={restaurants:{getRestaurants:function(t){var a=t.name,e=t.dist,r=t.page,n=new URLSearchParams({name:a,dist:e,page:r});return s["b"].get("/admin/restaurants?".concat(n.toString()))},getRestaurant:function(t){var a=t.restaurantId;return s["b"].get("/admin/restaurants/".concat(a))},putRestaurant:function(t){var a=t.restaurantId,e=t.formData;return s["b"].put("/admin/restaurants/".concat(a),e)},deleteRestaurant:function(t){var a=t.restaurantId;return s["b"].delete("/admin/restaurants/".concat(a))}},users:{getUser:function(t){var a=t.userId;return s["b"].get("/admin/users/".concat(a))},getUsers:function(t){var a=t.subscriptionStatus,e=t.name,r=t.page,n=new URLSearchParams({sub_status:a,name:e,page:r});return s["b"].get("/admin/users?".concat(n.toString()))},deleteUser:function(t){var a=t.userId;return s["b"].delete("/admin/users/".concat(a))},putUser:function(t){var a=t.userId,e=t.formData;return s["b"].put("/admin/users/".concat(a),e)}},orders:{getOrders:function(t){var a=t.id,e=t.date,r=t.status,n=t.page,i=new URLSearchParams({page:n,order_id:a,date:e,order_status:r});return s["b"].get("/admin/orders?".concat(i.toString()))},putOrder:function(t){var a=t.orderId;return s["b"].put("/admin/orders/".concat(a),{})}},dashboard:{getDashboard:function(){return s["b"].get("/admin/dashboard")}}}},e9e5:function(t,a,e){"use strict";var s=function(){var t=this,a=t._self._c;return a("nav",{staticClass:"sidenav shadow",class:{opened:t.navIsOpen}},[a("div",{staticClass:"sidenav-brand-container text-center py-5"},[a("router-link",{staticClass:"sidenav-brand",attrs:{to:{name:"home"}}},[t._v(" NextMeal ")])],1),a("ul",{staticClass:"sidenav-nav px-0 text-center"},[a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:{name:"admin-restaurants"},"active-class":"active"}},[a("span",{staticClass:"icon"},[a("i",{staticClass:"fas fa-store"})]),a("span",{staticClass:"nav-link-description"},[t._v("餐廳")])])],1),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:{name:"admin-users"},"active-class":"active"}},[a("span",{staticClass:"icon"},[a("i",{staticClass:"fas fa-user"})]),a("span",{staticClass:"nav-link-description"},[t._v("用戶")])])],1),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:{name:"admin-orders"},"active-class":"active"}},[a("span",{staticClass:"icon"},[a("i",{staticClass:"fas fa-clipboard-list"})]),a("span",{staticClass:"nav-link-description"},[t._v("訂單")])])],1),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:{name:"admin-dashboard"},"active-class":"active"}},[a("span",{staticClass:"icon"},[a("i",{staticClass:"fas fa-chart-line"})]),a("span",{staticClass:"nav-link-description"},[t._v("分析")])])],1),a("li",{staticClass:"nav-divider"}),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{href:"#",role:"button"},on:{click:t.logout}},[t._m(0),a("span",{staticClass:"nav-link-description"},[t._v("登出")])])])])])},r=[function(){var t=this,a=t._self._c;return a("span",{staticClass:"icon"},[a("i",{staticClass:"fas fa-sign-out-alt"})])}],n=(e("14d9"),{props:{navIsOpen:{type:Boolean,required:!0}},methods:{logout:function(){this.$store.commit("revokeAuthentication"),this.$router.push("/")}}}),i=n,c=(e("ed73"),e("2877")),u=Object(c["a"])(i,s,r,!1,null,"d34dbf0e",null);a["a"]=u.exports},ed73:function(t,a,e){"use strict";e("1806")},f473:function(t,a,e){}}]);
//# sourceMappingURL=chunk-5a62f0f8.9e12717d.js.map