{"version":3,"sources":["webpack:///./src/views/AdminRestaurants.vue?122f","webpack:///./src/views/AdminRestaurants.vue","webpack:///./src/components/AdminRestaurantsTable.vue","webpack:///src/components/AdminRestaurantsTable.vue","webpack:///./src/components/AdminRestaurantsTable.vue?7b40","webpack:///./src/components/AdminRestaurantsTable.vue?8c02","webpack:///src/views/AdminRestaurants.vue","webpack:///./src/views/AdminRestaurants.vue?26f2","webpack:///./src/views/AdminRestaurants.vue?d58b","webpack:///./src/components/AdminRestaurantsTable.vue?e0de"],"names":["render","_vm","this","_c","_self","staticClass","attrs","navIsOpen","on","$event","_v","districts","isLoading","handleAfterFilter","name","dist","$route","query","scopedSlots","_u","key","fn","proxy","restaurants","length","_e","totalPage","Number","page","staticRenderFns","_m","_l","restaurantData","restaurant","id","$router","push","params","restaurant_id","_s","_f","location","class","rating","Comments","orderCount","components","SkelentonBox","mixins","padEndFilter","textTruncateFilter","props","type","Array","required","Boolean","default","computed","component","AdminSideNavBar","NavbarToggler","AdminFilterPanel","AdminRestaurantsTable","PlaceholderMessage","Pagination","data","created","_this$$route$query","fetchRestaurants","beforeRouteUpdate","to","from","next","_to$query","methods","_fetchRestaurants","_asyncToGenerator","regeneratorRuntime","mark","_callee","_yield$adminAPI$resta","statusText","_args","arguments","wrap","_context","prev","undefined","adminAPI","getRestaurants","sent","status","Error","message","map","district","pages","t0","Toast","fire","title","stop","apply"],"mappings":"2IAAA,W,mECAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,UAAU,CAACE,YAAY,yBAAyB,CAACF,EAAG,kBAAkB,CAACG,MAAM,CAAC,cAAcL,EAAIM,aAAaJ,EAAG,UAAU,CAACE,YAAY,yBAAyB,CAACF,EAAG,gBAAgB,CAACG,MAAM,CAAC,cAAcL,EAAIM,WAAWC,GAAG,CAAC,gBAAgB,SAASC,GAAQR,EAAIM,WAAaN,EAAIM,cAAcJ,EAAG,KAAK,CAACE,YAAY,qBAAqB,CAACJ,EAAIS,GAAG,wBAAwBP,EAAG,KAAK,CAACE,YAAY,wBAAwBF,EAAG,mBAAmB,CAACG,MAAM,CAAC,QAAUL,EAAIU,UAAU,aAAaV,EAAIW,WAAWJ,GAAG,CAAC,eAAe,SAASC,GAAQ,OAAOR,EAAIY,kBAAkB,CAACC,KAAML,EAAQM,KAAMd,EAAIe,OAAOC,MAAMF,QAAQ,eAAe,SAASN,GAAQ,OAAOR,EAAIY,kBAAkB,CAACC,KAAMb,EAAIe,OAAOC,MAAMH,KAAMC,KAAMN,MAAWS,YAAYjB,EAAIkB,GAAG,CAAC,CAACC,IAAI,eAAeC,GAAG,WAAW,MAAO,CAACpB,EAAIS,GAAG,4BAA4BY,OAAM,OAAUnB,EAAG,aAAa,CAACG,MAAM,CAAC,KAAO,QAAQ,OAAS,KAAK,CAAEL,EAAIW,YAAcX,EAAIW,WAAaX,EAAIsB,YAAYC,OAAS,EAAGrB,EAAG,wBAAwB,CAACiB,IAAI,QAAQd,MAAM,CAAC,aAAaL,EAAIW,UAAU,YAAcX,EAAIsB,eAAetB,EAAIwB,MAAM,GAAGtB,EAAG,aAAa,CAACG,MAAM,CAAC,KAAO,SAAS,CAAEL,EAAIyB,UAAY,EAAGvB,EAAG,aAAa,CAACE,YAAY,OAAOC,MAAM,CAAC,aAAaL,EAAIyB,UAAU,eAAeC,OAAO1B,EAAIe,OAAOC,MAAMW,OAAS,EAAE,MAAQ,CAACd,KAAMZ,KAAKc,OAAOC,MAAMH,KAAMC,KAAMb,KAAKc,OAAOC,MAAMF,SAASd,EAAIwB,MAAM,GAAKxB,EAAIW,WAAwC,IAA3BX,EAAIsB,YAAYC,OAAsKvB,EAAIwB,KAA5JtB,EAAG,qBAAqB,CAACiB,IAAI,cAAcf,YAAY,2BAA2B,CAACF,EAAG,IAAI,CAACE,YAAY,uBAAuBJ,EAAIS,GAAG,oBAA6B,IAAI,IAEvkDmB,EAAkB,G,6DCFlB7B,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,yDAAyD,CAACF,EAAG,QAAQ,CAACE,YAAY,aAAa,CAACJ,EAAI6B,GAAG,GAAG3B,EAAG,QAAQF,EAAI8B,GAAI9B,EAAI+B,gBAAgB,SAASC,GAAY,OAAO9B,EAAG,KAAK,CAACiB,IAAIa,EAAWC,GAAG1B,GAAG,CAAC,MAAQ,SAASC,IAAQR,EAAIW,WAAmBX,EAAIkC,QAAQC,KAAK,CAACtB,KAAK,wBAAyBuB,OAAQ,CAACC,cAAeL,EAAWC,SAAS,CAAC/B,EAAG,KAAK,CAAEF,EAAIW,UAAWT,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,WAAW,CAACL,EAAIS,GAAG,iBAAiBT,EAAIsC,GAAGtC,EAAIuC,GAAG,eAAPvC,CAAuBgC,EAAWnB,KAAK,KAAK,kBAAkB,GAAGX,EAAG,KAAK,CAAEF,EAAIW,UAAWT,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,UAAU,CAACL,EAAIS,GAAG,iBAAiBT,EAAIsC,GAAGN,EAAWQ,UAAU,kBAAkB,GAAGtC,EAAG,KAAK,CAAEF,EAAIW,UAAWT,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,UAAU,CAACH,EAAG,OAAO,CAACE,YAAY,0BAA0BqC,MAAM,CAAC,cAAeT,EAAWU,QAAU,EAAG,aAAcV,EAAWU,OAAS,IAAI,CAAC1C,EAAIS,GAAG,OAAOP,EAAG,OAAO,CAACE,YAAY,SAASqC,MAAM,CAAC,cAAeT,EAAWU,QAAU,EAAG,aAAcV,EAAWU,OAAS,IAAI,CAAC1C,EAAIS,GAAGT,EAAIsC,GAAGtC,EAAIuC,GAAG,SAAPvC,CAAiBgC,EAAWU,cAAc,GAAGxC,EAAG,KAAK,CAACE,YAAY,WAAW,CAAEJ,EAAIW,UAAWT,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,UAAU,CAACH,EAAG,IAAI,CAACE,YAAY,+CAA+CJ,EAAIS,GAAG,iBAAiBT,EAAIsC,GAAGN,EAAWW,SAASpB,QAAQ,kBAAkB,GAAGrB,EAAG,KAAK,CAAEF,EAAIW,UAAWT,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,UAAU,CAACH,EAAG,IAAI,CAACE,YAAY,6CAA6CJ,EAAIS,GAAG,iBAAiBT,EAAIsC,GAAGN,EAAWY,YAAY,kBAAkB,QAAO,QAErjDhB,EAAkB,CAAC,WAAY,IAAI5B,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,QAAQ,CAACA,EAAG,KAAK,CAACA,EAAG,KAAK,CAACG,MAAM,CAAC,MAAQ,QAAQ,CAACL,EAAIS,GAAG,8BAA8BP,EAAG,KAAK,CAACG,MAAM,CAAC,MAAQ,QAAQ,CAACL,EAAIS,GAAG,8BAA8BP,EAAG,KAAK,CAACG,MAAM,CAAC,MAAQ,QAAQ,CAACL,EAAIS,GAAG,8BAA8BP,EAAG,KAAK,CAACG,MAAM,CAAC,MAAQ,QAAQ,CAACL,EAAIS,GAAG,8BAA8BP,EAAG,KAAK,CAACG,MAAM,CAAC,MAAQ,QAAQ,CAACL,EAAIS,GAAG,qC,wBC2F7Y,GACfoC,WAAA,CACAC,qBAEAC,OAAA,CAAAC,OAAAC,QACAC,MAAA,CACA5B,YAAA,CACA6B,KAAAC,MACAC,UAAA,GAEA1C,UAAA,CACAwC,KAAAG,QACAC,SAAA,IAGAC,SAAA,CACAzB,eAAA,WACA,YAAApB,UAAA,GACA,KAAAW,eC/G+V,I,wBCQ3VmC,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,EAAAA,E,wDCwDA,GACfZ,WAAA,CACAa,uBACAC,qBACAC,wBACAC,wBACAC,0BACAC,mBAEAC,KAAA,WACA,OACA1C,YAAA,GACAZ,UAAA,GACAe,UAAA,KACAd,WAAA,EACAL,WAAA,IAGA2D,QAAA,WACA,IAAAC,EAAA,KAAAnD,OAAAC,MAAAF,EAAAoD,EAAApD,KAAAD,EAAAqD,EAAArD,KAAAc,EAAAuC,EAAAvC,KACA,KAAAwC,iBAAArD,EAAAD,EAAAc,IAEAyC,kBAAA,SAAAC,EAAAC,EAAAC,GACA,IAAAC,EAAAH,EAAArD,MAAAF,EAAA0D,EAAA1D,KAAAD,EAAA2D,EAAA3D,KAAAc,EAAA6C,EAAA7C,KACA,KAAAwC,iBAAArD,EAAAD,EAAAc,GACA4C,KAEAE,QAAA,CACAN,iBAAA,eAAAO,EAAAC,eAAAC,mBAAAC,MAAA,SAAAC,IAAA,IAAAhE,EAAAD,EAAAc,EAAAoD,EAAAf,EAAAgB,EAAAC,EAAAC,UAAA,OAAAN,mBAAAO,MAAA,SAAAC,GAAA,eAAAA,EAAAC,KAAAD,EAAAb,MAAA,OAIA,OAJAzD,EAAAmE,EAAA1D,OAAA,QAAA+D,IAAAL,EAAA,GAAAA,EAAA,MAAApE,EAAAoE,EAAA1D,OAAA,QAAA+D,IAAAL,EAAA,GAAAA,EAAA,MAAAtD,EAAAsD,EAAA1D,OAAA,QAAA+D,IAAAL,EAAA,GAAAA,EAAA,KAAAG,EAAAC,KAAA,EAGA,KAAA1E,WAAA,EACAyE,EAAAb,KAAA,EACAgB,OAAAjE,YAAAkE,eAAA,CAAA1E,OAAAD,OAAAc,SAAA,UAAAoD,EAAAK,EAAAK,KAAAzB,EAAAe,EAAAf,KAAAgB,EAAAD,EAAAC,WAEA,YAAAhB,EAAA0B,QAAA,OAAAV,EAAA,CAAAI,EAAAb,KAAA,mBAAAoB,MAAA3B,EAAA4B,SAAA,QAEA,KAAAtE,YAAA0C,EAAA1C,wBACA,KAAAZ,UAAAsD,EAAAtD,UAAAmF,KAAA,SAAAC,GAAA,OAAAA,EAAA,mBAEA,KAAArE,UAAAuC,EAAA1C,YAAAyE,MAEA,KAAApF,WAAA,EAAAyE,EAAAb,KAAA,iBAAAa,EAAAC,KAAA,GAAAD,EAAAY,GAAAZ,EAAA,YAGA,KAAAzE,WAAA,EAEAsF,OAAAC,KAAA,CACA/C,KAAA,QACAgD,MAAA,iBACA,yBAAAf,EAAAgB,UAAAtB,EAAA,4BAAAX,IAAA,OAAAO,EAAA2B,MAAA,KAAAnB,WAAA,OAAAf,EAtBA,GAyBAvD,kBAAA,SAAAI,GACA,KAAAkB,QAAAC,KAAA,CAAAtB,KAAA,oBAAAG,aCjI0V,ICQtV,G,UAAY,eACd,EACAjB,EACA6B,GACA,EACA,KACA,WACA,OAIa,e,kECnBf","file":"js/chunk-1dfc0a63.9c88c6c7.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminRestaurants.vue?vue&type=style&index=0&id=414ebf8e&prod&lang=scss&scoped=true&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('section',{staticClass:\"wrapper d-flex vh-100\"},[_c('AdminSideNavBar',{attrs:{\"nav-is-open\":_vm.navIsOpen}}),_c('section',{staticClass:\"restaurants flex-fill\"},[_c('NavbarToggler',{attrs:{\"nav-is-open\":_vm.navIsOpen},on:{\"toggle-navbar\":function($event){_vm.navIsOpen = !_vm.navIsOpen}}}),_c('h1',{staticClass:\"restaurants-title\"},[_vm._v(\"\\n      餐廳管理\\n    \")]),_c('hr',{staticClass:\"restaurants-divider\"}),_c('AdminFilterPanel',{attrs:{\"options\":_vm.districts,\"is-loading\":_vm.isLoading},on:{\"after-search\":function($event){return _vm.handleAfterFilter({name: $event, dist: _vm.$route.query.dist})},\"after-filter\":function($event){return _vm.handleAfterFilter({name: _vm.$route.query.name, dist: $event})}},scopedSlots:_vm._u([{key:\"filterOption\",fn:function(){return [_vm._v(\"\\n        篩選地區\\n      \")]},proxy:true}])}),_c('transition',{attrs:{\"name\":\"slide\",\"appear\":\"\"}},[(_vm.isLoading || !_vm.isLoading && _vm.restaurants.length > 0)?_c('AdminRestaurantsTable',{key:\"table\",attrs:{\"is-loading\":_vm.isLoading,\"restaurants\":_vm.restaurants}}):_vm._e()],1),_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.totalPage > 1)?_c('Pagination',{staticClass:\"mt-4\",attrs:{\"total-page\":_vm.totalPage,\"current-page\":Number(_vm.$route.query.page) || 1,\"query\":{name: this.$route.query.name, dist: this.$route.query.dist}}}):_vm._e()],1),(!_vm.isLoading && _vm.restaurants.length === 0)?_c('PlaceholderMessage',{key:\"placeholder\",staticClass:\"restaurants-placeholder\"},[_c('i',{staticClass:\"fas fa-search mr-2\"}),_vm._v(\"沒有符合的結果\\n    \")]):_vm._e()],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"table-wrapper table-borderless table-hover rounded-sm\"},[_c('table',{staticClass:\"table m-0\"},[_vm._m(0),_c('tbody',_vm._l((_vm.restaurantData),function(restaurant){return _c('tr',{key:restaurant.id,on:{\"click\":function($event){_vm.isLoading ? null : _vm.$router.push({name:'admin-restaurant-edit', params: {restaurant_id: restaurant.id}})}}},[_c('td',[(_vm.isLoading)?_c('SkelentonBox',{attrs:{\"width\":'100px'}}):[_vm._v(\"\\n            \"+_vm._s(_vm._f(\"textTruncate\")(restaurant.name,10))+\"\\n          \")]],2),_c('td',[(_vm.isLoading)?_c('SkelentonBox',{attrs:{\"width\":'50px'}}):[_vm._v(\"\\n            \"+_vm._s(restaurant.location)+\"\\n          \")]],2),_c('td',[(_vm.isLoading)?_c('SkelentonBox',{attrs:{\"width\":'43px'}}):[_c('span',{staticClass:\"d-none d-md-inline pr-1\",class:{'high-rating': restaurant.rating >= 4, 'low-rating': restaurant.rating < 4}},[_vm._v(\"★\")]),_c('span',{staticClass:\"rating\",class:{'high-rating': restaurant.rating >= 4, 'low-rating': restaurant.rating < 4}},[_vm._v(_vm._s(_vm._f(\"padEnd\")(restaurant.rating)))])]],2),_c('td',{staticClass:\"comment\"},[(_vm.isLoading)?_c('SkelentonBox',{attrs:{\"width\":'30px'}}):[_c('i',{staticClass:\"far fa-comment-alt mr-1 d-none d-md-inline\"}),_vm._v(\"\\n            \"+_vm._s(restaurant.Comments.length)+\"\\n          \")]],2),_c('td',[(_vm.isLoading)?_c('SkelentonBox',{attrs:{\"width\":'30px'}}):[_c('i',{staticClass:\"far fa-chart-bar mr-1 d-none d-md-inline\"}),_vm._v(\"\\n            \"+_vm._s(restaurant.orderCount)+\"\\n          \")]],2)])}),0)])])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('thead',[_c('tr',[_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"\\n          名稱\\n        \")]),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"\\n          地區\\n        \")]),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"\\n          評分\\n        \")]),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"\\n          評論\\n        \")]),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"\\n          成交量\\n        \")])])])\n}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"table-wrapper table-borderless table-hover rounded-sm \">\n    <table class=\"table m-0\">\n      <thead>\n        <tr>\n          <th scope=\"col\">\n            名稱\n          </th>\n          <th scope=\"col\">\n            地區\n          </th>\n          <th scope=\"col\">\n            評分\n          </th>\n          <th scope=\"col\">\n            評論\n          </th>\n          <th scope=\"col\">\n            成交量\n          </th>\n        </tr>\n      </thead>\n      <tbody>\n        <!--Display data-->\n        <tr\n          v-for=\"restaurant in restaurantData\"\n          :key=\"restaurant.id\"\n          @click=\"isLoading ? null : $router.push({name:'admin-restaurant-edit', params: {restaurant_id: restaurant.id}})\"\n        >\n          <td>\n            <SkelentonBox\n              v-if=\"isLoading\"\n              :width=\"'100px'\"\n            />\n            <template v-else>\n              {{ restaurant.name | textTruncate(10) }}\n            </template>\n          </td>\n          <td>\n            <SkelentonBox\n              v-if=\"isLoading\"\n              :width=\"'50px'\"\n            />\n            <template v-else>\n              {{ restaurant.location }}\n            </template>\n          </td>\n          <td>\n            <SkelentonBox\n              v-if=\"isLoading\"\n              :width=\"'43px'\"\n            />\n            <template v-else>\n              <span\n                class=\"d-none d-md-inline pr-1\"\n                :class=\"{'high-rating': restaurant.rating >= 4, 'low-rating': restaurant.rating < 4}\"\n              >&#9733;</span>\n              <span\n                class=\"rating\"\n                :class=\"{'high-rating': restaurant.rating >= 4, 'low-rating': restaurant.rating < 4}\"\n              >{{ restaurant.rating | padEnd }}</span>\n            </template>\n          </td>\n          <td class=\"comment\">\n            <SkelentonBox\n              v-if=\"isLoading\"\n              :width=\"'30px'\"\n            />\n            <template v-else>\n              <i class=\"far fa-comment-alt mr-1 d-none d-md-inline\" />\n              {{ restaurant.Comments.length }}\n            </template>\n          </td>\n          <td>\n            <SkelentonBox\n              v-if=\"isLoading\"\n              :width=\"'30px'\"\n            />\n            <template v-else>\n              <i class=\"far fa-chart-bar mr-1 d-none d-md-inline\" />\n              {{ restaurant.orderCount }}\n            </template>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</template>\n\n<script>\nimport { padEndFilter, textTruncateFilter } from '../utils/mixins'\nimport SkelentonBox from './Placeholder/SkeletonBox'\n\nexport default {\n  components: {\n    SkelentonBox\n  },\n  mixins: [padEndFilter, textTruncateFilter],\n  props: {\n    restaurants: {\n      type: Array,\n      required: true\n    },\n    isLoading: {\n      type: Boolean,\n      default: false\n    }\n  },\n  computed: {\n    restaurantData () {\n      if (this.isLoading) return 10\n      return this.restaurants\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n$headers: (\n  1: '名稱',\n  2: '地區',\n  3: '評分',\n  4: '評論',\n  5: '成交量'\n);\n\n// table layout for small screen\n@include tableMobile;\n// table layout for large screen\n@include tableFullSize;\n\n.high-rating { color: color(tertiary); }\n.low-rating { color: color(primary); }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminRestaurantsTable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminRestaurantsTable.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AdminRestaurantsTable.vue?vue&type=template&id=1a585bf7&scoped=true&\"\nimport script from \"./AdminRestaurantsTable.vue?vue&type=script&lang=js&\"\nexport * from \"./AdminRestaurantsTable.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AdminRestaurantsTable.vue?vue&type=style&index=0&id=1a585bf7&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1a585bf7\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <section class=\"wrapper d-flex vh-100\">\n    <!--Left Side Navbar-->\n    <AdminSideNavBar :nav-is-open=\"navIsOpen\" />\n\n    <!--Right Side Content-->\n    <section class=\"restaurants flex-fill\">\n      <!--Navbar toggler-->\n      <NavbarToggler\n        :nav-is-open=\"navIsOpen\"\n        @toggle-navbar=\"navIsOpen = !navIsOpen\"\n      />\n      <h1 class=\"restaurants-title\">\n        餐廳管理\n      </h1>\n      <hr class=\"restaurants-divider\">\n\n      <!--Filter And Search Panel-->\n      <AdminFilterPanel\n        :options=\"districts\"\n        :is-loading=\"isLoading\"\n        @after-search=\"handleAfterFilter({name: $event, dist: $route.query.dist})\"\n        @after-filter=\"handleAfterFilter({name: $route.query.name, dist: $event})\"\n      >\n        <template v-slot:filterOption>\n          篩選地區\n        </template>\n      </AdminFilterPanel>\n\n      <!--Restaurant Data Table-->\n      <transition\n        name=\"slide\"\n        appear\n      >\n        <AdminRestaurantsTable\n          v-if=\"isLoading || !isLoading && restaurants.length > 0\"\n          key=\"table\"\n          :is-loading=\"isLoading\"\n          :restaurants=\"restaurants\"\n        />\n      </transition>\n\n      <!--Pagination-->\n      <transition name=\"fade\">\n        <Pagination\n          v-if=\"totalPage > 1\"\n          class=\"mt-4\"\n          :total-page=\"totalPage\"\n          :current-page=\"Number($route.query.page) || 1\"\n          :query=\"{name: this.$route.query.name, dist: this.$route.query.dist}\"\n        />\n      </transition>\n\n      <!--Placeholder Messgae for Empty Data-->\n      <PlaceholderMessage\n        v-if=\"!isLoading && restaurants.length === 0\"\n        key=\"placeholder\"\n        class=\"restaurants-placeholder\"\n      >\n        <i class=\"fas fa-search mr-2\" />沒有符合的結果\n      </PlaceholderMessage>\n    </section>\n  </section>\n</template>\n\n<script>\nimport AdminSideNavBar from '../components/Navbar/AdminSideNavBar'\nimport NavbarToggler from '../components/Navbar/NavbarToggler'\nimport AdminFilterPanel from '../components/AdminFilterPanel'\nimport AdminRestaurantsTable from '../components/AdminRestaurantsTable.vue'\nimport PlaceholderMessage from '../components/Placeholder/Message'\nimport Pagination from '../components/Pagination'\nimport adminAPI from '../apis/admin'\nimport { Toast } from '../utils/helpers'\n\nexport default {\n  components: {\n    AdminSideNavBar,\n    NavbarToggler,\n    AdminFilterPanel,\n    AdminRestaurantsTable,\n    PlaceholderMessage,\n    Pagination\n  },\n  data () {\n    return {\n      restaurants: [],\n      districts: [],\n      totalPage: null,\n      isLoading: true,\n      navIsOpen: false\n    }\n  },\n  created () {\n    const { dist, name, page } = this.$route.query\n    this.fetchRestaurants(dist, name, page)\n  },\n  beforeRouteUpdate (to, from, next) {\n    const { dist, name, page } = to.query\n    this.fetchRestaurants(dist, name, page)\n    next()\n  },\n  methods: {\n    async fetchRestaurants (dist = '', name = '', page = 1) {\n      try {\n        // update loading status\n        this.isLoading = true\n        // fetch data from API\n        const { data, statusText } = await adminAPI.restaurants.getRestaurants({ dist, name, page })\n        // error handling\n        if (data.status !== 'success' || statusText !== 'OK') throw new Error(data.message)\n        // store data\n        this.restaurants = data.restaurants.restaurants\n        this.districts = data.districts.map(district => district['chinese_name'])\n        // update page data\n        this.totalPage = data.restaurants.pages\n        // update loading status\n        this.isLoading = false\n      } catch (error) {\n        // update loading status\n        this.isLoading = false\n        // fire error messages\n        Toast.fire({\n          type: 'error',\n          title: '無法取得資料，請稍後再試'\n        })\n      }\n    },\n    handleAfterFilter (query) {\n      this.$router.push({ name: 'admin-restaurants', query })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@include slideAnimation(false);\n@include fadeAnimation(false);\n\n.wrapper { background-color: color(quinary); }\n.restaurants { @include controlPanelLayout; }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminRestaurants.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminRestaurants.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AdminRestaurants.vue?vue&type=template&id=414ebf8e&scoped=true&\"\nimport script from \"./AdminRestaurants.vue?vue&type=script&lang=js&\"\nexport * from \"./AdminRestaurants.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AdminRestaurants.vue?vue&type=style&index=0&id=414ebf8e&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"414ebf8e\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminRestaurantsTable.vue?vue&type=style&index=0&id=1a585bf7&prod&lang=scss&scoped=true&\""],"sourceRoot":""}