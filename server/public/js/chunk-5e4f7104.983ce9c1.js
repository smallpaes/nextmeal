(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e4f7104"],{"0f14d":function(t,e,s){"use strict";var a=function(){var t=this,e=t._self._c;return e("button",{staticClass:"btn hamburger-menu",class:{opened:t.navIsOpen},on:{click:function(e){return t.$emit("toggle-navbar")}}},[e("div",{staticClass:"hamburger-menu-line hamburger-menu-line-1"}),e("div",{staticClass:"hamburger-menu-line hamburger-menu-line-2"}),e("div",{staticClass:"hamburger-menu-line hamburger-menu-line-3"})])},r=[],n={props:{navIsOpen:{type:Boolean,required:!0}}},i=n,c=(s("3e0f"),s("2877")),o=Object(c["a"])(i,a,r,!1,null,"351e4cbb",null);e["a"]=o.exports},"0fe6":function(t,e,s){},"3e0f":function(t,e,s){"use strict";s("0fe6")},"471d":function(t,e,s){"use strict";s("a292")},"6e4c":function(t,e,s){},"8f91":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("section",{staticClass:"wrapper d-flex vh-100"},[e("AdminSideNavBar",{attrs:{"nav-is-open":t.navIsOpen}}),e("section",{staticClass:"user flex-fill"},[e("NavbarToggler",{attrs:{"nav-is-open":t.navIsOpen},on:{"toggle-navbar":function(e){t.navIsOpen=!t.navIsOpen}}}),e("h1",{staticClass:"user-title"},[t._v("\n      編輯用戶\n    ")]),e("hr",{staticClass:"user-divider"}),t.isLoading?e("Loader",{attrs:{height:"300px"}}):t._e(),e("transition",{attrs:{name:"slide"}},[t.isLoading?t._e():e("UserProfileForm",{staticClass:"user-form",attrs:{"initial-user":t.user,roles:t.roles,"initial-processing":t.isProcessing,categories:t.categories},on:{"after-submit":t.handleAfterSubmit,"after-delete":t.handleAfterDelete}})],1)],1)],1)},r=[],n=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),i=(s("96cf"),s("3b8d")),c=s("e9e5"),o=s("0f14d"),u=s("5cf3"),l=s("555f"),d=s("be6c"),f=s("2fa3");function p(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function v(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?p(Object(s),!0).forEach((function(e){Object(n["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):p(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var m={components:{AdminSideNavBar:c["a"],NavbarToggler:o["a"],UserProfileForm:u["a"],Loader:l["a"]},data:function(){return{user:{name:"",email:"",role:"",prefer:"",dob:"",image:"",lng:"",lat:"",location:""},categories:[],roles:[],isLoading:!0,isProcessing:!1,navIsOpen:!1}},created:function(){var t=this.$route.params.user_id;this.fetchUser(t)},methods:{fetchUser:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var s,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d["a"].users.getUser({userId:e});case 3:if(s=t.sent,a=s.data,r=s.statusText,"success"===a.status&&"OK"===r){t.next=8;break}throw new Error(a.message);case 8:this.user=v(v(v({},this.user),a.user),{},{dob:a.user.dob.slice(0,10),image:a.user.avatar}),this.categories=a.categories||this.categories,this.roles=a.roles||this.roles,this.isLoading=!1,t.next=19;break;case 14:t.prev=14,t.t0=t["catch"](0),this.isLoading=!1,f["a"].fire({type:"error",title:"無法取得用戶資料，請稍後再試"}),this.$router.go(-1);case 19:case"end":return t.stop()}}),t,this,[[0,14]])})));function e(e){return t.apply(this,arguments)}return e}(),handleAfterSubmit:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var s,a,r,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=e.formData,t.prev=1,this.isProcessing=!0,a=this.$route.params.user_id,t.next=6,d["a"].users.putUser({userId:a,formData:s});case 6:if(r=t.sent,n=r.data,i=r.statusText,"success"===n.status&&"OK"===i){t.next=11;break}throw new Error(n.message);case 11:this.isProcessing=!1,this.$router.push({name:"admin-users"}),t.next=19;break;case 15:t.prev=15,t.t0=t["catch"](1),this.isProcessing=!1,f["a"].fire({type:"error",title:"無法更新用戶資料，請稍後再試"});case 19:case"end":return t.stop()}}),t,this,[[1,15]])})));function e(e){return t.apply(this,arguments)}return e}(),handleAfterDelete:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,s,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.isProcessing=!0,e=this.$route.params.user_id,t.next=5,d["a"].users.deleteUser({userId:e});case 5:if(s=t.sent,a=s.data,r=s.statusText,"success"===a.status&&"OK"===r){t.next=10;break}throw new Error(a.message);case 10:this.isProcessing=!1,this.$router.push({name:"admin-users"}),t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](0),this.isProcessing=!1,f["a"].fire({type:"error",title:"無法刪除用戶資料，請稍後再試"});case 18:case"end":return t.stop()}}),t,this,[[0,14]])})));function e(){return t.apply(this,arguments)}return e}()}},h=m,g=(s("471d"),s("2877")),b=Object(g["a"])(h,a,r,!1,null,"61fbf74f",null);e["default"]=b.exports},a292:function(t,e,s){},be6c:function(t,e,s){"use strict";s("6b54"),s("7f7f");var a=s("2fa3");e["a"]={restaurants:{getRestaurants:function(t){var e=t.name,s=t.dist,r=t.page,n=new URLSearchParams({name:e,dist:s,page:r});return a["b"].get("/admin/restaurants?".concat(n.toString()))},getRestaurant:function(t){var e=t.restaurantId;return a["b"].get("/admin/restaurants/".concat(e))},putRestaurant:function(t){var e=t.restaurantId,s=t.formData;return a["b"].put("/admin/restaurants/".concat(e),s)},deleteRestaurant:function(t){var e=t.restaurantId;return a["b"].delete("/admin/restaurants/".concat(e))}},users:{getUser:function(t){var e=t.userId;return a["b"].get("/admin/users/".concat(e))},getUsers:function(t){var e=t.subscriptionStatus,s=t.name,r=t.page,n=new URLSearchParams({sub_status:e,name:s,page:r});return a["b"].get("/admin/users?".concat(n.toString()))},deleteUser:function(t){var e=t.userId;return a["b"].delete("/admin/users/".concat(e))},putUser:function(t){var e=t.userId,s=t.formData;return a["b"].put("/admin/users/".concat(e),s)}},orders:{getOrders:function(t){var e=t.id,s=t.date,r=t.status,n=t.page,i=new URLSearchParams({page:n,order_id:e,date:s,order_status:r});return a["b"].get("/admin/orders?".concat(i.toString()))},putOrder:function(t){var e=t.orderId;return a["b"].put("/admin/orders/".concat(e),{})}},dashboard:{getDashboard:function(){return a["b"].get("/admin/dashboard")}}}},e9e5:function(t,e,s){"use strict";var a=function(){var t=this,e=t._self._c;return e("nav",{staticClass:"sidenav shadow",class:{opened:t.navIsOpen}},[e("div",{staticClass:"sidenav-brand-container text-center py-5"},[e("router-link",{staticClass:"sidenav-brand",attrs:{to:{name:"home"}}},[t._v("\n      NextMeal\n    ")])],1),e("ul",{staticClass:"sidenav-nav px-0 text-center"},[e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:{name:"admin-restaurants"},"active-class":"active"}},[e("span",{staticClass:"icon"},[e("i",{staticClass:"fas fa-store"})]),e("span",{staticClass:"nav-link-description"},[t._v("餐廳")])])],1),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:{name:"admin-users"},"active-class":"active"}},[e("span",{staticClass:"icon"},[e("i",{staticClass:"fas fa-user"})]),e("span",{staticClass:"nav-link-description"},[t._v("用戶")])])],1),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:{name:"admin-orders"},"active-class":"active"}},[e("span",{staticClass:"icon"},[e("i",{staticClass:"fas fa-clipboard-list"})]),e("span",{staticClass:"nav-link-description"},[t._v("訂單")])])],1),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:{name:"admin-dashboard"},"active-class":"active"}},[e("span",{staticClass:"icon"},[e("i",{staticClass:"fas fa-chart-line"})]),e("span",{staticClass:"nav-link-description"},[t._v("分析")])])],1),e("li",{staticClass:"nav-divider"}),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",attrs:{href:"#",role:"button"},on:{click:t.logout}},[t._m(0),e("span",{staticClass:"nav-link-description"},[t._v("登出")])])])])])},r=[function(){var t=this,e=t._self._c;return e("span",{staticClass:"icon"},[e("i",{staticClass:"fas fa-sign-out-alt"})])}],n={props:{navIsOpen:{type:Boolean,required:!0}},methods:{logout:function(){this.$store.commit("revokeAuthentication"),this.$router.push("/")}}},i=n,c=(s("ed73"),s("2877")),o=Object(c["a"])(i,a,r,!1,null,"d34dbf0e",null);e["a"]=o.exports},ed73:function(t,e,s){"use strict";s("6e4c")}}]);
//# sourceMappingURL=chunk-5e4f7104.983ce9c1.js.map