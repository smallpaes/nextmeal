{"version":3,"sources":["webpack:///./src/views/UserProfile.vue","webpack:///src/views/UserProfile.vue","webpack:///./src/views/UserProfile.vue?9911","webpack:///./src/views/UserProfile.vue?9431","webpack:///./src/components/Card/UserProfileCard.vue","webpack:///src/components/Card/UserProfileCard.vue","webpack:///./src/components/Card/UserProfileCard.vue?32aa","webpack:///./src/components/Card/UserProfileCard.vue?0730","webpack:///./src/components/Card/UserProfileCard.vue?cd58","webpack:///./src/views/UserProfile.vue?f159"],"names":["render","_vm","this","_c","_self","staticClass","isLoading","attrs","_e","user","categories","isProcessing","on","handleAfterSubmit","staticRenderFns","components","UserNavbar","UserProfileCard","UserProfileForm","Footer","Loader","data","name","email","role","prefer","dob","image","lng","lat","location","created","fetchUser","methods","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$usersAPI$getPr","statusText","wrap","_context","prev","next","usersAPI","getProfile","sent","status","Error","message","_objectSpread","slice","avatar","t0","Toast","fire","type","title","stop","_ref","_this2","_callee2","formData","storedUserData","_yield$usersAPI$putPr","_context2","putProfile","$store","commit","component","_f","currentUser","_v","_s","subscriptionStatus","subscriptionBalance","filters","getSubscriptionStatus","SkelentonBox","mixins","placeholderAvatarFilter","computed","mapState"],"mappings":"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","file":"js/chunk-e27de6ac.29faa7f9.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('section',{staticClass:\"profile-container\"},[_c('UserNavbar'),(_vm.isLoading)?_c('Loader',{attrs:{\"height\":'100vh'}}):_vm._e(),_c('transition',{attrs:{\"name\":\"slide\"}},[(!_vm.isLoading)?_c('section',{staticClass:\"container pt-4 pb-4 w-100\"},[_c('div',{staticClass:\"profile-wrapper row profil\"},[_c('div',{staticClass:\"profile-content-left col-12 col-md-3 p-2\"},[_c('UserProfileCard')],1),_c('div',{staticClass:\"col-12 col-md-9 p-2\"},[_c('UserProfileForm',{attrs:{\"initial-user\":_vm.user,\"categories\":_vm.categories,\"initial-processing\":_vm.isProcessing},on:{\"after-submit\":_vm.handleAfterSubmit}})],1)])]):_vm._e()]),_c('Footer',{staticClass:\"w-100\"})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <section class=\"profile-container\">\n    <!--Navbar-->\n    <UserNavbar />\n    <!--Loader-->\n    <Loader\n      v-if=\"isLoading\"\n      :height=\"'100vh'\"\n    />\n    <transition name=\"slide\">\n      <section\n        v-if=\"!isLoading\"\n        class=\"container pt-4 pb-4 w-100\"\n      >\n        <div class=\"profile-wrapper row profil\">\n          <!--Profile Card-->\n          <div class=\"profile-content-left col-12 col-md-3 p-2\">\n            <UserProfileCard />\n          </div>\n          <!--Profile Form-->\n          <div class=\"col-12 col-md-9 p-2\">\n            <UserProfileForm\n              :initial-user=\"user\"\n              :categories=\"categories\"\n              :initial-processing=\"isProcessing\"\n              @after-submit=\"handleAfterSubmit\"\n            />\n          </div>\n        </div>\n      </section>\n    </transition>\n    <!--Footer-->\n    <Footer class=\"w-100\" />\n  </section>\n</template>\n\n<script>\nimport UserNavbar from '../components/Navbar/UserNavbar'\nimport Footer from '../components/Footer'\nimport Loader from '../components/Loader'\nimport UserProfileCard from '../components/Card/UserProfileCard'\nimport UserProfileForm from '../components/UserProfileForm'\nimport usersAPI from '../apis/users'\nimport { Toast } from '../utils/helpers'\n\nexport default {\n  components: {\n    UserNavbar,\n    UserProfileCard,\n    UserProfileForm,\n    Footer,\n    Loader\n  },\n  data () {\n    return {\n      user: {\n        name: '',\n        email: '',\n        role: '',\n        prefer: '',\n        dob: '',\n        image: '',\n        lng: '',\n        lat: '',\n        location: ''\n      },\n      categories: [],\n      isLoading: true,\n      isProcessing: false\n    }\n  },\n  created () {\n    this.fetchUser()\n  },\n  methods: {\n    async fetchUser () {\n      try {\n        // fetch data from API\n        const { data, statusText } = await usersAPI.getProfile()\n        // error handling\n        if (data.status !== 'success' || statusText !== 'OK') throw new Error(data.message)\n        // store data\n        this.user = {\n          ...this.user,\n          ...data.user,\n          dob: data.user.dob.slice(0, 10),\n          image: data.user.avatar\n        }\n        this.categories = data.categories || this.categories\n        // update loading status\n        this.isLoading = false\n      } catch (error) {\n        // update loading status\n        this.isLoading = false\n        // fire error messages\n        Toast.fire({\n          type: 'error',\n          title: '無法取得資料，請稍後再試'\n        })\n      }\n    },\n    async handleAfterSubmit ({ formData, storedUserData }) {\n      try {\n        // update processing status\n        this.isProcessing = true\n        // update profile\n        const { data, statusText } = await usersAPI.putProfile({ formData })\n        // error handling\n        if (data.status !== 'success' || statusText !== 'OK') throw new Error(data.message)\n        // update user state to Vuex\n        this.$store.commit('setCurrentUser', storedUserData)\n        // update processing\n        this.isProcessing = false\n        // notify user for successful update\n        Toast.fire({\n          type: 'success',\n          title: '成功更新資料'\n        })\n      } catch (error) {\n        // update loading status\n        this.isProcessing = false\n        // fire error messages\n        Toast.fire({\n          type: 'error',\n          title: '無法更新資料，請稍後再試'\n        })\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@include slideAnimation;\n\n.profile {\n  &-container {\n    display: flex;\n    flex-wrap: wrap;\n    align-content: space-between;\n    height: 100%;\n  }\n\n  &-wrapper { margin-top: 62px; }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserProfile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserProfile.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserProfile.vue?vue&type=template&id=3f3c8c04&scoped=true&\"\nimport script from \"./UserProfile.vue?vue&type=script&lang=js&\"\nexport * from \"./UserProfile.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserProfile.vue?vue&type=style&index=0&id=3f3c8c04&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3f3c8c04\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"profile-card rounded-sm shadow-sm\"},[_c('div',{staticClass:\"profile-card-top\"},[_c('SkelentonBox',{staticClass:\"rounded-circle skelenton-box\",attrs:{\"width\":'120px',\"height\":'120px'}}),_c('img',{attrs:{\"src\":_vm._f(\"placeholderAvatar\")(_vm.currentUser.avatar),\"alt\":\"user avatar\"}}),_c('h5',{staticClass:\"mt-3 profile-card-top-name\"},[_vm._v(\" \"+_vm._s(_vm.currentUser.name)+\" \")]),_c('small',{staticClass:\"profile-top-balance\"},[_vm._v(\" \"+_vm._s(_vm._f(\"getSubscriptionStatus\")(_vm.currentUser.subscriptionStatus))+\" | 剩餘 \"+_vm._s(_vm.currentUser.subscriptionBalance)+\" 餐 \")])],1),_c('hr',{staticClass:\"m-0\"}),_c('div',{staticClass:\"profile-card-bottom\"},[_c('ul',{staticClass:\"nav flex-column\"},[_c('li',{staticClass:\"nav-item\"},[_c('router-link',{staticClass:\"nav-link\",attrs:{\"to\":{name: 'user-profile'}}},[_c('span',{staticClass:\"icon\"},[_c('i',{staticClass:\"fas fa-cog mr-1\"})]),_vm._v(\" 帳戶設定 \")])],1),_c('li',{staticClass:\"nav-item\"},[_c('router-link',{staticClass:\"nav-link\",attrs:{\"to\":{name: 'user-order'},\"active-class\":\"active\"}},[_c('span',{staticClass:\"icon\"},[_c('i',{staticClass:\"fas fa-clipboard-list mr-1\"})]),_vm._v(\" 訂單管理 \")])],1)])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"profile-card rounded-sm shadow-sm\">\n    <!--User Info-->\n    <div class=\"profile-card-top\">\n      <!--Avatar Placeholder Image-->\n      <SkelentonBox\n        :width=\"'120px'\"\n        :height=\"'120px'\"\n        class=\"rounded-circle skelenton-box\"\n      />\n      <!--Avatar-->\n      <img\n        :src=\"currentUser.avatar | placeholderAvatar\"\n        alt=\"user avatar\"\n      >\n      <h5 class=\"mt-3 profile-card-top-name\">\n        {{ currentUser.name }}\n      </h5>\n      <small class=\"profile-top-balance\">\n        {{ currentUser.subscriptionStatus | getSubscriptionStatus }} | 剩餘 {{ currentUser.subscriptionBalance }} 餐\n      </small>\n    </div>\n    <hr class=\"m-0\">\n    <!--Nav-->\n    <div class=\"profile-card-bottom\">\n      <ul class=\"nav flex-column\">\n        <li class=\"nav-item\">\n          <router-link\n            class=\"nav-link\"\n            :to=\"{name: 'user-profile'}\"\n          >\n            <span class=\"icon\"><i class=\"fas fa-cog mr-1\" /></span>\n            帳戶設定\n          </router-link>\n        </li>\n        <li class=\"nav-item\">\n          <router-link\n            class=\"nav-link\"\n            :to=\"{name: 'user-order'}\"\n            active-class=\"active\"\n          >\n            <span class=\"icon\"><i class=\"fas fa-clipboard-list mr-1\" /></span>\n            訂單管理\n          </router-link>\n        </li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script>\nimport SkelentonBox from '../Placeholder/SkeletonBox'\nimport { placeholderAvatarFilter } from '../../utils/mixins'\nimport { mapState } from 'vuex'\n\nexport default {\n  filters: {\n    getSubscriptionStatus: status => {\n      if (status) return '訂閱中'\n      return '未訂閱'\n    }\n  },\n  components: {\n    SkelentonBox\n  },\n  mixins: [placeholderAvatarFilter],\n  computed: {\n    ...mapState(['currentUser'])\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.profile {\n  &-card {\n    background-color: color(quaternary);\n\n    /* User Info */\n    &-top {\n      padding: 1.5rem;\n      text-align: center;\n\n      &-name {\n        font-size: size(md);\n        font-weight: weight(bold);\n      }\n\n      img {\n        position: relative;\n        width: 120px;\n        height: 120px;\n        object-fit: cover;\n        border-radius: 50%;\n      }\n    }\n\n    /* Nav */\n    &-bottom { padding: .5rem 0; }\n  }\n}\n\n.nav {\n  &-item { text-align: center; }\n\n  &-link {\n    @include linkStyling(lighten(color(secondary), 10%));\n    padding: .5rem 1rem;\n    font-size: size(sm);\n\n    &:hover { color: color(primary); }\n\n    &.active {\n      @include pseudoStyling(before, primary, .3, 1.6);\n      color: color(primary);\n    }\n  }\n}\n\n.icon {\n  display: inline-block;\n  width: 25px;\n}\n\n.skelenton-box { position: absolute; }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserProfileCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserProfileCard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserProfileCard.vue?vue&type=template&id=a9ba2c36&scoped=true&\"\nimport script from \"./UserProfileCard.vue?vue&type=script&lang=js&\"\nexport * from \"./UserProfileCard.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserProfileCard.vue?vue&type=style&index=0&id=a9ba2c36&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a9ba2c36\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserProfileCard.vue?vue&type=style&index=0&id=a9ba2c36&prod&lang=scss&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserProfile.vue?vue&type=style&index=0&id=3f3c8c04&prod&lang=scss&scoped=true&\""],"sourceRoot":""}