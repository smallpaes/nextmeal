(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-44fa24ac"],{"0e64":function(t,s,e){},6135:function(t,s,e){"use strict";e.r(s);e("c5f6"),e("7f7f");var a=function(){var t=this,s=t._self._c;return s("section",{staticClass:"wrapper d-flex vh-100"},[s("AdminSideNavBar",{attrs:{"nav-is-open":t.navIsOpen}}),s("section",{staticClass:"users flex-fill"},[s("NavbarToggler",{attrs:{"nav-is-open":t.navIsOpen},on:{"toggle-navbar":function(s){t.navIsOpen=!t.navIsOpen}}}),s("h1",{staticClass:"users-title"},[t._v("\n      用戶管理\n    ")]),s("hr",{staticClass:"users-divider"}),s("AdminFilterPanel",{attrs:{options:t.subscriptionStatus,"input-placeholder":"搜尋名稱","is-loading":t.isLoading},on:{"after-search":function(s){return t.handleAfterFilter({sub_status:t.$route.query.sub_status,name:s})},"after-filter":function(s){return t.handleAfterFilter({sub_status:s,name:t.$route.query.name})}},scopedSlots:t._u([{key:"filterOption",fn:function(){return[t._v("\n        訂閱狀態\n      ")]},proxy:!0}])}),s("transition",{attrs:{name:"slide",appear:""}},[t.isLoading||!t.isLoading&&t.users.length>0?s("AdminUsersTable",{attrs:{"is-loading":t.isLoading,users:t.users}}):t._e()],1),s("transition",{attrs:{name:"fade"}},[t.totalPage>1?s("Pagination",{staticClass:"mt-4",attrs:{"total-page":t.totalPage,"current-page":Number(t.$route.query.page)||1,query:{sub_status:this.$route.query.sub_status,name:this.$route.query.name}}}):t._e()],1),t.isLoading||0!==t.users.length?t._e():s("PlaceholderMessage",{staticClass:"users-placeholder"},[s("i",{staticClass:"fas fa-search mr-2"}),t._v("沒有符合的結果\n    ")])],1)],1)},n=[],r=(e("96cf"),e("3b8d")),i=e("e9e5"),o=e("0f14d"),u=e("13ad"),c=function(){var t=this,s=t._self._c;return s("div",{staticClass:"table-wrapper table-borderless table-hover rounded-sm"},[s("table",{staticClass:"table m-0"},[t._m(0),s("tbody",t._l(t.userData,(function(e){return s("tr",{key:e.id,class:{loading:t.isLoading},on:{click:function(s){!t.isLoading&&t.$router.push({name:"admin-user-edit",params:{user_id:e.id}})}}},[s("td",[t.isLoading?s("SkelentonBox",{attrs:{width:"50px"}}):[t._v("\n            "+t._s(e.name)+"\n          ")]],2),s("td",[t.isLoading?s("SkelentonBox",{attrs:{width:"50px"}}):[t._v("\n            "+t._s(e.role)+"\n          ")]],2),s("td",[t.isLoading?s("SkelentonBox",{attrs:{width:"16px"}}):[s("span",{class:{isTrue:"active"===e.sub_status,isFalse:"inactive"===e.sub_status},domProps:{innerHTML:t._f("getStatusIcon")(e.sub_status)}})]],2),s("td",{staticClass:"comment"},[t.isLoading?s("SkelentonBox",{attrs:{width:"50px"}}):[t._v("\n            "+t._s(t._f("getAmount")(e.sub_description))+"\n          ")]],2),s("td",[t.isLoading?s("SkelentonBox",{attrs:{width:"50px"}}):[t._v("\n            "+t._s(e.order_num)+" 餐\n          ")]],2)])})),0)])])},l=[function(){var t=this,s=t._self._c;return s("thead",[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("\n          名稱\n        ")]),s("th",{attrs:{scope:"col"}},[t._v("\n          用戶權限\n        ")]),s("th",{attrs:{scope:"col"}},[t._v("\n          訂閱狀態\n        ")]),s("th",{attrs:{scope:"col"}},[t._v("\n          訂閱方案\n        ")]),s("th",{attrs:{scope:"col"}},[t._v("\n          點餐量\n        ")])])])}],d=e("d1b6"),p={components:{SkelentonBox:d["a"]},filters:{getStatusIcon:function(t){return"active"===t?'<i class="fas fa-check"></i>':'<i class="fas fa-times"></i>'},getAmount:function(t){return t?"".concat(t.slice(3,5)," 餐"):"-"}},props:{users:{type:Array,required:!0},isLoading:{type:Boolean,default:!1}},computed:{userData:function(){return this.isLoading?10:this.users}}},f=p,h=(e("991c"),e("2877")),g=Object(h["a"])(f,c,l,!1,null,"4c5c7b07",null),v=g.exports,_=e("d691"),m=e("1799"),b=e("be6c"),x=e("2fa3"),L={components:{AdminSideNavBar:i["a"],NavbarToggler:o["a"],AdminFilterPanel:u["a"],AdminUsersTable:v,PlaceholderMessage:_["a"],Pagination:m["a"]},data:function(){return{users:[],subscriptionStatus:["active","inactive"],totalPage:null,isLoading:!0,navIsOpen:!1}},created:function(){var t=this.$route.query,s=t.sub_status,e=t.name,a=t.page;this.fetchUsers(s,e,a)},beforeRouteUpdate:function(t,s,e){var a=t.query,n=a.sub_status,r=a.name,i=a.page;this.fetchUsers(n,r,i),e()},methods:{fetchUsers:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var s,e,a,n,r,i,o=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=o.length>0&&void 0!==o[0]?o[0]:"",e=o.length>1&&void 0!==o[1]?o[1]:"",a=o.length>2&&void 0!==o[2]?o[2]:1,t.prev=3,this.isLoading=!0,t.next=7,b["a"].users.getUsers({subscriptionStatus:s,name:e,page:a});case 7:if(n=t.sent,r=n.data,i=n.statusText,"success"===r.status&&"OK"===i){t.next=12;break}throw new Error(r.message);case 12:this.users=r.users,this.subscriptionStatus=r.sub_status||this.subscriptionStatus,this.totalPage=r.pages,this.isLoading=!1,t.next=22;break;case 18:t.prev=18,t.t0=t["catch"](3),this.isLoading=!1,x["a"].fire({type:"error",title:"無法取得用戶資料，請稍後再試"});case 22:case"end":return t.stop()}}),t,this,[[3,18]])})));function s(){return t.apply(this,arguments)}return s}(),handleAfterFilter:function(t){this.$router.push({name:"admin-users",query:t})}}},w=L,y=(e("dfd9"),Object(h["a"])(w,a,n,!1,null,"13f229e0",null));s["default"]=y.exports},"991c":function(t,s,e){"use strict";e("aefa")},aefa:function(t,s,e){},dfd9:function(t,s,e){"use strict";e("0e64")}}]);
//# sourceMappingURL=chunk-44fa24ac.6db75244.js.map