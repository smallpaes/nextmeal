(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b5b32592"],{"04ca":function(t,e,r){"use strict";r("6de2")},"04e7":function(t,e,r){},"1af6":function(t,e,r){var s=r("63b6");s(s.S,"Array",{isArray:r("9003")})},"1e4a":function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t._self._c;return e("section",{staticClass:"order-container"},[e("UserNavbar"),t.isLoading?e("Loader",{attrs:{height:"100vh"}}):t._e(),e("transition",{attrs:{name:"slide"}},[t.isLoading?t._e():e("section",{staticClass:"container pt-4 pb-4 w-100"},[e("div",{staticClass:"order-wrapper row profil"},[e("div",{staticClass:"order-profile col-12 col-md-3 p-2"},[e("UserProfileCard")],1),e("div",{staticClass:"order-display col-12 col-md-9 p-2"},[e("div",{staticClass:"order-display-wrapper rounded shadow-sm p-3"},[e("OrderNavPill",{staticClass:"m-0"}),e("hr",{staticClass:"order-display-divider"}),t._l(t.orders,(function(t){return e("OrderCard",{key:t.id,staticClass:"pb-2 px-0 mb-3",attrs:{order:t}})})),0!==t.orders.length||t.isProcessing?t._e():e("PlaceholderMessage",[e("i",{staticClass:"fas fa-utensils mr-2"}),t._v("目前沒有訂單\n            ")]),!t.isLoading&&t.isProcessing?[e("OrderCard",{staticClass:"pb-2 px-0 mb-3",attrs:{"is-processing":t.isProcessing}})]:t._e(),t.totalPage>0&&t.currentPage!==t.totalPage?e("div",{staticClass:"btn-container"},[e("button",{staticClass:"btn",attrs:{href:"#",disabled:t.isProcessing},on:{click:function(e){return t.fetchOrders(t.currentStatus,t.currentPage+1)}}},[t._v("\n                瀏覽更多\n              ")])]):t._e()],2)])])])]),e("Footer",{staticClass:"w-100"})],1)},a=[],n=r("75fc"),i=(r("96cf"),r("3b8d")),o=r("1dc8"),c=r("fd2d"),l=function(){var t=this,e=t._self._c;return e("ul",{staticClass:"nav nav-pills"},[e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",class:{active:!t.$route.query.order_status},attrs:{to:{name:"user-order",query:{order_status:"today"}}}},[t._v("\n      今日"),e("span",{staticClass:"d-none d-md-inline"},[t._v("訂單")])])],1),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:{name:"user-order",query:{order_status:"tomorrow"}}}},[t._v("\n      明日"),e("span",{staticClass:"d-none d-md-inline"},[t._v("訂單")])])],1),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:{name:"user-order",query:{order_status:"cancel"}}}},[t._v("\n      取消"),e("span",{staticClass:"d-none d-md-inline"},[t._v("訂單")])])],1),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:{name:"user-order",query:{order_status:"history"}}}},[t._v("\n      歷史"),e("span",{staticClass:"d-none d-md-inline"},[t._v("訂單")])])],1)])},d=[],u=(r("e665"),r("2877")),f={},p=Object(u["a"])(f,l,d,!1,null,"2c102432",null),v=p.exports,m=(r("7f7f"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"card d-flex flex-row justify-content-between rounded-0"},[e("div",{staticClass:"card-left"},[e("div",{staticClass:"card-body px-0 py-0"},[e("h5",{staticClass:"card-title m-0"},[t.isProcessing?e("SkelentonBox",{attrs:{width:"60px"}}):[t._v("\n          "+t._s(t.order.meals.Restaurant.name)+"\n        ")]],2),e("div",{staticClass:"card-description mt-2"},[e("p",{staticClass:"m-0 d-inline d-md-block"},[t.isProcessing?e("SkelentonBox",{attrs:{width:"120px"}}):[e("span",{staticClass:"d-none d-md-inline"},[t._v("餐點名稱：")]),t._v("\n            "+t._s(t.order.meals.name)+"\n          ")]],2),e("p",{staticClass:"m-0 d-inline d-md-block"},[t.isProcessing?e("SkelentonBox",{attrs:{width:"100px"}}):[e("span",{staticClass:"d-none d-md-inline"},[t._v("訂購數量")]),t._v("\n            "+t._s(t.order.amount)+"份\n          ")]],2)])])]),e("div",{staticClass:"card-right"},[e("div",{staticClass:"card-right-top shadow-sm rounded text-center ml-auto"},[t.isProcessing?e("SkelentonBox",{attrs:{width:"80px",height:"55.7px"}}):[e("h5",{staticClass:"card-date"},[t._v("\n          "+t._s(t._f("dateTransform")(t.order.require_date))+"\n        ")]),e("h3",{staticClass:"card-time"},[t._v("\n          "+t._s(t._f("timeTransform")(t.order.require_date))+"\n        ")])]],2),t.isProcessing?e("SkelentonBox",{staticClass:"mt-3 rounded-sm",attrs:{width:"78px",height:"23px"}}):[t.order.hasComment||"history"!==t.$route.query.order_status||"取消"===t.order.order_status?t._e():e("router-link",{staticClass:"btn mt-3",attrs:{to:{name:"order-comment",params:{order_id:t.order.id}}}},[t._v("\n        評論\n      ")]),e("router-link",{staticClass:"btn mt-3 ml-2",attrs:{to:{name:"order",params:{order_id:t.order.id}}}},[t._v("\n        訂單\n      ")])]],2)])}),h=[],b=r("d1b6"),C=r("c1df"),g=r.n(C),_={filters:{dateTransform:function(t){return g()(new Date(t)).format("MM/DD")},timeTransform:function(t){return g()(new Date(t)).format("HH:mm")}},components:{SkelentonBox:b["a"]},props:{order:{type:Object,default:function(){return{}}},isProcessing:{type:Boolean,default:!1}}},y=_,O=(r("04ca"),Object(u["a"])(y,m,h,!1,null,"56ca8789",null)),x=O.exports,w=r("c08a"),P=r("555f"),k=r("d691"),j=r("4cce"),S=r("2fa3"),A={components:{UserNavbar:o["a"],UserProfileCard:w["a"],OrderNavPill:v,OrderCard:x,PlaceholderMessage:k["a"],Footer:c["a"],Loader:P["a"]},data:function(){return{orders:[],currentPage:0,currentStatus:"",totalPage:null,isLoading:!0,isProcessing:!1}},created:function(){var t=this.$route.query.order_status,e=void 0===t?"today":t;this.currentStatus=e,this.fetchOrders(e,this.currentPage+1)},beforeRouteUpdate:function(t,e,r){this.currentPage=0,this.totalPage=null,this.orders=[];var s=t.query.order_status,a=void 0===s?"today":s;this.currentStatus=a,this.fetchOrders(a,this.currentPage+1),r()},methods:{fetchOrders:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,r){var s,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.isProcessing=!0,t.next=4,j["a"].getOrders({status:e,page:r});case 4:if(s=t.sent,a=s.data,i=s.statusText,"OK"===i&&"success"===a.status){t.next=9;break}throw new Error(a.message);case 9:this.orders=[].concat(Object(n["a"])(this.orders),Object(n["a"])(a.orders)),this.totalPage=a.pages,this.currentPage+=1,this.isLoading=!1,this.isProcessing=!1,t.next=21;break;case 16:t.prev=16,t.t0=t["catch"](0),this.isLoading=!1,this.isProcessing=!1,S["a"].fire({type:"error",title:"無法取得訂單資料，請稍後再試"});case 21:case"end":return t.stop()}}),t,this,[[0,16]])})));function e(e,r){return t.apply(this,arguments)}return e}()}},U=A,q=(r("9236"),Object(u["a"])(U,s,a,!1,null,"757399dd",null));e["default"]=q.exports},"20fd":function(t,e,r){"use strict";var s=r("d9f6"),a=r("aebd");t.exports=function(t,e,r){e in t?s.f(t,e,a(0,r)):t[e]=r}},"2dff":function(t,e,r){},4948:function(t,e,r){"use strict";r("2dff")},"549b":function(t,e,r){"use strict";var s=r("d864"),a=r("63b6"),n=r("241e"),i=r("b0dc"),o=r("3702"),c=r("b447"),l=r("20fd"),d=r("7cd6");a(a.S+a.F*!r("4ee1")((function(t){Array.from(t)})),"Array",{from:function(t){var e,r,a,u,f=n(t),p="function"==typeof this?this:Array,v=arguments.length,m=v>1?arguments[1]:void 0,h=void 0!==m,b=0,C=d(f);if(h&&(m=s(m,v>2?arguments[2]:void 0,2)),void 0==C||p==Array&&o(C))for(e=c(f.length),r=new p(e);e>b;b++)l(r,b,h?m(f[b],b):f[b]);else for(u=C.call(f),r=new p;!(a=u.next()).done;b++)l(r,b,h?i(u,m,[a.value,b],!0):a.value);return r.length=b,r}})},"555f":function(t,e,r){"use strict";var s=function(){var t=this,e=t._self._c;return e("section",{staticClass:"icecream-container",style:{height:t.height}},[e("div",{staticClass:"icecream-content py-5"},[t._l(3,(function(t){return e("h1",{key:t,staticClass:"icecream"},[e("i",{staticClass:"fas fa-ice-cream"})])})),e("small",{staticClass:"icecream-description"},[t._v("\n      準備中\n    ")])],2)])},a=[],n={props:{height:{type:String,default:"100vh"}}},i=n,o=(r("db9a"),r("2877")),c=Object(o["a"])(i,s,a,!1,null,"2e263baa",null);e["a"]=c.exports},"6de2":function(t,e,r){},"75fc":function(t,e,r){"use strict";r.d(e,"a",(function(){return h}));var s=r("a745"),a=r.n(s),n=r("db2a");function i(t){if(a()(t))return Object(n["a"])(t)}var o=r("67bb"),c=r.n(o),l=r("5d58"),d=r.n(l),u=r("774e"),f=r.n(u);function p(t){if("undefined"!==typeof c.a&&null!=t[d.a]||null!=t["@@iterator"])return f()(t)}var v=r("e630");function m(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(t){return i(t)||p(t)||Object(v["a"])(t)||m()}},"774e":function(t,e,r){t.exports=r("d2d5")},9236:function(t,e,r){"use strict";r("de2f")},"9d9f":function(t,e,r){},a745:function(t,e,r){t.exports=r("f410")},be99:function(t,e,r){},c08a:function(t,e,r){"use strict";r("7f7f");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"profile-card rounded-sm shadow-sm"},[e("div",{staticClass:"profile-card-top"},[e("SkelentonBox",{staticClass:"rounded-circle skelenton-box",attrs:{width:"120px",height:"120px"}}),e("img",{attrs:{src:t._f("placeholderAvatar")(t.currentUser.avatar),alt:"user avatar"}}),e("h5",{staticClass:"mt-3 profile-card-top-name"},[t._v("\n      "+t._s(t.currentUser.name)+"\n    ")]),e("small",{staticClass:"profile-top-balance"},[t._v("\n      "+t._s(t._f("getSubscriptionStatus")(t.currentUser.subscriptionStatus))+" | 剩餘 "+t._s(t.currentUser.subscriptionBalance)+" 餐\n    ")])],1),e("hr",{staticClass:"m-0"}),e("div",{staticClass:"profile-card-bottom"},[e("ul",{staticClass:"nav flex-column"},[e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:{name:"user-profile"}}},[e("span",{staticClass:"icon"},[e("i",{staticClass:"fas fa-cog mr-1"})]),t._v("\n          帳戶設定\n        ")])],1),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:{name:"user-order"},"active-class":"active"}},[e("span",{staticClass:"icon"},[e("i",{staticClass:"fas fa-clipboard-list mr-1"})]),t._v("\n          訂單管理\n        ")])],1)])])])},a=[],n=(r("8e6e"),r("ac6a"),r("456d"),r("bd86")),i=r("d1b6"),o=r("2708"),c=r("2f62");function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){Object(n["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var u={filters:{getSubscriptionStatus:function(t){return t?"訂閱中":"未訂閱"}},components:{SkelentonBox:i["a"]},mixins:[o["f"]],computed:d({},Object(c["c"])(["currentUser"]))},f=u,p=(r("d202"),r("2877")),v=Object(p["a"])(f,s,a,!1,null,"a9ba2c36",null);e["a"]=v.exports},d202:function(t,e,r){"use strict";r("04e7")},d2d5:function(t,e,r){r("1654"),r("549b"),t.exports=r("584a").Array.from},d691:function(t,e,r){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"placeholder-message p-2"},[e("h5",{staticClass:"m-0"},[t._t("default")],2)])},a=[],n=(r("4948"),r("2877")),i={},o=Object(n["a"])(i,s,a,!1,null,"d84b3480",null);e["a"]=o.exports},db2a:function(t,e,r){"use strict";function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}r.d(e,"a",(function(){return s}))},db9a:function(t,e,r){"use strict";r("9d9f")},de2f:function(t,e,r){},e630:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var s=r("774e"),a=r.n(s),n=r("db2a");function i(t,e){if(t){if("string"===typeof t)return Object(n["a"])(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?a()(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Object(n["a"])(t,e):void 0}}},e665:function(t,e,r){"use strict";r("be99")},f410:function(t,e,r){r("1af6"),t.exports=r("584a").Array.isArray}}]);
//# sourceMappingURL=chunk-b5b32592.fb6a1213.js.map