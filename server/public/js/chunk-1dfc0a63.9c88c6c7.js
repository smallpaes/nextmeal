(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1dfc0a63"],{"2a14":function(t,a,e){},"5bbe":function(t,a,e){"use strict";e("2a14")},"73a3":function(t,a,e){"use strict";e.r(a);e("c5f6"),e("7f7f");var n=function(){var t=this,a=t._self._c;return a("section",{staticClass:"wrapper d-flex vh-100"},[a("AdminSideNavBar",{attrs:{"nav-is-open":t.navIsOpen}}),a("section",{staticClass:"restaurants flex-fill"},[a("NavbarToggler",{attrs:{"nav-is-open":t.navIsOpen},on:{"toggle-navbar":function(a){t.navIsOpen=!t.navIsOpen}}}),a("h1",{staticClass:"restaurants-title"},[t._v("\n      餐廳管理\n    ")]),a("hr",{staticClass:"restaurants-divider"}),a("AdminFilterPanel",{attrs:{options:t.districts,"is-loading":t.isLoading},on:{"after-search":function(a){return t.handleAfterFilter({name:a,dist:t.$route.query.dist})},"after-filter":function(a){return t.handleAfterFilter({name:t.$route.query.name,dist:a})}},scopedSlots:t._u([{key:"filterOption",fn:function(){return[t._v("\n        篩選地區\n      ")]},proxy:!0}])}),a("transition",{attrs:{name:"slide",appear:""}},[t.isLoading||!t.isLoading&&t.restaurants.length>0?a("AdminRestaurantsTable",{key:"table",attrs:{"is-loading":t.isLoading,restaurants:t.restaurants}}):t._e()],1),a("transition",{attrs:{name:"fade"}},[t.totalPage>1?a("Pagination",{staticClass:"mt-4",attrs:{"total-page":t.totalPage,"current-page":Number(t.$route.query.page)||1,query:{name:this.$route.query.name,dist:this.$route.query.dist}}}):t._e()],1),t.isLoading||0!==t.restaurants.length?t._e():a("PlaceholderMessage",{key:"placeholder",staticClass:"restaurants-placeholder"},[a("i",{staticClass:"fas fa-search mr-2"}),t._v("沒有符合的結果\n    ")])],1)],1)},s=[],r=(e("96cf"),e("3b8d")),i=e("e9e5"),o=e("0f14d"),u=e("13ad"),d=function(){var t=this,a=t._self._c;return a("div",{staticClass:"table-wrapper table-borderless table-hover rounded-sm"},[a("table",{staticClass:"table m-0"},[t._m(0),a("tbody",t._l(t.restaurantData,(function(e){return a("tr",{key:e.id,on:{click:function(a){!t.isLoading&&t.$router.push({name:"admin-restaurant-edit",params:{restaurant_id:e.id}})}}},[a("td",[t.isLoading?a("SkelentonBox",{attrs:{width:"100px"}}):[t._v("\n            "+t._s(t._f("textTruncate")(e.name,10))+"\n          ")]],2),a("td",[t.isLoading?a("SkelentonBox",{attrs:{width:"50px"}}):[t._v("\n            "+t._s(e.location)+"\n          ")]],2),a("td",[t.isLoading?a("SkelentonBox",{attrs:{width:"43px"}}):[a("span",{staticClass:"d-none d-md-inline pr-1",class:{"high-rating":e.rating>=4,"low-rating":e.rating<4}},[t._v("★")]),a("span",{staticClass:"rating",class:{"high-rating":e.rating>=4,"low-rating":e.rating<4}},[t._v(t._s(t._f("padEnd")(e.rating)))])]],2),a("td",{staticClass:"comment"},[t.isLoading?a("SkelentonBox",{attrs:{width:"30px"}}):[a("i",{staticClass:"far fa-comment-alt mr-1 d-none d-md-inline"}),t._v("\n            "+t._s(e.Comments.length)+"\n          ")]],2),a("td",[t.isLoading?a("SkelentonBox",{attrs:{width:"30px"}}):[a("i",{staticClass:"far fa-chart-bar mr-1 d-none d-md-inline"}),t._v("\n            "+t._s(e.orderCount)+"\n          ")]],2)])})),0)])])},l=[function(){var t=this,a=t._self._c;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("\n          名稱\n        ")]),a("th",{attrs:{scope:"col"}},[t._v("\n          地區\n        ")]),a("th",{attrs:{scope:"col"}},[t._v("\n          評分\n        ")]),a("th",{attrs:{scope:"col"}},[t._v("\n          評論\n        ")]),a("th",{attrs:{scope:"col"}},[t._v("\n          成交量\n        ")])])])}],c=e("2708"),f=e("d1b6"),h={components:{SkelentonBox:f["a"]},mixins:[c["e"],c["g"]],props:{restaurants:{type:Array,required:!0},isLoading:{type:Boolean,default:!1}},computed:{restaurantData:function(){return this.isLoading?10:this.restaurants}}},p=h,g=(e("f59f"),e("2877")),m=Object(g["a"])(p,d,l,!1,null,"1a585bf7",null),v=m.exports,_=e("d691"),b=e("1799"),x=e("be6c"),w=e("2fa3"),y={components:{AdminSideNavBar:i["a"],NavbarToggler:o["a"],AdminFilterPanel:u["a"],AdminRestaurantsTable:v,PlaceholderMessage:_["a"],Pagination:b["a"]},data:function(){return{restaurants:[],districts:[],totalPage:null,isLoading:!0,navIsOpen:!1}},created:function(){var t=this.$route.query,a=t.dist,e=t.name,n=t.page;this.fetchRestaurants(a,e,n)},beforeRouteUpdate:function(t,a,e){var n=t.query,s=n.dist,r=n.name,i=n.page;this.fetchRestaurants(s,r,i),e()},methods:{fetchRestaurants:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var a,e,n,s,r,i,o=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=o.length>0&&void 0!==o[0]?o[0]:"",e=o.length>1&&void 0!==o[1]?o[1]:"",n=o.length>2&&void 0!==o[2]?o[2]:1,t.prev=3,this.isLoading=!0,t.next=7,x["a"].restaurants.getRestaurants({dist:a,name:e,page:n});case 7:if(s=t.sent,r=s.data,i=s.statusText,"success"===r.status&&"OK"===i){t.next=12;break}throw new Error(r.message);case 12:this.restaurants=r.restaurants.restaurants,this.districts=r.districts.map((function(t){return t["chinese_name"]})),this.totalPage=r.restaurants.pages,this.isLoading=!1,t.next=22;break;case 18:t.prev=18,t.t0=t["catch"](3),this.isLoading=!1,w["a"].fire({type:"error",title:"無法取得資料，請稍後再試"});case 22:case"end":return t.stop()}}),t,this,[[3,18]])})));function a(){return t.apply(this,arguments)}return a}(),handleAfterFilter:function(t){this.$router.push({name:"admin-restaurants",query:t})}}},k=y,L=(e("5bbe"),Object(g["a"])(k,n,s,!1,null,"414ebf8e",null));a["default"]=L.exports},ad59:function(t,a,e){},f59f:function(t,a,e){"use strict";e("ad59")}}]);
//# sourceMappingURL=chunk-1dfc0a63.9c88c6c7.js.map