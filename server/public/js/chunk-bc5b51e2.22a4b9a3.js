(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bc5b51e2"],{"196a":function(t,a,e){},6087:function(t,a,e){},"73a3":function(t,a,e){"use strict";e.r(a);e("b0c0"),e("a9e3");var n=function(){var t=this,a=t._self._c;return a("section",{staticClass:"wrapper d-flex vh-100"},[a("AdminSideNavBar",{attrs:{"nav-is-open":t.navIsOpen}}),a("section",{staticClass:"restaurants flex-fill"},[a("NavbarToggler",{attrs:{"nav-is-open":t.navIsOpen},on:{"toggle-navbar":function(a){t.navIsOpen=!t.navIsOpen}}}),a("h1",{staticClass:"restaurants-title"},[t._v(" 餐廳管理 ")]),a("hr",{staticClass:"restaurants-divider"}),a("AdminFilterPanel",{attrs:{options:t.districts,"is-loading":t.isLoading},on:{"after-search":function(a){return t.handleAfterFilter({name:a,dist:t.$route.query.dist})},"after-filter":function(a){return t.handleAfterFilter({name:t.$route.query.name,dist:a})}},scopedSlots:t._u([{key:"filterOption",fn:function(){return[t._v(" 篩選地區 ")]},proxy:!0}])}),a("transition",{attrs:{name:"slide",appear:""}},[t.isLoading||!t.isLoading&&t.restaurants.length>0?a("AdminRestaurantsTable",{key:"table",attrs:{"is-loading":t.isLoading,restaurants:t.restaurants}}):t._e()],1),a("transition",{attrs:{name:"fade"}},[t.totalPage>1?a("Pagination",{staticClass:"mt-4",attrs:{"total-page":t.totalPage,"current-page":Number(t.$route.query.page)||1,query:{name:this.$route.query.name,dist:this.$route.query.dist}}}):t._e()],1),t.isLoading||0!==t.restaurants.length?t._e():a("PlaceholderMessage",{key:"placeholder",staticClass:"restaurants-placeholder"},[a("i",{staticClass:"fas fa-search mr-2"}),t._v("沒有符合的結果 ")])],1)],1)},s=[],r=e("c7eb"),i=e("1da1"),o=(e("d9e2"),e("d81d"),e("14d9"),e("e9e5")),d=e("0f14d"),l=e("13ad"),u=function(){var t=this,a=t._self._c;return a("div",{staticClass:"table-wrapper table-borderless table-hover rounded-sm"},[a("table",{staticClass:"table m-0"},[t._m(0),a("tbody",t._l(t.restaurantData,(function(e){return a("tr",{key:e.id,on:{click:function(a){!t.isLoading&&t.$router.push({name:"admin-restaurant-edit",params:{restaurant_id:e.id}})}}},[a("td",[t.isLoading?a("SkelentonBox",{attrs:{width:"100px"}}):[t._v(" "+t._s(t._f("textTruncate")(e.name,10))+" ")]],2),a("td",[t.isLoading?a("SkelentonBox",{attrs:{width:"50px"}}):[t._v(" "+t._s(e.location)+" ")]],2),a("td",[t.isLoading?a("SkelentonBox",{attrs:{width:"43px"}}):[a("span",{staticClass:"d-none d-md-inline pr-1",class:{"high-rating":e.rating>=4,"low-rating":e.rating<4}},[t._v("★")]),a("span",{staticClass:"rating",class:{"high-rating":e.rating>=4,"low-rating":e.rating<4}},[t._v(t._s(t._f("padEnd")(e.rating)))])]],2),a("td",{staticClass:"comment"},[t.isLoading?a("SkelentonBox",{attrs:{width:"30px"}}):[a("i",{staticClass:"far fa-comment-alt mr-1 d-none d-md-inline"}),t._v(" "+t._s(e.Comments.length)+" ")]],2),a("td",[t.isLoading?a("SkelentonBox",{attrs:{width:"30px"}}):[a("i",{staticClass:"far fa-chart-bar mr-1 d-none d-md-inline"}),t._v(" "+t._s(e.orderCount)+" ")]],2)])})),0)])])},c=[function(){var t=this,a=t._self._c;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v(" 名稱 ")]),a("th",{attrs:{scope:"col"}},[t._v(" 地區 ")]),a("th",{attrs:{scope:"col"}},[t._v(" 評分 ")]),a("th",{attrs:{scope:"col"}},[t._v(" 評論 ")]),a("th",{attrs:{scope:"col"}},[t._v(" 成交量 ")])])])}],p=e("2708"),f=e("d1b6"),g={components:{SkelentonBox:f["a"]},mixins:[p["e"],p["g"]],props:{restaurants:{type:Array,required:!0},isLoading:{type:Boolean,default:!1}},computed:{restaurantData:function(){return this.isLoading?10:this.restaurants}}},h=g,m=(e("f59f"),e("2877")),v=Object(m["a"])(h,u,c,!1,null,"1a585bf7",null),_=v.exports,b=e("d691"),x=e("1799"),w=e("be6c"),y=e("2fa3"),k={components:{AdminSideNavBar:o["a"],NavbarToggler:d["a"],AdminFilterPanel:l["a"],AdminRestaurantsTable:_,PlaceholderMessage:b["a"],Pagination:x["a"]},data:function(){return{restaurants:[],districts:[],totalPage:null,isLoading:!0,navIsOpen:!1}},created:function(){var t=this.$route.query,a=t.dist,e=t.name,n=t.page;this.fetchRestaurants(a,e,n)},beforeRouteUpdate:function(t,a,e){var n=t.query,s=n.dist,r=n.name,i=n.page;this.fetchRestaurants(s,r,i),e()},methods:{fetchRestaurants:function(){var t=arguments,a=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,s,i,o,d,l;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:"",s=t.length>1&&void 0!==t[1]?t[1]:"",i=t.length>2&&void 0!==t[2]?t[2]:1,e.prev=3,a.isLoading=!0,e.next=7,w["a"].restaurants.getRestaurants({dist:n,name:s,page:i});case 7:if(o=e.sent,d=o.data,l=o.statusText,"success"===d.status&&"OK"===l){e.next=12;break}throw new Error(d.message);case 12:a.restaurants=d.restaurants.restaurants,a.districts=d.districts.map((function(t){return t.chinese_name})),a.totalPage=d.restaurants.pages,a.isLoading=!1,e.next=22;break;case 18:e.prev=18,e.t0=e["catch"](3),a.isLoading=!1,y["a"].fire({type:"error",title:"無法取得資料，請稍後再試"});case 22:case"end":return e.stop()}}),e,null,[[3,18]])})))()},handleAfterFilter:function(t){this.$router.push({name:"admin-restaurants",query:t})}}},L=k,C=(e("94f8"),Object(m["a"])(L,n,s,!1,null,"99d2881a",null));a["default"]=C.exports},"94f8":function(t,a,e){"use strict";e("196a")},f59f:function(t,a,e){"use strict";e("6087")}}]);
//# sourceMappingURL=chunk-bc5b51e2.22a4b9a3.js.map