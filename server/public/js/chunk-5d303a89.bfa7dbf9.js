(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5d303a89"],{"00b4":function(t,e,r){"use strict";r("ac1f");var n=r("23e7"),a=r("c65b"),s=r("1626"),i=r("825a"),c=r("577e"),o=function(){var t=!1,e=/[ac]/;return e.exec=function(){return t=!0,/./.exec.apply(this,arguments)},!0===e.test("abc")&&t}(),u=/./.test;n({target:"RegExp",proto:!0,forced:!o},{test:function(t){var e=i(this),r=c(t),n=e.exec;if(!s(n))return a(u,e,r);var o=a(n,e,r);return null!==o&&(i(o),!0)}})},"06c5":function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));r("fb6a"),r("d3b7"),r("b0c0"),r("a630"),r("3ca3"),r("ac1f"),r("00b4");var n=r("6b75");function a(t,e){if(t){if("string"===typeof t)return Object(n["a"])(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Object(n["a"])(t,e):void 0}}},"0a61":function(t,e,r){},"107c":function(t,e,r){var n=r("d039"),a=r("da84"),s=a.RegExp;t.exports=n((function(){var t=s("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}))},1922:function(t,e,r){"use strict";r("0a61")},2909:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r("6b75");function a(t){if(Array.isArray(t))return Object(n["a"])(t)}r("a4d3"),r("e01a"),r("d3b7"),r("d28b"),r("3ca3"),r("ddb0"),r("a630");function s(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var i=r("06c5");r("d9e2");function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t){return a(t)||s(t)||Object(i["a"])(t)||c()}},"2d19":function(t,e,r){},"6b75":function(t,e,r){"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}r.d(e,"a",(function(){return n}))},"89ad":function(t,e,r){"use strict";r.r(e);r("d81d");var n=function(){var t=this,e=t._self._c;return e("section",[e("header",[e("UserNavbar"),e("DropdownBanner",{attrs:{"is-loading":t.isLoading,districts:t.districts,"current-district":t.currentDistrict}})],1),e("section",{staticClass:"popular"},[e("div",{staticClass:"container pt-3 pb-0 pb-md-5"},[e("Header",{scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" 熱門餐廳 ")]},proxy:!0},{key:"description",fn:function(){return[t._v(" 嘗試最受歡迎的餐廳 ")]},proxy:!0}])}),e("CustomCarousel",{attrs:{"is-loading":t.isLoading,"popular-restaurants":t.popular_restaurants}})],1)]),e("section",{staticClass:"restaurants"},[e("div",{staticClass:"container pt-3 pb-5"},[e("Header",{scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" 更多選擇 ")]},proxy:!0},{key:"description",fn:function(){return[t._v(" 探索更多在地餐廳 ")]},proxy:!0}])}),e("div",{staticClass:"card-wrapper row px-3"},[t.isLoading?t._e():t._l(t.more_restaurants.restaurants,(function(t){return e("div",{key:t.id,staticClass:"col-12 col-md-6 col-lg-4 p-2"},[e("RestaurantCard",{attrs:{restaurant:t}})],1)})),t.isLoading||t.isFetching?t._l(6,(function(r){return e("div",{key:r,staticClass:"col-12 col-md-6 col-lg-4 p-2"},[e("RestaurantCard",{attrs:{"is-loading":t.isLoading||t.isFetching}})],1)})):t._e()],2),t.isLoading?t._e():e("div",{staticClass:"btn-container"},[t.currentPage!==t.totalPage?e("button",{staticClass:"btn mt-3",attrs:{href:"#"},on:{click:function(e){t.fetchRestaurants(t.currentDistrict,t.currentPage+1),t.isFetching=!0}}},[t._v(" 瀏覽更多 ")]):t._e()])],1)]),e("section",{staticClass:"map bg-white"},[e("div",{staticClass:"container pt-3 pb-5"},[e("Header",{scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" "+t._s(t.currentDistrict)+"餐廳 ")]},proxy:!0},{key:"description",fn:function(){return[t._v(" 探索最近的美食地圖 ")]},proxy:!0}])}),t.isLoading?e("SkelentonBox",{attrs:{width:"100%",height:"400px"}}):e("GMap",{staticClass:"shadow-sm rounded-sm",attrs:{center:{lat:parseFloat(t.map.center.lat),lng:parseFloat(t.map.center.lng)},locations:t.map.restaurants,"street-view-control":!1,"map-type-control":!1,"fullscreen-control":!0,"zoom-control":!0}})],1)]),e("Footer")],1)},a=[],s=r("c7eb"),i=r("2909"),c=r("1da1"),o=(r("d9e2"),r("99af"),r("14d9"),r("1dc8")),u=r("fd2d"),d=function(){var t=this,e=t._self._c;return e("section",{staticClass:"“banner"},[e("div",{staticClass:"banner-container"},[e("div",{staticClass:"banner-img",style:{backgroundImage:"url(".concat(t.districtImage,")")}}),e("div",{staticClass:"banner-overlay"}),e("div",{staticClass:"banner-content"},[e("h1",{staticClass:"banner-content-title"},[t._v(" "+t._s(t.currentDistrict)+" ")]),e("div",{staticClass:"dropdown"},[e("button",{staticClass:"btn dropdown-toggle p-0",attrs:{id:"dropdownMenuButton",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",disabled:t.isLoading}},[t._v(" 切換地區 ")]),e("div",{staticClass:"dropdown-menu rounded-sm",attrs:{"aria-labelledby":"dropdownMenuButton"}},t._l(t.districts,(function(r){return e("router-link",{key:r.eng_name,staticClass:"dropdown-item text-center",class:{disabled:r.chinese_name===t.currentDistrict},attrs:{to:{name:"restaurants",query:{dist:r.chinese_name}}}},[t._v(" "+t._s(r.chinese_name)+" ")])})),1)])])])])},l=[],p=(r("4de4"),r("d3b7"),{props:{districts:{type:Array,required:!0},currentDistrict:{type:String,required:!0},isLoading:{type:Boolean,default:!1}},data:function(){return{districtImage:""}},watch:{districts:function(t){this.getDistrictImage()}},created:function(){this.getDistrictImage()},methods:{getDistrictImage:function(){var t=this;0!==this.districts.length?this.districtImage=this.districts.filter((function(e){return e.chinese_name===t.currentDistrict}))[0].image:this.districtImage=""}}}),f=p,g=(r("ccf4"),r("2877")),h=Object(g["a"])(f,d,l,!1,null,"ee56da32",null),b=h.exports,v=r("b580"),m=r("c596"),x=r("8787"),y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"header-heading"},[e("h1",{staticClass:"header-heading-title"},[t._t("title")],2),e("p",{staticClass:"header-heading-description"},[t._t("description")],2)])},_=[],C=(r("c53b"),{}),w=Object(g["a"])(C,y,_,!1,null,"44c54a56",null),I=w.exports,k=r("c4c3"),R=r("d1b6"),O=r("2fa3"),D={components:{UserNavbar:o["a"],Footer:u["a"],DropdownBanner:b,CustomCarousel:v["a"],RestaurantCard:m["a"],GMap:x["a"],Header:I,SkelentonBox:R["a"]},data:function(){return{popular_restaurants:[],more_restaurants:{restaurants:[]},map:{},districts:[],currentDistrict:"",currentPage:0,totalPage:null,isLoading:!0,isFetching:!1}},created:function(){var t=this.$route.query.dist;this.currentDistrict=t||"信義區",this.fetchRestaurants(t,this.currentPage+1)},mounted:function(){window.scrollTo(0,0)},beforeRouteUpdate:function(t,e,r){this.currentPage=0,this.more_restaurants.restaurants=[],this.districts=[];var n=t.query.dist;this.currentDistrict=n||"信義區",this.isLoading=!0,this.fetchRestaurants(n,this.currentPage+1),r()},methods:{fetchRestaurants:function(t,e){var r=this;return Object(c["a"])(Object(s["a"])().mark((function n(){var a,c,o;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,k["a"].getRestaurants({dist:t,page:e});case 3:if(a=n.sent,c=a.data,o=a.statusText,"success"===c.status&&"OK"===o){n.next=8;break}throw new Error(c.message);case 8:r.popular_restaurants=c.popular_restaurants||r.popular_restaurants,r.more_restaurants.restaurants=[].concat(Object(i["a"])(r.more_restaurants.restaurants),Object(i["a"])(c.more_restaurants.restaurants)),r.totalPage=c.more_restaurants.pages,r.map=c.map||r.map,r.districts=c.districts||r.districts,r.currentPage+=1,r.isLoading=!1,r.isFetching=!1,n.next=24;break;case 18:n.prev=18,n.t0=n["catch"](0),r.isLoading=!1,r.isFetching=!1,O["a"].fire({type:"error",title:"無法取得餐廳資料，請稍後再試"}),r.$router.push({name:"home"});case 24:case"end":return n.stop()}}),n,null,[[0,18]])})))()}}},E=D,S=(r("1922"),Object(g["a"])(E,n,a,!1,null,"6edc5c2f",null));e["default"]=S.exports},"8c73":function(t,e,r){},9263:function(t,e,r){"use strict";var n=r("c65b"),a=r("e330"),s=r("577e"),i=r("ad6d"),c=r("9f7f"),o=r("5692"),u=r("7c73"),d=r("69f3").get,l=r("fce3"),p=r("107c"),f=o("native-string-replace",String.prototype.replace),g=RegExp.prototype.exec,h=g,b=a("".charAt),v=a("".indexOf),m=a("".replace),x=a("".slice),y=function(){var t=/a/,e=/b*/g;return n(g,t,"a"),n(g,e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),_=c.BROKEN_CARET,C=void 0!==/()??/.exec("")[1],w=y||C||_||l||p;w&&(h=function(t){var e,r,a,c,o,l,p,w=this,I=d(w),k=s(t),R=I.raw;if(R)return R.lastIndex=w.lastIndex,e=n(h,R,k),w.lastIndex=R.lastIndex,e;var O=I.groups,D=_&&w.sticky,E=n(i,w),S=w.source,j=0,A=k;if(D&&(E=m(E,"y",""),-1===v(E,"g")&&(E+="g"),A=x(k,w.lastIndex),w.lastIndex>0&&(!w.multiline||w.multiline&&"\n"!==b(k,w.lastIndex-1))&&(S="(?: "+S+")",A=" "+A,j++),r=new RegExp("^(?:"+S+")",E)),C&&(r=new RegExp("^"+S+"$(?!\\s)",E)),y&&(a=w.lastIndex),c=n(g,D?r:w,A),D?c?(c.input=x(c.input,j),c[0]=x(c[0],j),c.index=w.lastIndex,w.lastIndex+=c[0].length):w.lastIndex=0:y&&c&&(w.lastIndex=w.global?c.index+c[0].length:a),C&&c&&c.length>1&&n(f,c[0],r,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(c[o]=void 0)})),c&&O)for(c.groups=l=u(null),o=0;o<O.length;o++)p=O[o],l[p[0]]=c[p[1]];return c}),t.exports=h},"9f7f":function(t,e,r){var n=r("d039"),a=r("da84"),s=a.RegExp,i=n((function(){var t=s("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),c=i||n((function(){return!s("a","y").sticky})),o=i||n((function(){var t=s("^r","gy");return t.lastIndex=2,null!=t.exec("str")}));t.exports={BROKEN_CARET:o,MISSED_STICKY:c,UNSUPPORTED_Y:i}},a630:function(t,e,r){var n=r("23e7"),a=r("4df4"),s=r("1c7e"),i=!s((function(t){Array.from(t)}));n({target:"Array",stat:!0,forced:i},{from:a})},ac1f:function(t,e,r){"use strict";var n=r("23e7"),a=r("9263");n({target:"RegExp",proto:!0,forced:/./.exec!==a},{exec:a})},c53b:function(t,e,r){"use strict";r("2d19")},ccf4:function(t,e,r){"use strict";r("8c73")},d81d:function(t,e,r){"use strict";var n=r("23e7"),a=r("b727").map,s=r("1dde"),i=s("map");n({target:"Array",proto:!0,forced:!i},{map:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},fce3:function(t,e,r){var n=r("d039"),a=r("da84"),s=a.RegExp;t.exports=n((function(){var t=s(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)}))}}]);
//# sourceMappingURL=chunk-5d303a89.bfa7dbf9.js.map