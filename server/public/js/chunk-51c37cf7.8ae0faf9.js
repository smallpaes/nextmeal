(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-51c37cf7"],{1806:function(t,a,s){},"7f4e":function(t,a,s){"use strict";s("c32a")},"9fcf":function(t,a,s){"use strict";s("f677")},a83b:function(t,a,s){"use strict";s.r(a);s("b0c0");var r=function(){var t=this,a=t._self._c;return a("section",{staticClass:"wrapper vh-100"},[a("AdminSideNavBar",{attrs:{"nav-is-open":t.navIsOpen}}),a("section",{staticClass:"dashboard"},[a("NavbarToggler",{attrs:{"nav-is-open":t.navIsOpen},on:{"toggle-navbar":function(a){t.navIsOpen=!t.navIsOpen}}}),a("h1",{staticClass:"dashboard-title"},[t._v(" 平台分析 ")]),a("hr",{staticClass:"dashboard-divider"}),t.isLoading?a("Loader",{attrs:{height:"300px"}}):t._e(),a("transition",{attrs:{name:"slide"}},[t.isLoading?t._e():a("AdminDashboardToday",{attrs:{"order-today":t.orderToday}})],1),a("transition",{attrs:{name:"slide"}},[t.isLoading?t._e():a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6 mb-4"},[a("LineChartCard",{attrs:{"chart-data":t.data.singleData.orders,height:160},scopedSlots:t._u([{key:"header",fn:function(){return[a("i",{staticClass:"fas fa-clipboard-list mr-2"}),t._v(t._s(t.data.singleData.orders.name)+" ")]},proxy:!0},{key:"title",fn:function(){return[t._v(" 平台"+t._s(t.data.singleData.orders.name)+"總數 ")]},proxy:!0},{key:"text",fn:function(){return[a("span",{style:{color:"rgb(93,90,87)"}},[t._v(t._s(t.data.singleData.orders.total))])]},proxy:!0},{key:"subtext",fn:function(){return[a("span",[a("i",{staticClass:"fas fa-chevron-up mr-1"}),t._v(t._s(t.data.singleData.orders.thisMonth)+" / 本月")])]},proxy:!0}],null,!1,1997971349)})],1),a("div",{staticClass:"col-md-6 mb-4"},[a("LineChartCard",{attrs:{"chart-data":t.data.singleData.restaurants,height:160},scopedSlots:t._u([{key:"header",fn:function(){return[a("i",{staticClass:"fas fa-store mr-2"}),t._v(t._s(t.data.singleData.restaurants.name)+" ")]},proxy:!0},{key:"title",fn:function(){return[t._v(" 平台"+t._s(t.data.singleData.restaurants.name)+"總數 ")]},proxy:!0},{key:"text",fn:function(){return[a("span",{style:{color:"rgb(93,90,87)"}},[t._v(t._s(t.data.singleData.restaurants.total))])]},proxy:!0},{key:"subtext",fn:function(){return[a("span",[a("i",{staticClass:"fas fa-chevron-up mr-1"}),t._v(t._s(t.data.singleData.restaurants.thisMonth)+" / 本月")])]},proxy:!0}],null,!1,728812201)})],1),a("div",{staticClass:"col-md-6 mb-4"},[a("LineChartCard",{attrs:{"chart-data":t.data.multipleData.subscriptions,height:160},scopedSlots:t._u([{key:"header",fn:function(){return[a("i",{staticClass:"far fa-credit-card mr-2"}),t._v(t._s(t.data.multipleData.subscriptions.name)+" ")]},proxy:!0},{key:"title",fn:function(){return[t._v(" 平台"+t._s(t.data.multipleData.subscriptions.name)+"總數 ")]},proxy:!0},{key:"text",fn:function(){return[a("span",{style:{color:"rgb(93,90,87)"}},[t._v(t._s(t.data.multipleData.subscriptions.total))])]},proxy:!0},{key:"subtext",fn:function(){return[a("span",{style:{color:t.data.multipleData.subscriptions.datasets[0].borderColor}},[t._v("・10餐")]),a("span",{style:{color:t.data.multipleData.subscriptions.datasets[1].borderColor}},[t._v("・20餐")])]},proxy:!0}],null,!1,20169259)})],1),a("div",{staticClass:"col-md-6 mb-4"},[a("PieChartCard",{attrs:{"chart-data":t.data.singleData.users,height:160},scopedSlots:t._u([{key:"header",fn:function(){return[a("i",{staticClass:"fas fa-users mr-2"}),t._v(t._s(t.data.singleData.users.name)+" ")]},proxy:!0},{key:"title",fn:function(){return[t._v(" 平台"+t._s(t.data.singleData.users.name)+"總數 ")]},proxy:!0},{key:"text",fn:function(){return[a("span",{style:{color:"rgb(93,90,87)"}},[t._v(t._s(t.data.singleData.users.total))])]},proxy:!0}],null,!1,3765135439)})],1)])])],1)],1)},e=[],i=s("c7eb"),n=s("5530"),o=s("1da1"),c=(s("d9e2"),s("e9e5")),d=s("0f14d"),l=function(){var t=this,a=t._self._c;return a("div",{staticClass:"card rounded-sm shadow-sm border-0 mb-4"},[t._m(0),a("div",{staticClass:"card-body row"},[a("div",{staticClass:"col-12 col-sm-6 col-lg-3 card-item mb-4 mb-lg-0"},[t._m(1),a("div",{staticClass:"card-item-right"},[a("div",{staticClass:"card-item-title"},[t._v(" 訂單量 ")]),a("div",{staticClass:"card-item-text"},[t._v(" "+t._s(t.orderToday.orderNum)+" ")])])]),a("div",{staticClass:"col-12 col-sm-6 col-lg-3 card-item mb-4 mb-lg-0"},[t._m(2),a("div",{staticClass:"card-item-right"},[a("div",{staticClass:"card-item-title"},[t._v(" 餐廳數 ")]),a("div",{staticClass:"card-item-text"},[t._v(" + "+t._s(t.orderToday.restIncreased)+" ")])])]),a("div",{staticClass:"col-12 col-sm-6 col-lg-3 mb-4 mb-md-0 card-item"},[t._m(3),a("div",{staticClass:"card-item-right"},[a("div",{staticClass:"card-item-title"},[t._v(" 會員數 ")]),a("div",{staticClass:"card-item-text"},[t._v(" + "+t._s(t.orderToday.userIncreased)+" ")])])]),a("div",{staticClass:"col-12 col-sm-6 col-lg-3 card-item"},[t._m(4),a("div",{staticClass:"card-item-right"},[a("div",{staticClass:"card-item-title"},[t._v(" 訂閱量 ")]),a("div",{staticClass:"card-item-text"},[t._v(" + "+t._s(t.orderToday.subtIncreased)+" ")])])])])])},u=[function(){var t=this,a=t._self._c;return a("div",{staticClass:"card-header bg-white"},[a("i",{staticClass:"fas fa-chart-area mr-2"}),t._v("今日概況 ")])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"card-item-left"},[a("div",{staticClass:"card-item-icon"},[a("i",{staticClass:"fas fa-clipboard-list"})])])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"card-item-left"},[a("div",{staticClass:"card-item-icon"},[a("i",{staticClass:"fas fa-store"})])])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"card-item-left"},[a("div",{staticClass:"card-item-icon"},[a("i",{staticClass:"fas fa-users"})])])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"card-item-left"},[a("div",{staticClass:"card-item-icon"},[a("i",{staticClass:"far fa-credit-card"})])])}],v={props:{orderToday:{type:Object,required:!0}}},p=v,b=(s("7f4e"),s("2877")),f=Object(b["a"])(p,l,u,!1,null,"2f5146a0",null),m=f.exports,C=s("e234"),g=s("6e61"),h=s("555f"),_=s("be6c"),y=s("2fa3"),k={components:{AdminSideNavBar:c["a"],NavbarToggler:d["a"],Loader:h["a"],AdminDashboardToday:m,LineChartCard:C["a"],PieChartCard:g["a"]},data:function(){return{isLoading:!0,navIsOpen:!1,orderToday:{},color:"rgb(239, 75, 77)",data:{singleData:{orders:{datasets:[{borderColor:"rgb(247,185,36)",backgroundColor:"rgb(253,241,211)",pointBackgroundColor:"rgb(255,255,255)",pointHoverBackgroundColor:"rgb(255,255,255)",pointBorderWidth:3,pointHoverBorderWidth:2}]},restaurants:{datasets:[{borderColor:"rgb(138,226,183)",backgroundColor:"rgb(242,251,247)",pointBackgroundColor:"rgb(255,255,255)",pointHoverBackgroundColor:"rgb(255,255,255)",pointBorderWidth:3,pointHoverBorderWidth:2}]},users:{datasets:[{backgroundColor:["rgb(255,140,52)","rgb(78,202,138)"]}]}},multipleData:{subscriptions:{datasets:[{backgroundColor:"rgba(255,255,255,0)",borderColor:"rgb(62,160,252)",pointBackgroundColor:"rgb(62,160,252)",pointBorderWidth:2,pointHoverBorderWidth:3},{backgroundColor:"rgba(255,255,255,0)",borderColor:"rgb(239,75,77)",pointBackgroundColor:"rgb(239,75,77)",pointBorderWidth:2,pointHoverBorderWidth:3}]}}}}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;return Object(o["a"])(Object(i["a"])().mark((function a(){var s,r,e,o,c,d,l,u,v,p,b,f,m,C;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,_["a"].dashboard.getDashboard();case 3:if(s=a.sent,r=s.data,e=s.statusText,"success"===r.status&&"OK"===e){a.next=8;break}throw new Error(r.message);case 8:for(u in o=r.userIncreased,c=r.restIncreased,d=r.subtIncreased,l=r.order_num,t.orderToday={userIncreased:o,restIncreased:c,subtIncreased:d,orderNum:l},t.data.singleData)v=r[u],p=v.labels,b=v.data,f=v.total,m=v.thisMonth,C=v.tableName,t.data.singleData[u]=Object(n["a"])(Object(n["a"])({},t.data.singleData[u]),{},{labels:p,total:f,thisMonth:m,name:C,datasets:[Object(n["a"])(Object(n["a"])({},t.data.singleData[u].datasets[0]),{},{data:b})]});t.data.multipleData.subscriptions=Object(n["a"])(Object(n["a"])({},t.data.multipleData.subscriptions),{},{total:r.subscriptions.total,labels:r.subscriptions.labels,name:r.subscriptions.tableName,datasets:[Object(n["a"])(Object(n["a"])({},t.data.multipleData.subscriptions.datasets[0]),r.subscriptions.datasets[0]),Object(n["a"])(Object(n["a"])({},t.data.multipleData.subscriptions.datasets[1]),r.subscriptions.datasets[1])]}),t.isLoading=!1,a.next=19;break;case 15:a.prev=15,a.t0=a["catch"](0),t.isLoading=!1,y["a"].fire({type:"error",title:"無法取得資料，請稍後再試"});case 19:case"end":return a.stop()}}),a,null,[[0,15]])})))()}}},x=k,D=(s("9fcf"),Object(b["a"])(x,r,e,!1,null,"c02ced8a",null));a["default"]=D.exports},be6c:function(t,a,s){"use strict";s("b0c0"),s("d3b7"),s("3ca3"),s("ddb0"),s("9861"),s("25f0");var r=s("2fa3");a["a"]={restaurants:{getRestaurants:function(t){var a=t.name,s=t.dist,e=t.page,i=new URLSearchParams({name:a,dist:s,page:e});return r["b"].get("/admin/restaurants?".concat(i.toString()))},getRestaurant:function(t){var a=t.restaurantId;return r["b"].get("/admin/restaurants/".concat(a))},putRestaurant:function(t){var a=t.restaurantId,s=t.formData;return r["b"].put("/admin/restaurants/".concat(a),s)},deleteRestaurant:function(t){var a=t.restaurantId;return r["b"].delete("/admin/restaurants/".concat(a))}},users:{getUser:function(t){var a=t.userId;return r["b"].get("/admin/users/".concat(a))},getUsers:function(t){var a=t.subscriptionStatus,s=t.name,e=t.page,i=new URLSearchParams({sub_status:a,name:s,page:e});return r["b"].get("/admin/users?".concat(i.toString()))},deleteUser:function(t){var a=t.userId;return r["b"].delete("/admin/users/".concat(a))},putUser:function(t){var a=t.userId,s=t.formData;return r["b"].put("/admin/users/".concat(a),s)}},orders:{getOrders:function(t){var a=t.id,s=t.date,e=t.status,i=t.page,n=new URLSearchParams({page:i,order_id:a,date:s,order_status:e});return r["b"].get("/admin/orders?".concat(n.toString()))},putOrder:function(t){var a=t.orderId;return r["b"].put("/admin/orders/".concat(a),{})}},dashboard:{getDashboard:function(){return r["b"].get("/admin/dashboard")}}}},c32a:function(t,a,s){},e9e5:function(t,a,s){"use strict";var r=function(){var t=this,a=t._self._c;return a("nav",{staticClass:"sidenav shadow",class:{opened:t.navIsOpen}},[a("div",{staticClass:"sidenav-brand-container text-center py-5"},[a("router-link",{staticClass:"sidenav-brand",attrs:{to:{name:"home"}}},[t._v(" NextMeal ")])],1),a("ul",{staticClass:"sidenav-nav px-0 text-center"},[a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:{name:"admin-restaurants"},"active-class":"active"}},[a("span",{staticClass:"icon"},[a("i",{staticClass:"fas fa-store"})]),a("span",{staticClass:"nav-link-description"},[t._v("餐廳")])])],1),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:{name:"admin-users"},"active-class":"active"}},[a("span",{staticClass:"icon"},[a("i",{staticClass:"fas fa-user"})]),a("span",{staticClass:"nav-link-description"},[t._v("用戶")])])],1),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:{name:"admin-orders"},"active-class":"active"}},[a("span",{staticClass:"icon"},[a("i",{staticClass:"fas fa-clipboard-list"})]),a("span",{staticClass:"nav-link-description"},[t._v("訂單")])])],1),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:{name:"admin-dashboard"},"active-class":"active"}},[a("span",{staticClass:"icon"},[a("i",{staticClass:"fas fa-chart-line"})]),a("span",{staticClass:"nav-link-description"},[t._v("分析")])])],1),a("li",{staticClass:"nav-divider"}),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{href:"#",role:"button"},on:{click:t.logout}},[t._m(0),a("span",{staticClass:"nav-link-description"},[t._v("登出")])])])])])},e=[function(){var t=this,a=t._self._c;return a("span",{staticClass:"icon"},[a("i",{staticClass:"fas fa-sign-out-alt"})])}],i=(s("14d9"),{props:{navIsOpen:{type:Boolean,required:!0}},methods:{logout:function(){this.$store.commit("revokeAuthentication"),this.$router.push("/")}}}),n=i,o=(s("ed73"),s("2877")),c=Object(o["a"])(n,r,e,!1,null,"d34dbf0e",null);a["a"]=c.exports},ed73:function(t,a,s){"use strict";s("1806")},f677:function(t,a,s){}}]);
//# sourceMappingURL=chunk-51c37cf7.8ae0faf9.js.map