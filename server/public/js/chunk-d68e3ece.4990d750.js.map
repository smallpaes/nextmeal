{"version":3,"sources":["webpack:///./src/components/AdminOrdersTable.vue?be73","webpack:///./src/views/AdminOrders.vue?03d4","webpack:///./src/views/AdminOrders.vue","webpack:///./src/components/AdminOrdersTable.vue","webpack:///src/components/AdminOrdersTable.vue","webpack:///./src/components/AdminOrdersTable.vue?8b75","webpack:///./src/components/AdminOrdersTable.vue?5ace","webpack:///src/views/AdminOrders.vue","webpack:///./src/views/AdminOrders.vue?b1bb","webpack:///./src/views/AdminOrders.vue?18b6"],"names":["render","_vm","this","_c","_self","staticClass","attrs","navIsOpen","on","$event","_v","subscriptionStatus","isLoading","handleAfterFilter","order_id","order_status","$route","query","date","scopedSlots","_u","key","fn","proxy","orders","length","handleAfterCancel","_e","totalPage","Number","page","staticRenderFns","_m","_l","orderData","order","id","_s","User","name","_f","meals","Restaurant","slice","time","class","pointer","isProcessing","wait","cancelOrder","components","SkelentonBox","mixins","textTruncateFilter","props","type","Array","required","Boolean","default","data","computed","methods","_cancelOrder","_asyncToGenerator","regeneratorRuntime","mark","_callee","orderId","_yield$adminAPI$order","statusText","wrap","_context","prev","next","adminAPI","putOrder","sent","status","Error","message","$emit","t0","Toast","fire","title","stop","_x","apply","arguments","component","AdminSideNavBar","NavbarToggler","AdminFilterPanel","AdminOrdersTable","PlaceholderMessage","Pagination","created","_this$$route$query","orderStatus","fetchOrders","beforeRouteUpdate","to","from","_to$query","_fetchOrders","_args","undefined","moment","format","getOrders","pages","$router","push","map","_objectSpread"],"mappings":"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","file":"js/chunk-d68e3ece.4990d750.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminOrdersTable.vue?vue&type=style&index=0&id=1ea9ac52&prod&lang=scss&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminOrders.vue?vue&type=style&index=0&id=98fcd25a&prod&lang=scss&scoped=true&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('section',{staticClass:\"wrapper d-flex vh-100\"},[_c('AdminSideNavBar',{attrs:{\"nav-is-open\":_vm.navIsOpen}}),_c('section',{staticClass:\"orders flex-fill\"},[_c('NavbarToggler',{attrs:{\"nav-is-open\":_vm.navIsOpen},on:{\"toggle-navbar\":function($event){_vm.navIsOpen = !_vm.navIsOpen}}}),_c('h1',{staticClass:\"orders-title\"},[_vm._v(\"\\n      訂單管理\\n    \")]),_c('hr',{staticClass:\"orders-divider\"}),_c('AdminFilterPanel',{attrs:{\"has-date\":true,\"options\":_vm.subscriptionStatus,\"input-placeholder\":'搜尋編號',\"is-loading\":_vm.isLoading},on:{\"after-search\":function($event){return _vm.handleAfterFilter({ order_id: $event, order_status: _vm.$route.query.order_status, date: _vm.$route.query.date })},\"after-filter\":function($event){return _vm.handleAfterFilter({ order_id: _vm.$route.query.order_id, order_status: $event, date: _vm.$route.query.date })},\"after-date-pick\":function($event){return _vm.handleAfterFilter({ order_id: _vm.$route.query.order_id, order_status: _vm.$route.query.order_status, date: $event })}},scopedSlots:_vm._u([{key:\"filterOption\",fn:function(){return [_vm._v(\"\\n        訂單狀態\\n      \")]},proxy:true}])}),_c('transition',{attrs:{\"name\":\"slide\",\"appear\":\"\"}},[(_vm.isLoading || !_vm.isLoading && _vm.orders.length > 0)?_c('AdminOrdersTable',{attrs:{\"orders\":_vm.orders,\"is-loading\":_vm.isLoading},on:{\"after-cancel\":_vm.handleAfterCancel}}):_vm._e()],1),_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.totalPage > 1)?_c('Pagination',{staticClass:\"mt-4\",attrs:{\"total-page\":_vm.totalPage,\"current-page\":Number(_vm.$route.query.page) || 1,\"query\":{ order_id: _vm.$route.query.order_id, order_status: _vm.$route.query.order_status, date: _vm.$route.query.date }}}):_vm._e()],1),(!_vm.isLoading && _vm.orders.length === 0)?_c('PlaceholderMessage',{staticClass:\"orders-placeholder\"},[_c('i',{staticClass:\"fas fa-search mr-2\"}),_vm._v(\"沒有符合的結果\\n    \")]):_vm._e()],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"table-wrapper table-borderless table-hover rounded-sm\"},[_c('table',{staticClass:\"table m-0\"},[_vm._m(0),_c('tbody',_vm._l((_vm.orderData),function(order){return _c('tr',{key:order.id},[_c('td',[(_vm.isLoading)?_c('SkelentonBox',{attrs:{\"width\":'35px'}}):[_vm._v(\"\\n            #\"+_vm._s(order.id)+\"\\n          \")]],2),_c('td',[(_vm.isLoading)?_c('SkelentonBox',{attrs:{\"width\":'48px'}}):[_vm._v(\"\\n            \"+_vm._s(order.User.name)+\"\\n          \")]],2),_c('td',[(_vm.isLoading)?_c('SkelentonBox',{attrs:{\"width\":'112px'}}):[_vm._v(\"\\n            \"+_vm._s(_vm._f(\"textTruncate\")(order.meals.Restaurant.name,10))+\"\\n          \")]],2),_c('td',[(_vm.isLoading)?_c('SkelentonBox',{attrs:{\"width\":'35px'}}):[_vm._v(\"\\n            \"+_vm._s(order.date.slice(2, 6))+\"\\n          \")]],2),_c('td',[(_vm.isLoading)?_c('SkelentonBox',{attrs:{\"width\":'40px'}}):[_vm._v(\"\\n            \"+_vm._s(order.time)+\"\\n          \")]],2),(_vm.isLoading)?_c('td',[(_vm.isLoading)?_c('SkelentonBox',{attrs:{\"width\":'48px'}}):_vm._e()],1):[(order.order_status === '取消')?_c('td',[_vm._v(\"\\n            已取消\\n          \")]):_c('td',{class:{pointer: !_vm.isProcessing, wait: _vm.isProcessing},on:{\"click\":function($event){_vm.isProcessing ? null : _vm.cancelOrder(order.id)}}},[_vm._v(\"\\n            未取消\\n            \"),_c('i',{staticClass:\"fas fa-trash ml-1\"})])]],2)}),0)])])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('thead',[_c('tr',[_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"\\n          編號\\n        \")]),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"\\n          訂餐人\\n        \")]),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"\\n          餐廳\\n        \")]),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"\\n          日期\\n        \")]),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"\\n          時段\\n        \")]),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"\\n          訂單狀態\\n        \")])])])\n}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"table-wrapper table-borderless table-hover rounded-sm \">\n    <table class=\"table m-0\">\n      <thead>\n        <tr>\n          <th scope=\"col\">\n            編號\n          </th>\n          <th scope=\"col\">\n            訂餐人\n          </th>\n          <th scope=\"col\">\n            餐廳\n          </th>\n          <th scope=\"col\">\n            日期\n          </th>\n          <th scope=\"col\">\n            時段\n          </th>\n          <th scope=\"col\">\n            訂單狀態\n          </th>\n        </tr>\n      </thead>\n      <tbody>\n        <!--Display data-->\n        <tr\n          v-for=\"order in orderData\"\n          :key=\"order.id\"\n        >\n          <td>\n            <SkelentonBox\n              v-if=\"isLoading\"\n              :width=\"'35px'\"\n            />\n            <template v-else>\n              #{{ order.id }}\n            </template>\n          </td>\n          <td>\n            <SkelentonBox\n              v-if=\"isLoading\"\n              :width=\"'48px'\"\n            />\n            <template v-else>\n              {{ order.User.name }}\n            </template>\n          </td>\n          <td>\n            <SkelentonBox\n              v-if=\"isLoading\"\n              :width=\"'112px'\"\n            />\n            <template v-else>\n              {{ order.meals.Restaurant.name | textTruncate(10) }}\n            </template>\n          </td>\n          <td>\n            <SkelentonBox\n              v-if=\"isLoading\"\n              :width=\"'35px'\"\n            />\n            <template v-else>\n              {{ order.date.slice(2, 6) }}\n            </template>\n          </td>\n          <td>\n            <SkelentonBox\n              v-if=\"isLoading\"\n              :width=\"'40px'\"\n            />\n            <template v-else>\n              {{ order.time }}\n            </template>\n          </td>\n          <td v-if=\"isLoading\">\n            <SkelentonBox\n              v-if=\"isLoading\"\n              :width=\"'48px'\"\n            />\n          </td>\n          <template v-else>\n            <td v-if=\"order.order_status === '取消'\">\n              已取消\n            </td>\n            <td\n              v-else\n              :class=\"{pointer: !isProcessing, wait: isProcessing}\"\n              @click=\"isProcessing ? null : cancelOrder(order.id)\"\n            >\n              未取消\n              <i class=\"fas fa-trash ml-1\" />\n            </td>\n          </template>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</template>\n\n<script>\nimport adminAPI from '../apis/admin'\nimport SkelentonBox from './Placeholder/SkeletonBox'\nimport { textTruncateFilter } from '../utils/mixins'\nimport { Toast } from '../utils/helpers'\n\nexport default {\n  components: {\n    SkelentonBox\n  },\n  mixins: [textTruncateFilter],\n  props: {\n    orders: {\n      type: Array,\n      required: true\n    },\n    isLoading: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data () {\n    return {\n      isProcessing: false\n    }\n  },\n  computed: {\n    orderData () {\n      if (this.isLoading) return 10\n      return this.orders\n    }\n  },\n  methods: {\n    async cancelOrder (orderId) {\n      try {\n        // update processing status\n        this.isProcessing = true\n        // cancel the oreder\n        const { data, statusText } = await adminAPI.orders.putOrder({ orderId })\n        // error handling\n        if (data.status !== 'success' || statusText !== 'OK') throw new Error(data.message)\n        // notify parent\n        this.$emit('after-cancel', orderId)\n        // update processing status\n        this.isProcessing = false\n      } catch (error) {\n        // update processing status\n        this.isProcessing = false\n        // fire error messages\n        Toast.fire({\n          type: 'error',\n          title: '無法取消訂單，請稍後再試'\n        })\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n$headers: (\n  1: '編號',\n  2: '訂餐人',\n  3: '餐廳',\n  4: '日期',\n  5: '成交量',\n  6: '狀態'\n);\n\n// table layout for small screen\n@include tableMobile;\n// table layout for large screen\n@include tableFullSize;\n\n.table tbody tr:hover { cursor: unset; }\n.pointer { cursor: pointer; }\n.wait { cursor: wait; }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminOrdersTable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminOrdersTable.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AdminOrdersTable.vue?vue&type=template&id=1ea9ac52&scoped=true&\"\nimport script from \"./AdminOrdersTable.vue?vue&type=script&lang=js&\"\nexport * from \"./AdminOrdersTable.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AdminOrdersTable.vue?vue&type=style&index=0&id=1ea9ac52&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1ea9ac52\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <section class=\"wrapper d-flex vh-100\">\n    <!--Left Side Navbar-->\n    <AdminSideNavBar :nav-is-open=\"navIsOpen\" />\n\n    <!--Right Side Content-->\n    <section class=\"orders flex-fill\">\n      <!--Navbar toggler-->\n      <NavbarToggler\n        :nav-is-open=\"navIsOpen\"\n        @toggle-navbar=\"navIsOpen = !navIsOpen\"\n      />\n      <h1 class=\"orders-title\">\n        訂單管理\n      </h1>\n      <hr class=\"orders-divider\">\n\n      <!--Filter And Search Panel-->\n      <AdminFilterPanel\n        :has-date=\"true\"\n        :options=\"subscriptionStatus\"\n        :input-placeholder=\"'搜尋編號'\"\n        :is-loading=\"isLoading\"\n        @after-search=\"handleAfterFilter({ order_id: $event, order_status: $route.query.order_status, date: $route.query.date })\"\n        @after-filter=\"handleAfterFilter({ order_id: $route.query.order_id, order_status: $event, date: $route.query.date })\"\n        @after-date-pick=\"handleAfterFilter({ order_id: $route.query.order_id, order_status: $route.query.order_status, date: $event })\"\n      >\n        <template v-slot:filterOption>\n          訂單狀態\n        </template>\n      </AdminFilterPanel>\n\n      <!--User Data Table-->\n      <transition\n        name=\"slide\"\n        appear\n      >\n        <AdminOrdersTable\n          v-if=\"isLoading || !isLoading && orders.length > 0\"\n          :orders=\"orders\"\n          :is-loading=\"isLoading\"\n          @after-cancel=\"handleAfterCancel\"\n        />\n      </transition>\n\n      <!--Pagination-->\n      <transition name=\"fade\">\n        <Pagination\n          v-if=\"totalPage > 1\"\n          class=\"mt-4\"\n          :total-page=\"totalPage\"\n          :current-page=\"Number($route.query.page) || 1\"\n          :query=\"{ order_id: $route.query.order_id, order_status: $route.query.order_status, date: $route.query.date }\"\n        />\n      </transition>\n\n      <!--Placeholder Messgae for Empty Data-->\n      <PlaceholderMessage\n        v-if=\"!isLoading && orders.length === 0\"\n        class=\"orders-placeholder\"\n      >\n        <i class=\"fas fa-search mr-2\" />沒有符合的結果\n      </PlaceholderMessage>\n    </section>\n  </section>\n</template>\n\n<script>\nimport AdminSideNavBar from '../components/Navbar/AdminSideNavBar'\nimport NavbarToggler from '../components/Navbar/NavbarToggler'\nimport AdminFilterPanel from '../components/AdminFilterPanel'\nimport AdminOrdersTable from '../components/AdminOrdersTable.vue'\nimport PlaceholderMessage from '../components/Placeholder/Message'\nimport Pagination from '../components/Pagination'\nimport adminAPI from '../apis/admin'\nimport moment from 'moment'\nimport { Toast } from '../utils/helpers'\n\nexport default {\n  components: {\n    AdminSideNavBar,\n    NavbarToggler,\n    AdminFilterPanel,\n    AdminOrdersTable,\n    PlaceholderMessage,\n    Pagination\n  },\n  data () {\n    return {\n      orders: [],\n      subscriptionStatus: ['未取消', '取消'],\n      totalPage: null,\n      isLoading: true,\n      navIsOpen: false\n    }\n  },\n  created () {\n    const { order_id: orderId, order_status: orderStatus, date, page } = this.$route.query\n    this.fetchOrders(orderId, date, orderStatus, page)\n  },\n  beforeRouteUpdate (to, from, next) {\n    const { order_id: orderId, order_status: orderStatus, date, page } = to.query\n    this.fetchOrders(orderId, date, orderStatus, page)\n    next()\n  },\n  methods: {\n    async fetchOrders (id = '', date = moment().format('YYYY-MM-DD'), status = '', page = 1) {\n      try {\n        // update loading status\n        this.isLoading = true\n        // fetch data from API\n        const { data, statusText } = await adminAPI.orders.getOrders({ id, date, status, page })\n        // error handling\n        if (data.status !== 'success' || statusText !== 'OK') throw new Error(data.message)\n        // fetch data from API\n        this.orders = data.orders\n        this.totalPage = data.pages\n        // update loading status\n        this.isLoading = false\n      } catch (error) {\n        // update loading status\n        this.isLoading = false\n        // fire error messages\n        Toast.fire({\n          type: 'error',\n          title: '無法取得訂單資料，請稍後再試'\n        })\n      }\n    },\n    handleAfterFilter (query) {\n      this.$router.push({ name: 'admin-orders', query })\n    },\n    handleAfterCancel (orderId) {\n      this.orders = this.orders.map(order => {\n        if (order.id !== orderId) { return order }\n        return ({\n          ...order,\n          order_status: '取消'\n        })\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@include slideAnimation(false);\n@include fadeAnimation(false);\n\n.wrapper { background-color: color(quinary); }\n.orders { @include controlPanelLayout; }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminOrders.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminOrders.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AdminOrders.vue?vue&type=template&id=98fcd25a&scoped=true&\"\nimport script from \"./AdminOrders.vue?vue&type=script&lang=js&\"\nexport * from \"./AdminOrders.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AdminOrders.vue?vue&type=style&index=0&id=98fcd25a&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"98fcd25a\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}