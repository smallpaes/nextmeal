(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-13c9542a"],{"00b4":function(t,e,r){"use strict";r("ac1f");var s=r("23e7"),a=r("c65b"),n=r("1626"),i=r("825a"),c=r("577e"),o=function(){var t=!1,e=/[ac]/;return e.exec=function(){return t=!0,/./.exec.apply(this,arguments)},!0===e.test("abc")&&t}(),l=/./.test;s({target:"RegExp",proto:!0,forced:!o},{test:function(t){var e=i(this),r=c(t),s=e.exec;if(!n(s))return a(l,e,r);var o=a(s,e,r);return null!==o&&(i(o),!0)}})},"04ca":function(t,e,r){"use strict";r("8018")},"06c5":function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));r("fb6a"),r("d3b7"),r("b0c0"),r("a630"),r("3ca3"),r("ac1f"),r("00b4");var s=r("6b75");function a(t,e){if(t){if("string"===typeof t)return Object(s["a"])(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Object(s["a"])(t,e):void 0}}},"107c":function(t,e,r){var s=r("d039"),a=r("da84"),n=a.RegExp;t.exports=s((function(){var t=n("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}))},"1e4a":function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t._self._c;return e("section",{staticClass:"order-container"},[e("UserNavbar"),t.isLoading?e("Loader",{attrs:{height:"100vh"}}):t._e(),e("transition",{attrs:{name:"slide"}},[t.isLoading?t._e():e("section",{staticClass:"container pt-4 pb-4 w-100"},[e("div",{staticClass:"order-wrapper row profil"},[e("div",{staticClass:"order-profile col-12 col-md-3 p-2"},[e("UserProfileCard")],1),e("div",{staticClass:"order-display col-12 col-md-9 p-2"},[e("div",{staticClass:"order-display-wrapper rounded shadow-sm p-3"},[e("OrderNavPill",{staticClass:"m-0"}),e("hr",{staticClass:"order-display-divider"}),t._l(t.orders,(function(t){return e("OrderCard",{key:t.id,staticClass:"pb-2 px-0 mb-3",attrs:{order:t}})})),0!==t.orders.length||t.isProcessing?t._e():e("PlaceholderMessage",[e("i",{staticClass:"fas fa-utensils mr-2"}),t._v("目前沒有訂單 ")]),!t.isLoading&&t.isProcessing?[e("OrderCard",{staticClass:"pb-2 px-0 mb-3",attrs:{"is-processing":t.isProcessing}})]:t._e(),t.totalPage>0&&t.currentPage!==t.totalPage?e("div",{staticClass:"btn-container"},[e("button",{staticClass:"btn",attrs:{href:"#",disabled:t.isProcessing},on:{click:function(e){return t.fetchOrders(t.currentStatus,t.currentPage+1)}}},[t._v(" 瀏覽更多 ")])]):t._e()],2)])])])]),e("Footer",{staticClass:"w-100"})],1)},a=[],n=r("c7eb"),i=r("2909"),c=r("1da1"),o=(r("d9e2"),r("99af"),r("1dc8")),l=r("fd2d"),d=function(){var t=this,e=t._self._c;return e("ul",{staticClass:"nav nav-pills"},[e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",class:{active:!t.$route.query.order_status},attrs:{to:{name:"user-order",query:{order_status:"today"}}}},[t._v(" 今日"),e("span",{staticClass:"d-none d-md-inline"},[t._v("訂單")])])],1),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:{name:"user-order",query:{order_status:"tomorrow"}}}},[t._v(" 明日"),e("span",{staticClass:"d-none d-md-inline"},[t._v("訂單")])])],1),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:{name:"user-order",query:{order_status:"cancel"}}}},[t._v(" 取消"),e("span",{staticClass:"d-none d-md-inline"},[t._v("訂單")])])],1),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:{name:"user-order",query:{order_status:"history"}}}},[t._v(" 歷史"),e("span",{staticClass:"d-none d-md-inline"},[t._v("訂單")])])],1)])},u=[],f=(r("e665"),r("2877")),p={},v=Object(f["a"])(p,d,u,!1,null,"2c102432",null),m=v.exports,b=(r("b0c0"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"card d-flex flex-row justify-content-between rounded-0"},[e("div",{staticClass:"card-left"},[e("div",{staticClass:"card-body px-0 py-0"},[e("h5",{staticClass:"card-title m-0"},[t.isProcessing?e("SkelentonBox",{attrs:{width:"60px"}}):[t._v(" "+t._s(t.order.meals.Restaurant.name)+" ")]],2),e("div",{staticClass:"card-description mt-2"},[e("p",{staticClass:"m-0 d-inline d-md-block"},[t.isProcessing?e("SkelentonBox",{attrs:{width:"120px"}}):[e("span",{staticClass:"d-none d-md-inline"},[t._v("餐點名稱：")]),t._v(" "+t._s(t.order.meals.name)+" ")]],2),e("p",{staticClass:"m-0 d-inline d-md-block"},[t.isProcessing?e("SkelentonBox",{attrs:{width:"100px"}}):[e("span",{staticClass:"d-none d-md-inline"},[t._v("訂購數量")]),t._v(" "+t._s(t.order.amount)+"份 ")]],2)])])]),e("div",{staticClass:"card-right"},[e("div",{staticClass:"card-right-top shadow-sm rounded text-center ml-auto"},[t.isProcessing?e("SkelentonBox",{attrs:{width:"80px",height:"55.7px"}}):[e("h5",{staticClass:"card-date"},[t._v(" "+t._s(t._f("dateTransform")(t.order.require_date))+" ")]),e("h3",{staticClass:"card-time"},[t._v(" "+t._s(t._f("timeTransform")(t.order.require_date))+" ")])]],2),t.isProcessing?e("SkelentonBox",{staticClass:"mt-3 rounded-sm",attrs:{width:"78px",height:"23px"}}):[t.order.hasComment||"history"!==t.$route.query.order_status||"取消"===t.order.order_status?t._e():e("router-link",{staticClass:"btn mt-3",attrs:{to:{name:"order-comment",params:{order_id:t.order.id}}}},[t._v(" 評論 ")]),e("router-link",{staticClass:"btn mt-3 ml-2",attrs:{to:{name:"order",params:{order_id:t.order.id}}}},[t._v(" 訂單 ")])]],2)])}),g=[],h=r("d1b6"),x=r("c1df"),C=r.n(x),_={filters:{dateTransform:function(t){return C()(new Date(t)).format("MM/DD")},timeTransform:function(t){return C()(new Date(t)).format("HH:mm")}},components:{SkelentonBox:h["a"]},props:{order:{type:Object,default:function(){return{}}},isProcessing:{type:Boolean,default:!1}}},y=_,k=(r("04ca"),Object(f["a"])(y,b,g,!1,null,"56ca8789",null)),w=k.exports,O=r("c08a"),P=r("555f"),S=r("d691"),j=r("4cce"),I=r("2fa3"),E={components:{UserNavbar:o["a"],UserProfileCard:O["a"],OrderNavPill:m,OrderCard:w,PlaceholderMessage:S["a"],Footer:l["a"],Loader:P["a"]},data:function(){return{orders:[],currentPage:0,currentStatus:"",totalPage:null,isLoading:!0,isProcessing:!1}},created:function(){var t=this.$route.query.order_status,e=void 0===t?"today":t;this.currentStatus=e,this.fetchOrders(e,this.currentPage+1)},beforeRouteUpdate:function(t,e,r){this.currentPage=0,this.totalPage=null,this.orders=[];var s=t.query.order_status,a=void 0===s?"today":s;this.currentStatus=a,this.fetchOrders(a,this.currentPage+1),r()},methods:{fetchOrders:function(t,e){var r=this;return Object(c["a"])(Object(n["a"])().mark((function s(){var a,c,o;return Object(n["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,r.isProcessing=!0,s.next=4,j["a"].getOrders({status:t,page:e});case 4:if(a=s.sent,c=a.data,o=a.statusText,"OK"===o&&"success"===c.status){s.next=9;break}throw new Error(c.message);case 9:r.orders=[].concat(Object(i["a"])(r.orders),Object(i["a"])(c.orders)),r.totalPage=c.pages,r.currentPage+=1,r.isLoading=!1,r.isProcessing=!1,s.next=21;break;case 16:s.prev=16,s.t0=s["catch"](0),r.isLoading=!1,r.isProcessing=!1,I["a"].fire({type:"error",title:"無法取得訂單資料，請稍後再試"});case 21:case"end":return s.stop()}}),s,null,[[0,16]])})))()}}},R=E,A=(r("9236"),Object(f["a"])(R,s,a,!1,null,"757399dd",null));e["default"]=A.exports},2909:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var s=r("6b75");function a(t){if(Array.isArray(t))return Object(s["a"])(t)}r("a4d3"),r("e01a"),r("d3b7"),r("d28b"),r("3ca3"),r("ddb0"),r("a630");function n(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var i=r("06c5");r("d9e2");function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t){return a(t)||n(t)||Object(i["a"])(t)||c()}},4948:function(t,e,r){"use strict";r("a2f9")},"555f":function(t,e,r){"use strict";var s=function(){var t=this,e=t._self._c;return e("section",{staticClass:"icecream-container",style:{height:t.height}},[e("div",{staticClass:"icecream-content py-5"},[t._l(3,(function(t){return e("h1",{key:t,staticClass:"icecream"},[e("i",{staticClass:"fas fa-ice-cream"})])})),e("small",{staticClass:"icecream-description"},[t._v(" 準備中 ")])],2)])},a=[],n={props:{height:{type:String,default:"100vh"}}},i=n,c=(r("db9a"),r("2877")),o=Object(c["a"])(i,s,a,!1,null,"2e263baa",null);e["a"]=o.exports},"6b75":function(t,e,r){"use strict";function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}r.d(e,"a",(function(){return s}))},8018:function(t,e,r){},9236:function(t,e,r){"use strict";r("d910")},9263:function(t,e,r){"use strict";var s=r("c65b"),a=r("e330"),n=r("577e"),i=r("ad6d"),c=r("9f7f"),o=r("5692"),l=r("7c73"),d=r("69f3").get,u=r("fce3"),f=r("107c"),p=o("native-string-replace",String.prototype.replace),v=RegExp.prototype.exec,m=v,b=a("".charAt),g=a("".indexOf),h=a("".replace),x=a("".slice),C=function(){var t=/a/,e=/b*/g;return s(v,t,"a"),s(v,e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),_=c.BROKEN_CARET,y=void 0!==/()??/.exec("")[1],k=C||y||_||u||f;k&&(m=function(t){var e,r,a,c,o,u,f,k=this,w=d(k),O=n(t),P=w.raw;if(P)return P.lastIndex=k.lastIndex,e=s(m,P,O),k.lastIndex=P.lastIndex,e;var S=w.groups,j=_&&k.sticky,I=s(i,k),E=k.source,R=0,A=O;if(j&&(I=h(I,"y",""),-1===g(I,"g")&&(I+="g"),A=x(O,k.lastIndex),k.lastIndex>0&&(!k.multiline||k.multiline&&"\n"!==b(O,k.lastIndex-1))&&(E="(?: "+E+")",A=" "+A,R++),r=new RegExp("^(?:"+E+")",I)),y&&(r=new RegExp("^"+E+"$(?!\\s)",I)),C&&(a=k.lastIndex),c=s(v,j?r:k,A),j?c?(c.input=x(c.input,R),c[0]=x(c[0],R),c.index=k.lastIndex,k.lastIndex+=c[0].length):k.lastIndex=0:C&&c&&(k.lastIndex=k.global?c.index+c[0].length:a),y&&c&&c.length>1&&s(p,c[0],r,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(c[o]=void 0)})),c&&S)for(c.groups=u=l(null),o=0;o<S.length;o++)f=S[o],u[f[0]]=c[f[1]];return c}),t.exports=m},"92de":function(t,e,r){},"9f7f":function(t,e,r){var s=r("d039"),a=r("da84"),n=a.RegExp,i=s((function(){var t=n("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),c=i||s((function(){return!n("a","y").sticky})),o=i||s((function(){var t=n("^r","gy");return t.lastIndex=2,null!=t.exec("str")}));t.exports={BROKEN_CARET:o,MISSED_STICKY:c,UNSUPPORTED_Y:i}},a2f9:function(t,e,r){},a630:function(t,e,r){var s=r("23e7"),a=r("4df4"),n=r("1c7e"),i=!n((function(t){Array.from(t)}));s({target:"Array",stat:!0,forced:i},{from:a})},ac1f:function(t,e,r){"use strict";var s=r("23e7"),a=r("9263");s({target:"RegExp",proto:!0,forced:/./.exec!==a},{exec:a})},ad14:function(t,e,r){},c08a:function(t,e,r){"use strict";r("b0c0");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"profile-card rounded-sm shadow-sm"},[e("div",{staticClass:"profile-card-top"},[e("SkelentonBox",{staticClass:"rounded-circle skelenton-box",attrs:{width:"120px",height:"120px"}}),e("img",{attrs:{src:t._f("placeholderAvatar")(t.currentUser.avatar),alt:"user avatar"}}),e("h5",{staticClass:"mt-3 profile-card-top-name"},[t._v(" "+t._s(t.currentUser.name)+" ")]),e("small",{staticClass:"profile-top-balance"},[t._v(" "+t._s(t._f("getSubscriptionStatus")(t.currentUser.subscriptionStatus))+" | 剩餘 "+t._s(t.currentUser.subscriptionBalance)+" 餐 ")])],1),e("hr",{staticClass:"m-0"}),e("div",{staticClass:"profile-card-bottom"},[e("ul",{staticClass:"nav flex-column"},[e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:{name:"user-profile"}}},[e("span",{staticClass:"icon"},[e("i",{staticClass:"fas fa-cog mr-1"})]),t._v(" 帳戶設定 ")])],1),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:{name:"user-order"},"active-class":"active"}},[e("span",{staticClass:"icon"},[e("i",{staticClass:"fas fa-clipboard-list mr-1"})]),t._v(" 訂單管理 ")])],1)])])])},a=[],n=r("5530"),i=r("d1b6"),c=r("2708"),o=r("2f62"),l={filters:{getSubscriptionStatus:function(t){return t?"訂閱中":"未訂閱"}},components:{SkelentonBox:i["a"]},mixins:[c["f"]],computed:Object(n["a"])({},Object(o["c"])(["currentUser"]))},d=l,u=(r("d202"),r("2877")),f=Object(u["a"])(d,s,a,!1,null,"a9ba2c36",null);e["a"]=f.exports},d202:function(t,e,r){"use strict";r("92de")},d691:function(t,e,r){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"placeholder-message p-2"},[e("h5",{staticClass:"m-0"},[t._t("default")],2)])},a=[],n=(r("4948"),r("2877")),i={},c=Object(n["a"])(i,s,a,!1,null,"d84b3480",null);e["a"]=c.exports},d910:function(t,e,r){},db9a:function(t,e,r){"use strict";r("ad14")},e242:function(t,e,r){},e665:function(t,e,r){"use strict";r("e242")},fce3:function(t,e,r){var s=r("d039"),a=r("da84"),n=a.RegExp;t.exports=s((function(){var t=n(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)}))}}]);
//# sourceMappingURL=chunk-13c9542a.144ca000.js.map